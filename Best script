-- Universal Tool v5.0 - Part 1/7
-- Delta Executor - Enhanced Edition
-- TEMEL YAPILANDIRMA + WALK FLING D√úZELTMESƒ∞

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local Workspace = game:GetService("Workspace")

local Player = Players.LocalPlayer
local Mouse = Player:GetMouse()
local Camera = Workspace.CurrentCamera

local function GetCharacter()
    return Player.Character or Player.CharacterAdded:Wait()
end

local Character = GetCharacter()
local HumanoidRootPart = Character:WaitForChild("HumanoidRootPart", 10)

-- GELƒ∞≈ûTƒ∞Rƒ∞LMƒ∞≈û AYARLAR
local Settings = {
    BlackHoleEnabled = false,
    TelekinesisEnabled = false,
    StunEnabled = false,
    RagdollEnabled = false,
    AutoRagdollEnabled = false,
    ESPEnabled = false,
    FlyEnabled = false,
    FlingEnabled = false,
    NoClipEnabled = false,
    GodModeEnabled = false,
    FullBrightEnabled = false,
    PullForce = 50,
    PullRadius = 150,
    TKDistance = 6,
    FlySpeed = 50,
    ESPUpdateRate = 5,
    FlingMultiplier = 100,
    RagdollDetectionRange = 100,
    GodModeHiddenPart = nil,
    ItemESPEnabled = false,
    PlayerESPEnabled = false
}

-- CONNECTIONS & STORAGE
local Connections = {}
local TKObject = nil
local TKHighlight = nil
local StunnedObjects = {}
local RagdolledNPCs = {}
local ESPObjects = {}
local ItemESPObjects = {}
local PlayerESPObjects = {}
local FlyBodyGyro = nil
local FlyBodyVelocity = nil
local FlingPart = nil
local FlingVelocity = nil
local NoClipParts = {}
local GodModeClone = nil
local OriginalHumanoid = nil

-- G√úVENLƒ∞/TEHLƒ∞KELƒ∞ NPC Lƒ∞STELERƒ∞ (GENƒ∞≈ûLETƒ∞LMƒ∞≈û)
local DangerousKeywords = {
    "zombie", "enemy", "monster", "creature", "killer", "attack", "hostile",
    "boss", "minion", "demon", "ghost", "skeleton", "spider", "wolf",
    "bear", "dragon", "slime", "goblin", "orc", "bandit", "guard",
    "soldier", "warrior", "fighter", "hunter", "predator", "beast",
    "mutant", "infected", "undead", "evil", "dark", "shadow", "death",
    "kill", "damage", "hurt", "chase", "follow", "target", "aggro",
    "mob", "npc", "ai", "bot", "dummy", "test", "horror", "scp",
    "nextbot", "entity", "backroom", "monster", "creep", "alien",
    "mutant", "rogue", "fiend", "brute", "assassin", "stalker", "hunter",
    "terror", "nightmare", "abomination", "behemoth", "leviathan",
    "raider", "pirate", "cannibal", "vampire", "werewolf", "phantom"
}

local SafeKeywords = {
    "shop", "vendor", "merchant", "npc", "friendly", "ally", "helper",
    "guide", "quest", "civilian", "villager", "citizen", "pet", "companion",
    "assistant", "clerk", "trader", "seller", "buyer", "customer",
    "teacher", "doctor", "nurse", "priest", "wizard", "mage", "archer",
    "blacksmith", "farmer", "fisherman", "bartender", "chef", "guardian",
    "protector", "healer", "merchant", "shopkeeper", "questgiver"
}

-- INFINIT YIELD TARZI WALK FLING D√úZELTMESƒ∞ (TPUNCHORD MANTIƒûI)
local function CreateInfinityFling()
    if FlingPart then return FlingPart end
    
    -- Temel fling par√ßasƒ±
    local flingPart = Instance.new("Part")
    flingPart.Name = "InfinityFlingPart"
    flingPart.Size = Vector3.new(2, 2, 2)
    flingPart.Transparency = 0.8
    flingPart.Material = Enum.Material.Neon
    flingPart.BrickColor = BrickColor.new("Hot pink")
    flingPart.CanCollide = false
    flingPart.Anchored = false
    flingPart.Locked = true
    flingPart.Massless = true
    flingPart.Parent = Workspace
    
    -- Mesh
    local mesh = Instance.new("SpecialMesh")
    mesh.MeshType = Enum.MeshType.Sphere
    mesh.Scale = Vector3.new(1.2, 1.2, 1.2)
    mesh.Parent = flingPart
    
    -- Parlaklƒ±k efekti
    local pointLight = Instance.new("PointLight")
    pointLight.Brightness = 5
    pointLight.Range = 15
    pointLight.Color = Color3.fromRGB(255, 105, 180)
    pointLight.Parent = flingPart
    
    -- BodyAngularVelocity (Infinit Yield tarzƒ±)
    local angVel = Instance.new("BodyAngularVelocity")
    angVel.Name = "FlingAngular"
    angVel.MaxTorque = Vector3.new(math.huge, math.huge, math.huge)
    angVel.AngularVelocity = Vector3.new(0, 99999, 0) -- √áok y√ºksek hƒ±z
    angVel.P = 100000
    angVel.Parent = flingPart
    
    -- BodyVelocity (hareket i√ßin)
    FlingVelocity = Instance.new("BodyVelocity")
    FlingVelocity.Name = "FlingVelocity"
    FlingVelocity.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
    FlingVelocity.Velocity = Vector3.new(0, 0, 0)
    FlingVelocity.P = 1250
    FlingVelocity.Parent = flingPart
    
    -- BodyPosition (sabitlenme i√ßin)
    local bodyPos = Instance.new("BodyPosition")
    bodyPos.Name = "FlingPosition"
    bodyPos.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
    bodyPos.Position = Vector3.new(0, 0, 0)
    bodyPos.P = 10000
    bodyPos.Parent = flingPart
    
    return flingPart
end

local function AttachFlingToCharacter()
    if not Character or not HumanoidRootPart then return end
    
    if FlingPart then
        FlingPart:Destroy()
        FlingPart = nil
    end
    
    FlingPart = CreateInfinityFling()
    
    -- Karaktere baƒülama (TPUNCHORD tarzƒ±)
    local weld = Instance.new("Weld")
    weld.Name = "FlingWeld"
    weld.Part0 = HumanoidRootPart
    weld.Part1 = FlingPart
    weld.C0 = CFrame.new(0, -2, 0) -- Ayaklarƒ±n altƒ±nda
    weld.Parent = FlingPart
    
    -- Collision events
    local touchedConnection
    touchedConnection = FlingPart.Touched:Connect(function(hit)
        if not Settings.FlingEnabled then return end
        
        local model = hit.Parent
        if model and model:IsA("Model") then
            local humanoid = model:FindFirstChildOfClass("Humanoid")
            local rootPart = model:FindFirstChild("HumanoidRootPart") or 
                            model:FindFirstChild("Torso") or 
                            model:FindFirstChild("UpperTorso")
            
            if humanoid and rootPart and not Players:GetPlayerFromCharacter(model) then
                -- INFINIT YIELD TARZI FLING UYGULA
                local direction = (rootPart.Position - FlingPart.Position).Unit
                local force = Vector3.new(
                    direction.X * Settings.FlingMultiplier * 50,
                    math.abs(direction.Y) * Settings.FlingMultiplier * 100 + 50,
                    direction.Z * Settings.FlingMultiplier * 50
                )
                
                -- Hypersonic etkisi i√ßin velocity uygula
                rootPart.Velocity = force
                
                -- Ragdoll uygula
                if not RagdolledNPCs[model] then
                    -- Humanoid motorlarƒ± devre dƒ±≈üƒ± bƒ±rak
                    for _, child in pairs(model:GetDescendants()) do
                        if child:IsA("Motor6D") then
                            child.Enabled = false
                        end
                    end
                    
                    humanoid.PlatformStand = true
                    humanoid.AutoRotate = false
                    
                    -- Ragdoll etiketi
                    local ragdollTag = Instance.new("BillboardGui")
                    ragdollTag.Name = "FlingRagdoll"
                    ragdollTag.Size = UDim2.new(0, 100, 0, 40)
                    ragdollTag.StudsOffset = Vector3.new(0, 3, 0)
                    ragdollTag.Adornee = rootPart
                    ragdollTag.AlwaysOnTop = true
                    ragdollTag.Parent = rootPart
                    
                    local tagLabel = Instance.new("TextLabel")
                    tagLabel.Size = UDim2.new(1, 0, 1, 0)
                    tagLabel.BackgroundTransparency = 1
                    tagLabel.Text = "üí• FLUNG"
                    tagLabel.TextColor3 = Color3.fromRGB(255, 50, 50)
                    tagLabel.TextSize = 16
                    tagLabel.Font = Enum.Font.GothamBold
                    tagLabel.Parent = ragdollTag
                    
                    RagdolledNPCs[model] = {
                        Humanoid = humanoid,
                        OriginalState = {
                            PlatformStand = humanoid.PlatformStand,
                            AutoRotate = humanoid.AutoRotate
                        },
                        Tag = ragdollTag,
                        MotorsDisabled = true
                    }
                    
                    -- 10 saniye sonra ragdoll'u kaldƒ±r
                    delay(10, function()
                        if RagdolledNPCs[model] then
                            humanoid.PlatformStand = RagdolledNPCs[model].OriginalState.PlatformStand
                            humanoid.AutoRotate = RagdolledNPCs[model].OriginalState.AutoRotate
                            
                            for _, child in pairs(model:GetDescendants()) do
                                if child:IsA("Motor6D") then
                                    child.Enabled = true
                                end
                            end
                            
                            if ragdollTag and ragdollTag.Parent then
                                ragdollTag:Destroy()
                            end
                            
                            RagdolledNPCs[model] = nil
                        end
                    end)
                end
                
                -- Ekstra efekt
                spawn(function()
                    for i = 1, 3 do
                        rootPart.Velocity = rootPart.Velocity + Vector3.new(
                            math.random(-100, 100),
                            math.random(50, 150),
                            math.random(-100, 100)
                        )
                        wait(0.1)
                    end
                end)
            end
        end
    end)
    
    -- Baƒülantƒ±yƒ± kaydet
    Connections.FlingTouched = touchedConnection
end

local function EnableWalkFling()
    Settings.FlingEnabled = true
    
    Character = GetCharacter()
    HumanoidRootPart = Character:FindFirstChild("HumanoidRootPart")
    
    if not HumanoidRootPart then
        warn("HumanoidRootPart bulunamadƒ±!")
        return
    end
    
    -- Fling par√ßasƒ±nƒ± olu≈ütur ve baƒüla
    AttachFlingToCharacter()
    
    -- Walk sƒ±rasƒ±nda √ßalƒ±≈üacak loop
    Connections.FlingLoop = RunService.Heartbeat:Connect(function()
        if not Settings.FlingEnabled or not FlingPart or not HumanoidRootPart then return end
        
        -- Fling par√ßasƒ±nƒ± karakterle senkronize et
        if FlingPart and FlingPart.Parent then
            -- Y√ºr√ºme hƒ±zƒ±na g√∂re etki alanƒ±nƒ± ayarla
            local humanoid = Character:FindFirstChildOfClass("Humanoid")
            if humanoid then
                local walkSpeed = humanoid.WalkSpeed
                local multiplier = math.clamp(walkSpeed / 16, 0.5, 3)
                
                -- Fling g√ºc√ºn√º ayarla
                if FlingVelocity then
                    FlingVelocity.Velocity = HumanoidRootPart.Velocity * multiplier
                end
                
                -- Etki alanƒ±ndaki NPC'leri kontrol et
                for _, npc in pairs(Workspace:GetChildren()) do
                    if npc:IsA("Model") and npc ~= Character then
                        local humanoid = npc:FindFirstChildOfClass("Humanoid")
                        local rootPart = npc:FindFirstChild("HumanoidRootPart")
                        
                        if humanoid and rootPart then
                            local distance = (rootPart.Position - HumanoidRootPart.Position).Magnitude
                            
                            -- Yakƒ±ndaki NPC'lere otomatik fling uygula
                            if distance < 15 and not RagdolledNPCs[npc] then
                                local direction = (rootPart.Position - FlingPart.Position).Unit
                                rootPart.Velocity = direction * Settings.FlingMultiplier * 30
                                
                                -- Kƒ±sa s√ºreli ragdoll
                                humanoid.PlatformStand = true
                                delay(2, function()
                                    if humanoid and humanoid.Parent then
                                        humanoid.PlatformStand = false
                                    end
                                end)
                            end
                        end
                    end
                end
            end
        end
    end)
    
    -- Hareket kontrolleri
    local flingControls = {
        Forward = false,
        Backward = false,
        Left = false,
        Right = false
    }
    
    Connections.FlingKeyDown = UserInputService.InputBegan:Connect(function(input, gameProcessed)
        if gameProcessed then return end
        
        if input.KeyCode == Enum.KeyCode.W then flingControls.Forward = true end
        if input.KeyCode == Enum.KeyCode.S then flingControls.Backward = true end
        if input.KeyCode == Enum.KeyCode.A then flingControls.Left = true end
        if input.KeyCode == Enum.KeyCode.D then flingControls.Right = true end
        
        -- Space ile zƒ±platma √∂zelliƒüi
        if input.KeyCode == Enum.KeyCode.Space and FlingPart then
            -- Yakƒ±ndaki t√ºm NPC'leri havaya u√ßur
            for _, npc in pairs(Workspace:GetChildren()) do
                if npc:IsA("Model") and npc ~= Character then
                    local rootPart = npc:FindFirstChild("HumanoidRootPart")
                    if rootPart then
                        local distance = (rootPart.Position - FlingPart.Position).Magnitude
                        if distance < 25 then
                            rootPart.Velocity = Vector3.new(
                                math.random(-200, 200),
                                math.random(300, 500),
                                math.random(-200, 200)
                            )
                        end
                    end
                end
            end
        end
    end)
    
    Connections.FlingKeyUp = UserInputService.InputEnded:Connect(function(input)
        if input.KeyCode == Enum.KeyCode.W then flingControls.Forward = false end
        if input.KeyCode == Enum.KeyCode.S then flingControls.Backward = false end
        if input.KeyCode == Enum.KeyCode.A then flingControls.Left = false end
        if input.KeyCode == Enum.KeyCode.D then flingControls.Right = false end
    end)
    
    -- Mobile touch i√ßin ek kontroller
    Connections.FlingTouch = UserInputService.TouchTap:Connect(function(touchPos, gameProcessed)
        if gameProcessed then return end
        
        -- Touch ile NPC fƒ±rlatma
        local ray = Camera:ViewportPointToRay(touchPos.X, touchPos.Y)
        local result = Workspace:Raycast(ray.Origin, ray.Direction * 1000)
        
        if result then
            local model = result.Instance.Parent
            if model and model:IsA("Model") then
                local humanoid = model:FindFirstChildOfClass("Humanoid")
                local rootPart = model:FindFirstChild("HumanoidRootPart")
                
                if humanoid and rootPart then
                    -- Tƒ±klanan NPC'yi fƒ±rlat
                    local direction = (rootPart.Position - HumanoidRootPart.Position).Unit
                    rootPart.Velocity = direction * Settings.FlingMultiplier * 80 + Vector3.new(0, 100, 0)
                    
                    -- Ragdoll uygula
                    if not RagdolledNPCs[model] then
                        humanoid.PlatformStand = true
                        delay(3, function()
                            if humanoid and humanoid.Parent then
                                humanoid.PlatformStand = false
                            end
                        end)
                    end
                end
            end
        end
    end)
    
    print("‚úÖ Walk Fling Aktif (Infinit Yield tarzƒ±)")
    print("   ‚Ä¢ Space: Yakƒ±ndakileri u√ßur")
    print("   ‚Ä¢ Walk: Otomatik NPC fƒ±rlatma")
    print("   ‚Ä¢ Touch: NPC'leri fƒ±rlat")
end

local function DisableWalkFling()
    Settings.FlingEnabled = false
    
    -- Fling par√ßasƒ±nƒ± temizle
    if FlingPart then
        FlingPart:Destroy()
        FlingPart = nil
    end
    
    FlingVelocity = nil
    
    -- Baƒülantƒ±larƒ± temizle
    if Connections.FlingLoop then Connections.FlingLoop:Disconnect() end
    if Connections.FlingKeyDown then Connections.FlingKeyDown:Disconnect() end
    if Connections.FlingKeyUp then Connections.FlingKeyUp:Disconnect() end
    if Connections.FlingTouch then Connections.FlingTouch:Disconnect() end
    if Connections.FlingTouched then Connections.FlingTouched:Disconnect() end
    
    -- Ragdoll'larƒ± temizle
    for model, data in pairs(RagdolledNPCs) do
        if data.Humanoid and data.Humanoid.Parent then
            data.Humanoid.PlatformStand = data.OriginalState.PlatformStand
            data.Humanoid.AutoRotate = data.OriginalState.AutoRotate
            
            -- Motorlarƒ± geri a√ß
            for _, child in pairs(model:GetDescendants()) do
                if child:IsA("Motor6D") then
                    child.Enabled = true
                end
            end
            
            if data.Tag and data.Tag.Parent then
                data.Tag:Destroy()
            end
        end
    end
    
    RagdolledNPCs = {}
    
    print("‚ùå Walk Fling Kapalƒ±")
end

-- KARAKTER YENƒ∞LENME TAKƒ∞Bƒ∞
Player.CharacterAdded:Connect(function(char)
    Character = char
    HumanoidRootPart = char:WaitForChild("HumanoidRootPart", 10)
    
    -- Fling aktifse yeniden baƒüla
    if Settings.FlingEnabled then
        wait(0.5) -- Karakterin y√ºklenmesini bekle
        EnableWalkFling()
    end
end)

-- OYUN BA≈ûLANGICI
spawn(function()
    wait(1)
    print("=== PART 1 Y√úKLENDƒ∞ ===")
    print("üì¶ √ñzellikler:")
    print("   ‚úÖ D√ºzeltilmi≈ü Walk Fling (Infinit Yield tarzƒ±)")
    print("   ‚úÖ TPUNCHORD mantƒ±ƒüƒ± ile hypersonic fling")
    print("   ‚úÖ Otomatik NPC ragdoll sistemi")
    print("   ‚úÖ Mobile touch desteƒüi")
    print("   ‚úÖ Karakter yenileme desteƒüi")
    print("==========================")
end)e-- Universal Tool v5.0 - Part 2/7
-- MOBƒ∞LE FLY Sƒ∞STEMƒ∞ + NO CLIP

-- PART 1'den devam ediyoruz...
local function CreateMobileFlyControls()
    -- Mobile Fly i√ßin kontrol GUI'si
    local flyControlsGui = Instance.new("ScreenGui")
    flyControlsGui.Name = "MobileFlyControls"
    flyControlsGui.ResetOnSpawn = false
    flyControlsGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    flyControlsGui.Parent = game:GetService("CoreGui")
    
    -- Ana kontrol paneli (saƒü alt k√∂≈üe)
    local controlPanel = Instance.new("Frame")
    controlPanel.Name = "ControlPanel"
    controlPanel.Size = UDim2.new(0, 280, 0, 280)
    controlPanel.Position = UDim2.new(1, -300, 1, -300)
    controlPanel.BackgroundTransparency = 1
    controlPanel.Parent = flyControlsGui
    
    -- Joystick (hareket kontrol√º)
    local joystickOuter = Instance.new("ImageLabel")
    joystickOuter.Name = "JoystickOuter"
    joystickOuter.Size = UDim2.new(0, 120, 0, 120)
    joystickOuter.Position = UDim2.new(0, 20, 1, -140)
    joystickOuter.BackgroundColor3 = Color3.fromRGB(40, 40, 60)
    joystickOuter.BackgroundTransparency = 0.4
    joystickOuter.BorderSizePixel = 0
    joystickOuter.Image = "rbxassetid://3570695787"
    joystickOuter.ImageColor3 = Color3.fromRGB(60, 60, 80)
    joystickOuter.ImageTransparency = 0.6
    joystickOuter.ScaleType = Enum.ScaleType.Slice
    joystickOuter.SliceCenter = Rect.new(100, 100, 100, 100)
    joystickOuter.Parent = controlPanel
    
    local joystickInner = Instance.new("ImageLabel")
    joystickInner.Name = "JoystickInner"
    joystickInner.Size = UDim2.new(0, 60, 0, 60)
    joystickInner.Position = UDim2.new(0.5, -30, 0.5, -30)
    joystickInner.BackgroundTransparency = 1
    joystickInner.Image = "rbxassetid://3570695787"
    joystickInner.ImageColor3 = Color3.fromRGB(100, 150, 255)
    joystickInner.ImageTransparency = 0.3
    joystickInner.ScaleType = Enum.ScaleType.Slice
    joystickInner.SliceCenter = Rect.new(100, 100, 100, 100)
    joystickInner.Parent = joystickOuter
    
    -- Y√ºkseklik kontrol butonlarƒ±
    local upButton = Instance.new("TextButton")
    upButton.Name = "UpButton"
    upButton.Size = UDim2.new(0, 80, 0, 80)
    upButton.Position = UDim2.new(1, -100, 0.5, -140)
    upButton.BackgroundColor3 = Color3.fromRGB(80, 180, 120)
    upButton.BackgroundTransparency = 0.3
    upButton.Text = "‚¨Ü"
    upButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    upButton.TextSize = 24
    upButton.Font = Enum.Font.GothamBold
    upButton.Parent = controlPanel
    
    local downButton = Instance.new("TextButton")
    downButton.Name = "DownButton"
    downButton.Size = UDim2.new(0, 80, 0, 80)
    downButton.Position = UDim2.new(1, -100, 0.5, -40)
    downButton.BackgroundColor3 = Color3.fromRGB(180, 80, 80)
    downButton.BackgroundTransparency = 0.3
    downButton.Text = "‚¨á"
    downButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    downButton.TextSize = 24
    downButton.Font = Enum.Font.GothamBold
    downButton.Parent = controlPanel
    
    -- Hƒ±z kontrol slider'ƒ±
    local speedPanel = Instance.new("Frame")
    speedPanel.Name = "SpeedPanel"
    speedPanel.Size = UDim2.new(0, 200, 0, 40)
    speedPanel.Position = UDim2.new(0, 40, 0, 20)
    speedPanel.BackgroundColor3 = Color3.fromRGB(30, 30, 50)
    speedPanel.BackgroundTransparency = 0.3
    speedPanel.Parent = controlPanel
    
    local speedLabel = Instance.new("TextLabel")
    speedLabel.Name = "SpeedLabel"
    speedLabel.Size = UDim2.new(0.4, 0, 1, 0)
    speedLabel.Position = UDim2.new(0, 10, 0, 0)
    speedLabel.BackgroundTransparency = 1
    speedLabel.Text = "Fly Speed: " .. Settings.FlySpeed
    speedLabel.TextColor3 = Color3.fromRGB(200, 200, 255)
    speedLabel.TextSize = 14
    speedLabel.Font = Enum.Font.Gotham
    speedLabel.TextXAlignment = Enum.TextXAlignment.Left
    speedLabel.Parent = speedPanel
    
    local speedSlider = Instance.new("Frame")
    speedSlider.Name = "SpeedSlider"
    speedSlider.Size = UDim2.new(0.5, 0, 0, 6)
    speedSlider.Position = UDim2.new(0.4, 10, 0.5, -3)
    speedSlider.BackgroundColor3 = Color3.fromRGB(60, 60, 80)
    speedSlider.BorderSizePixel = 0
    speedSlider.Parent = speedPanel
    
    local speedFill = Instance.new("Frame")
    speedFill.Name = "SpeedFill"
    speedFill.Size = UDim2.new((Settings.FlySpeed - 10) / 190, 0, 1, 0)
    speedFill.BackgroundColor3 = Color3.fromRGB(100, 150, 255)
    speedFill.BorderSizePixel = 0
    speedFill.Parent = speedSlider
    
    local speedKnob = Instance.new("Frame")
    speedKnob.Name = "SpeedKnob"
    speedKnob.Size = UDim2.new(0, 12, 0, 12)
    speedKnob.Position = UDim2.new((Settings.FlySpeed - 10) / 190, -6, 0.5, -6)
    speedKnob.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    speedKnob.BorderSizePixel = 0
    speedKnob.Parent = speedSlider
    
    -- Mobile kontrol deƒüi≈ükenleri
    local mobileFlyControls = {
        JoystickActive = false,
        JoystickPosition = Vector2.new(0, 0),
        JoystickStartPos = Vector2.new(0, 0),
        JoystickOuterPos = Vector2.new(0, 0),
        UpPressed = false,
        DownPressed = false,
        SpeedDragging = false
    }
    
    -- Joystick kontrol√º
    joystickInner.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.Touch then
            mobileFlyControls.JoystickActive = true
            mobileFlyControls.JoystickStartPos = input.Position
            mobileFlyControls.JoystickOuterPos = Vector2.new(
                joystickOuter.AbsolutePosition.X + joystickOuter.AbsoluteSize.X / 2,
                joystickOuter.AbsolutePosition.Y + joystickOuter.AbsoluteSize.Y / 2
            )
        end
    end)
    
    UserInputService.InputChanged:Connect(function(input)
        if mobileFlyControls.JoystickActive and input.UserInputType == Enum.UserInputType.Touch then
            local delta = input.Position - mobileFlyControls.JoystickStartPos
            local maxDistance = joystickOuter.AbsoluteSize.X / 2 - joystickInner.AbsoluteSize.X / 2
            
            delta = Vector2.new(
                math.clamp(delta.X, -maxDistance, maxDistance),
                math.clamp(delta.Y, -maxDistance, maxDistance)
            )
            
            mobileFlyControls.JoystickPosition = Vector2.new(
                delta.X / maxDistance,
                delta.Y / maxDistance
            )
            
            -- Joystick g√∂rselini g√ºncelle
            joystickInner.Position = UDim2.new(
                0.5, delta.X,
                0.5, delta.Y
            )
        end
        
        if mobileFlyControls.SpeedDragging and input.UserInputType == Enum.UserInputType.Touch then
            local xPos = math.clamp(
                input.Position.X - speedSlider.AbsolutePosition.X,
                0, speedSlider.AbsoluteSize.X
            )
            
            local percent = xPos / speedSlider.AbsoluteSize.X
            Settings.FlySpeed = math.floor(10 + percent * 190)
            
            speedFill.Size = UDim2.new(percent, 0, 1, 0)
            speedKnob.Position = UDim2.new(percent, -6, 0.5, -6)
            speedLabel.Text = "Fly Speed: " .. Settings.FlySpeed
        end
    end)
    
    UserInputService.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.Touch then
            if mobileFlyControls.JoystickActive then
                mobileFlyControls.JoystickActive = false
                mobileFlyControls.JoystickPosition = Vector2.new(0, 0)
                
                -- Joystick'i sƒ±fƒ±rla
                joystickInner.Position = UDim2.new(0.5, -30, 0.5, -30)
            end
            
            if mobileFlyControls.SpeedDragging then
                mobileFlyControls.SpeedDragging = false
            end
        end
    end)
    
    -- Buton kontrolleri
    upButton.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.Touch then
            mobileFlyControls.UpPressed = true
            upButton.BackgroundTransparency = 0.1
        end
    end)
    
    upButton.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.Touch then
            mobileFlyControls.UpPressed = false
            upButton.BackgroundTransparency = 0.3
        end
    end)
    
    downButton.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.Touch then
            mobileFlyControls.DownPressed = true
            downButton.BackgroundTransparency = 0.1
        end
    end)
    
    downButton.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.Touch then
            mobileFlyControls.DownPressed = false
            downButton.BackgroundTransparency = 0.3
        end
    end)
    
    -- Slider kontrol√º
    speedSlider.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.Touch then
            mobileFlyControls.SpeedDragging = true
        end
    end)
    
    -- GUI'yi ba≈ülangƒ±√ßta gizle
    flyControlsGui.Enabled = false
    
    return {
        GUI = flyControlsGui,
        Controls = mobileFlyControls
    }
end

-- MOBƒ∞LE UYUMLU FLY Sƒ∞STEMƒ∞
local MobileFlyGUI = nil
local MobileControls = nil

local function EnableMobileFly()
    Settings.FlyEnabled = true
    
    Character = GetCharacter()
    HumanoidRootPart = Character:FindFirstChild("HumanoidRootPart")
    
    if not HumanoidRootPart then
        warn("HumanoidRootPart bulunamadƒ±!")
        return
    end
    
    local humanoid = Character:FindFirstChildOfClass("Humanoid")
    if humanoid then
        humanoid.PlatformStand = true
    end
    
    -- BodyGyro (y√∂n kontrol√º)
    FlyBodyGyro = Instance.new("BodyGyro")
    FlyBodyGyro.Name = "FlyBodyGyro"
    FlyBodyGyro.MaxTorque = Vector3.new(40000, 40000, 40000)
    FlyBodyGyro.P = 1000
    FlyBodyGyro.D = 100
    FlyBodyGyro.CFrame = HumanoidRootPart.CFrame
    FlyBodyGyro.Parent = HumanoidRootPart
    
    -- BodyVelocity (hareket)
    FlyBodyVelocity = Instance.new("BodyVelocity")
    FlyBodyVelocity.Name = "FlyBodyVelocity"
    FlyBodyVelocity.MaxForce = Vector3.new(40000, 40000, 40000)
    FlyBodyVelocity.Velocity = Vector3.new(0, 0, 0)
    FlyBodyVelocity.P = 1250
    FlyBodyVelocity.Parent = HumanoidRootPart
    
    -- Mobile kontrol GUI'sini olu≈ütur
    if not MobileFlyGUI then
        MobileFlyGUI = CreateMobileFlyControls()
        MobileControls = MobileFlyGUI.Controls
        MobileFlyGUI.GUI.Enabled = true
    else
        MobileFlyGUI.GUI.Enabled = true
    end
    
    -- Fly kontrol deƒüi≈ükenleri
    local flyKeys = {
        W = false, A = false, S = false, D = false,
        Space = false, LeftShift = false
    }
    
    -- KLASƒ∞K KLAVYE KONTROLLERƒ∞
    Connections.FlyKeyDown = UserInputService.InputBegan:Connect(function(input, gameProcessed)
        if gameProcessed then return end
        
        if input.KeyCode == Enum.KeyCode.W then flyKeys.W = true end
        if input.KeyCode == Enum.KeyCode.A then flyKeys.A = true end
        if input.KeyCode == Enum.KeyCode.S then flyKeys.S = true end
        if input.KeyCode == Enum.KeyCode.D then flyKeys.D = true end
        if input.KeyCode == Enum.KeyCode.Space then flyKeys.Space = true end
        if input.KeyCode == Enum.KeyCode.LeftShift then flyKeys.LeftShift = true end
        
        -- E tu≈üu ile hƒ±z artƒ±rma
        if input.KeyCode == Enum.KeyCode.E then
            Settings.FlySpeed = math.min(Settings.FlySpeed + 20, 200)
            if MobileFlyGUI then
                MobileFlyGUI.GUI.ControlPanel.SpeedPanel.SpeedLabel.Text = "Fly Speed: " .. Settings.FlySpeed
            end
        end
        
        -- Q tu≈üu ile hƒ±z azaltma
        if input.KeyCode == Enum.KeyCode.Q then
            Settings.FlySpeed = math.max(Settings.FlySpeed - 20, 10)
            if MobileFlyGUI then
                MobileFlyGUI.GUI.ControlPanel.SpeedPanel.SpeedLabel.Text = "Fly Speed: " .. Settings.FlySpeed
            end
        end
    end)
    
    Connections.FlyKeyUp = UserInputService.InputEnded:Connect(function(input)
        if input.KeyCode == Enum.KeyCode.W then flyKeys.W = false end
        if input.KeyCode == Enum.KeyCode.A then flyKeys.A = false end
        if input.KeyCode == Enum.KeyCode.S then flyKeys.S = false end
        if input.KeyCode == Enum.KeyCode.D then flyKeys.D = false end
        if input.KeyCode == Enum.KeyCode.Space then flyKeys.Space = false end
        if input.KeyCode == Enum.KeyCode.LeftShift then flyKeys.LeftShift = false end
    end)
    
    -- MOBILE JOYSTICK KONTROL LOOP'U
    Connections.FlyLoop = RunService.Heartbeat:Connect(function()
        if not Settings.FlyEnabled or not FlyBodyGyro or not FlyBodyVelocity then return end
        
        pcall(function()
            -- Kamera y√∂n√ºn√º takip et
            FlyBodyGyro.CFrame = Camera.CFrame
            
            -- Hareket vekt√∂r√º
            local moveVector = Vector3.new(0, 0, 0)
            
            -- KLAVYE KONTROLLERƒ∞
            if flyKeys.W then moveVector = moveVector + Camera.CFrame.LookVector end
            if flyKeys.S then moveVector = moveVector - Camera.CFrame.LookVector end
            if flyKeys.A then moveVector = moveVector - Camera.CFrame.RightVector end
            if flyKeys.D then moveVector = moveVector + Camera.CFrame.RightVector end
            if flyKeys.Space then moveVector = moveVector + Vector3.new(0, 1, 0) end
            if flyKeys.LeftShift then moveVector = moveVector - Vector3.new(0, 1, 0) end
            
            -- MOBILE JOYSTICK KONTROLLERƒ∞
            if MobileControls and MobileControls.JoystickPosition then
                local joyX = MobileControls.JoystickPosition.X
                local joyY = MobileControls.JoystickPosition.Y
                
                if joyX ~= 0 or joyY ~= 0 then
                    moveVector = moveVector + (Camera.CFrame.RightVector * joyX * 0.7)
                    moveVector = moveVector + (Camera.CFrame.LookVector * joyY * 0.7)
                end
                
                -- Y√úKSEKLƒ∞K KONTROLLERƒ∞
                if MobileControls.UpPressed then
                    moveVector = moveVector + Vector3.new(0, 0.8, 0)
                end
                
                if MobileControls.DownPressed then
                    moveVector = moveVector - Vector3.new(0, 0.8, 0)
                end
            end
            
            -- MOBILE TOUCH HAREKET KONTROL√ú
            if humanoid then
                local moveDir = humanoid.MoveDirection
                if moveDir.Magnitude > 0.1 then
                    moveVector = moveVector + (Camera.CFrame.LookVector * moveDir.Z * 0.5)
                    moveVector = moveVector + (Camera.CFrame.RightVector * moveDir.X * 0.5)
                end
            end
            
            -- Hƒ±z limiti ve velocity uygulama
            if moveVector.Magnitude > 0 then
                local speedMultiplier = Settings.FlySpeed
                
                -- Smooth hareket i√ßin interpolasyon
                local currentVel = FlyBodyVelocity.Velocity
                local targetVel = moveVector.Unit * speedMultiplier
                local newVel = currentVel:Lerp(targetVel, 0.3)
                
                FlyBodyVelocity.Velocity = newVel
            else
                -- Durma (smooth)
                FlyBodyVelocity.Velocity = FlyBodyVelocity.Velocity * 0.8
                if FlyBodyVelocity.Velocity.Magnitude < 2 then
                    FlyBodyVelocity.Velocity = Vector3.new(0, 0, 0)
                end
            end
            
            -- Anti-stuck korumasƒ±
            if HumanoidRootPart and (HumanoidRootPart.Position.Y < -500 or HumanoidRootPart.Position.Y > 10000) then
                HumanoidRootPart.Velocity = Vector3.new(0, 0, 0)
                HumanoidRootPart.CFrame = CFrame.new(0, 100, 0)
            end
        end)
    end)
    
    -- FLY TUTORIAL MESAJI
    spawn(function()
        wait(1)
        print("=== MOBILE FLY AKTƒ∞F ===")
        print("üì± Mobile Kontroller:")
        print("   ‚Ä¢ Joystick: ƒ∞leri/Geri/Saƒü/Sol")
        print("   ‚Ä¢ Yukarƒ±/A≈üaƒüƒ± Butonlarƒ±: Y√ºkseklik")
        print("   ‚Ä¢ Slider: Hƒ±z kontrol√º (10-200)")
        print("")
        print("‚å®Ô∏è Klavye Kontrolleri:")
        print("   ‚Ä¢ WASD: Hareket")
        print("   ‚Ä¢ Space/Shift: Yukarƒ±/A≈üaƒüƒ±")
        print("   ‚Ä¢ E/Q: Hƒ±z artƒ±r/azalt")
        print("==========================")
    end)
end

local function DisableMobileFly()
    Settings.FlyEnabled = false
    
    -- Mobile GUI'yi gizle
    if MobileFlyGUI then
        MobileFlyGUI.GUI.Enabled = false
    end
    
    -- Fly bile≈üenlerini temizle
    pcall(function()
        if FlyBodyGyro then 
            FlyBodyGyro:Destroy() 
            FlyBodyGyro = nil 
        end
        
        if FlyBodyVelocity then 
            FlyBodyVelocity:Destroy() 
            FlyBodyVelocity = nil 
        end
        
        Character = GetCharacter()
        local humanoid = Character and Character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            humanoid.PlatformStand = false
            humanoid:ChangeState(Enum.HumanoidStateType.Landed)
        end
    end)
    
    -- Baƒülantƒ±larƒ± temizle
    if Connections.FlyKeyDown then Connections.FlyKeyDown:Disconnect() end
    if Connections.FlyKeyUp then Connections.FlyKeyUp:Disconnect() end
    if Connections.FlyLoop then Connections.FlyLoop:Disconnect() end
    
    print("‚ùå Mobile Fly Kapalƒ±")
end

-- NO CLIP Sƒ∞STEMƒ∞
local function EnableNoClip()
    Settings.NoClipEnabled = true
    
    Character = GetCharacter()
    
    if not Character then
        warn("Karakter bulunamadƒ±!")
        return
    end
    
    -- Karakterin t√ºm par√ßalarƒ±nƒ± bul
    NoClipParts = {}
    
    for _, part in pairs(Character:GetDescendants()) do
        if part:IsA("BasePart") and part.CanCollide then
            table.insert(NoClipParts, {
                Part = part,
                OriginalCanCollide = part.CanCollide
            })
            part.CanCollide = false
        end
    end
    
    -- Yeni eklenen par√ßalarƒ± da takip et
    Connections.NoClipAdded = Character.DescendantAdded:Connect(function(part)
        if part:IsA("BasePart") and part.CanCollide then
            table.insert(NoClipParts, {
                Part = part,
                OriginalCanCollide = part.CanCollide
            })
            part.CanCollide = false
        end
    end)
    
    -- NoClip loop (duvarlardan ge√ßerken efekt)
    Connections.NoClipLoop = RunService.Heartbeat:Connect(function()
        if not Settings.NoClipEnabled then return end
        
        -- NoClip sƒ±rasƒ±nda par√ßalarƒ±n collision'unu kontrol et
        for _, data in pairs(NoClipParts) do
            if data.Part and data.Part.Parent then
                if data.Part.CanCollide then
                    data.Part.CanCollide = false
                end
                
                -- NoClip efekti (parlaklƒ±k)
                if not data.Part:FindFirstChild("NoClipLight") then
                    local light = Instance.new("PointLight")
                    light.Name = "NoClipLight"
                    light.Brightness = 0.3
                    light.Range = 8
                    light.Color = Color3.fromRGB(100, 200, 255)
                    light.Parent = data.Part
                end
            end
        end
    end)
    
    -- NoClip durum g√∂stergesi
    local indicator = Instance.new("BillboardGui")
    indicator.Name = "NoClipIndicator"
    indicator.Size = UDim2.new(0, 100, 0, 40)
    indicator.StudsOffset = Vector3.new(0, 3, 0)
    indicator.AlwaysOnTop = true
    indicator.Adornee = HumanoidRootPart
    indicator.Parent = HumanoidRootPart
    
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, 0, 1, 0)
    label.BackgroundTransparency = 1
    label.Text = "üöÄ NO CLIP"
    label.TextColor3 = Color3.fromRGB(100, 200, 255)
    label.TextSize = 16
    label.Font = Enum.Font.GothamBold
    label.Parent = indicator
    
    print("‚úÖ No Clip Aktif - Duvarlardan ge√ßebilirsiniz!")
end

local function DisableNoClip()
    Settings.NoClipEnabled = false
    
    -- Collision'larƒ± geri y√ºkle
    for _, data in pairs(NoClipParts) do
        if data.Part and data.Part.Parent then
            pcall(function()
                data.Part.CanCollide = data.OriginalCanCollide
                
                -- NoClip efektlerini temizle
                local light = data.Part:FindFirstChild("NoClipLight")
                if light then light:Destroy() end
            end)
        end
    end
    
    NoClipParts = {}
    
    -- Baƒülantƒ±larƒ± temizle
    if Connections.NoClipAdded then Connections.NoClipAdded:Disconnect() end
    if Connections.NoClipLoop then Connections.NoClipLoop:Disconnect() end
    
    -- G√∂stergeleri temizle
    pcall(function()
        if HumanoidRootPart then
            local indicator = HumanoidRootPart:FindFirstChild("NoClipIndicator")
            if indicator then indicator:Destroy() end
        end
    end)
    
    print("‚ùå No Clip Kapalƒ±")
end

-- FLY + NO CLIP KOMBƒ∞NASYONU
local function ToggleFlyAndNoClip()
    if Settings.FlyEnabled then
        DisableMobileFly()
        if Settings.NoClipEnabled then
            DisableNoClip()
        end
    else
        EnableMobileFly()
        EnableNoClip() -- Fly ile birlikte NoClip'ƒ± da a√ß
    end
end

-- KARAKTER DEƒûƒ∞≈ûƒ∞KLƒ∞ƒûƒ∞ ƒ∞√áƒ∞N OTOMATƒ∞K AYARLAMA
Player.CharacterAdded:Connect(function(char)
    Character = char
    HumanoidRootPart = char:WaitForChild("HumanoidRootPart", 10)
    
    -- Fly aktifse yeniden baƒüla
    if Settings.FlyEnabled then
        wait(0.5)
        DisableMobileFly() -- √ñnce temizle
        EnableMobileFly()  -- Sonra yeniden ba≈ülat
    end
    
    -- NoClip aktifse yeniden baƒüla
    if Settings.NoClipEnabled then
        wait(0.5)
        DisableNoClip()    -- √ñnce temizle
        EnableNoClip()     -- Sonra yeniden ba≈ülat
    end
end)

-- OYUN BA≈ûLANGICI Bƒ∞LGƒ∞ MESAJI
spawn(function()
    wait(1)
    print("=== PART 2 Y√úKLENDƒ∞ ===")
    print("üì¶ Yeni √ñzellikler:")
    print("   ‚úÖ MOBƒ∞LE FLY Sƒ∞STEMƒ∞")
    print("     ‚Ä¢ Joystick kontroll√º")
    print("     ‚Ä¢ Touch butonlarƒ±")
    print("     ‚Ä¢ Hƒ±z ayarlanabilir slider")
    print("     ‚Ä¢ Klavye desteƒüi (WASD + Space/Shift)")
    print("")
    print("   ‚úÖ NO CLIP Sƒ∞STEMƒ∞")
    print("     ‚Ä¢ Otomatik collision kapatma")
    print("     ‚Ä¢ G√∂rsel efektler")
    print("     ‚Ä¢ Fly ile kombine √ßalƒ±≈üma")
    print("")
    print("   ‚öôÔ∏è Kontroller:")
    print("     ‚Ä¢ Fly a√ßƒ±kken otomatik NoClip")
    print("     ‚Ä¢ Karakter deƒüi≈üiminde otomatik yenileme")
    print("==========================")
end)-- Universal Tool v5.0 - Part 3/7
-- GOD MODE + ITEM ESP + PLAYER ESP

-- GOD MODE Sƒ∞STEMƒ∞ (ƒ∞NSAN KISMINI YER ALTINA SAKLAMA)
local function EnableGodMode()
    Settings.GodModeEnabled = true
    
    Character = GetCharacter()
    if not Character then
        warn("Karakter bulunamadƒ±!")
        return
    end
    
    local humanoid = Character:FindFirstChildOfClass("Humanoid")
    if not humanoid then
        warn("Humanoid bulunamadƒ±!")
        return
    end
    
    -- Orjinal humanoid'i kaydet
    OriginalHumanoid = humanoid
    
    -- ƒ∞nsan kƒ±smƒ±nƒ± (HumanoidRootPart) klonla ve sakla
    local humanRootPart = Character:FindFirstChild("HumanoidRootPart")
    if humanRootPart then
        -- Klonu olu≈ütur
        GodModeClone = humanRootPart:Clone()
        GodModeClone.Name = "GodModeHiddenPart"
        GodModeClone.Transparency = 1
        GodModeClone.CanCollide = false
        GodModeClone.Anchored = true
        GodModeClone.Parent = workspace
        
        -- Yer altƒ±nda (500 studs a≈üaƒüƒ±da) sakla
        local hiddenPosition = humanRootPart.Position - Vector3.new(0, 500, 0)
        GodModeClone.CFrame = CFrame.new(hiddenPosition)
        
        -- Humanoid'i klona baƒüla
        local weld = Instance.new("Weld")
        weld.Name = "GodModeWeld"
        weld.Part0 = GodModeClone
        weld.Part1 = humanRootPart
        weld.C0 = CFrame.new(0, 500, 0) -- 500 studs yukarƒ±da g√∂r√ºn√ºr
        weld.Parent = GodModeClone
        
        -- Humanoid'in √∂l√ºm√ºn√º engelle
        humanoid.MaxHealth = math.huge
        humanoid.Health = math.huge
        
        -- Hasar alma event'larƒ±nƒ± engelle
        Connections.GodModeDamage = humanoid.Touched:Connect(function(hit)
            -- Hasar veren par√ßalarƒ± engelle
            if hit:FindFirstChild("Damage") or hit:FindFirstChild("damage") or hit.Name:lower():find("damage") then
                hit:Destroy()
            end
        end)
        
        -- Can yenileme
        Connections.GodModeHeal = RunService.Heartbeat:Connect(function()
            if Settings.GodModeEnabled and humanoid then
                humanoid.Health = humanoid.MaxHealth
                
                -- Invincibility efekti
                if not Character:FindFirstChild("GodModeEffect") then
                    local effect = Instance.new("ForceField")
                    effect.Name = "GodModeEffect"
                    effect.Visible = false -- G√∂r√ºnmez forcefield
                    effect.Parent = Character
                end
            end
        end)
        
        -- NPC saldƒ±rƒ±larƒ±nƒ± engelle
        Connections.GodModeNPC = workspace.DescendantAdded:Connect(function(obj)
            if not Settings.GodModeEnabled then return end
            
            if obj:IsA("BasePart") then
                if obj.Name:lower():find("hitbox") or obj.Name:lower():find("damage") then
                    -- Hasar veren par√ßalarƒ± izole et
                    obj.CanTouch = false
                    obj.CanQuery = false
                end
            end
        end)
        
        -- God Mode g√∂stergesi
        local godIndicator = Instance.new("BillboardGui")
        godIndicator.Name = "GodModeIndicator"
        godIndicator.Size = UDim2.new(0, 150, 0, 40)
        godIndicator.StudsOffset = Vector3.new(0, 3.5, 0)
        godIndicator.AlwaysOnTop = true
        godIndicator.Adornee = humanRootPart
        godIndicator.Parent = humanRootPart
        
        local godLabel = Instance.new("TextLabel")
        godLabel.Size = UDim2.new(1, 0, 1, 0)
        godLabel.BackgroundTransparency = 1
        godLabel.Text = "üëë GOD MODE"
        godLabel.TextColor3 = Color3.fromRGB(255, 215, 0)
        godLabel.TextSize = 18
        godLabel.Font = Enum.Font.GothamBold
        godLabel.Parent = godIndicator
        
        -- Altƒ±n hale efekti
        for _, part in pairs(Character:GetDescendants()) do
            if part:IsA("BasePart") then
                part.BrickColor = BrickColor.new("Gold")
                part.Material = Enum.Material.Neon
                
                -- I≈üƒ±k efekti
                local light = Instance.new("PointLight")
                light.Name = "GodLight"
                light.Brightness = 2
                light.Range = 12
                light.Color = Color3.fromRGB(255, 215, 0)
                light.Parent = part
            end
        end
        
        print("‚úÖ God Mode Aktif!")
        print("   ‚Ä¢ ƒ∞nsan kƒ±smƒ± yer altƒ±nda gizli")
        print("   ‚Ä¢ Hasar engellendi")
        print("   ‚Ä¢ Sonsuz can")
    else
        warn("HumanoidRootPart bulunamadƒ±!")
    end
end

local function DisableGodMode()
    Settings.GodModeEnabled = false
    
    -- Klonu temizle
    if GodModeClone then
        GodModeClone:Destroy()
        GodModeClone = nil
    end
    
    -- Baƒülantƒ±larƒ± temizle
    if Connections.GodModeDamage then Connections.GodModeDamage:Disconnect() end
    if Connections.GodModeHeal then Connections.GodModeHeal:Disconnect() end
    if Connections.GodModeNPC then Connections.GodModeNPC:Disconnect() end
    
    -- Efektleri temizle
    pcall(function()
        Character = GetCharacter()
        
        if Character then
            local effect = Character:FindFirstChild("GodModeEffect")
            if effect then effect:Destroy() end
            
            local indicator = Character:FindFirstChild("GodModeIndicator")
            if indicator then indicator:Destroy() end
            
            -- Orijinal renklere d√∂n
            for _, part in pairs(Character:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.BrickColor = BrickColor.new("Medium stone grey")
                    part.Material = Enum.Material.Plastic
                    
                    local light = part:FindFirstChild("GodLight")
                    if light then light:Destroy() end
                end
            end
        end
    end)
    
    print("‚ùå God Mode Kapalƒ±")
end

-- ITEM ESP Sƒ∞STEMƒ∞ (E≈ûYA G√ñR√úN√úRL√úƒû√ú)
local function IsItem(obj)
    if not obj then return false end
    
    -- Tool kontrol√º
    if obj:IsA("Tool") then
        return true
    end
    
    -- Part isimlerinden kontrol
    local name = obj.Name:lower()
    local itemKeywords = {
        "sword", "axe", "hammer", "bow", "gun", "weapon", "tool",
        "coin", "money", "gold", "cash", "dollar", "gem", "crystal",
        "health", "potion", "food", "drink", "medkit", "ammo", "bullet",
        "key", "card", "artifact", "relic", "treasure", "chest", "box",
        "package", "bag", "backpack", "ring", "necklace", "armor", "shield",
        "helmet", "boots", "gloves", "pants", "shirt", "hat", "mask",
        "book", "scroll", "map", "paper", "document", "note", "letter",
        "flower", "plant", "herb", "mushroom", "fruit", "vegetable",
        "meat", "fish", "chicken", "beef", "pork", "egg", "milk",
        "wood", "stone", "iron", "metal", "steel", "diamond", "ruby",
        "sapphire", "emerald", "amethyst", "topaz", "pearl", "obsidian"
    }
    
    for _, keyword in pairs(itemKeywords) do
        if name:find(keyword) then
            return true
        end
    end
    
    -- Tool klas√∂r√ºnde mi kontrol et
    local parent = obj.Parent
    while parent do
        local parentName = parent.Name:lower()
        if parentName:find("tool") or parentName:find("weapon") or 
           parentName:find("item") or parentName:find("loot") then
            return true
        end
        parent = parent.Parent
    end
    
    return false
end

local function CreateItemESP(item)
    if not item or ItemESPObjects[item] then return end
    
    local rootPart = nil
    
    if item:IsA("Tool") then
        -- Tool i√ßin Handle'ƒ± bul
        rootPart = item:FindFirstChild("Handle") or item:FindFirstChildWhichIsA("BasePart")
    elseif item:IsA("BasePart") then
        rootPart = item
    elseif item:IsA("Model") then
        rootPart = item:FindFirstChildWhichIsA("BasePart")
    end
    
    if not rootPart then return end
    
    -- Billboard GUI
    local billboard = Instance.new("BillboardGui")
    billboard.Name = "ItemESP_" .. item.Name
    billboard.Size = UDim2.new(0, 150, 0, 40)
    billboard.StudsOffset = Vector3.new(0, 2, 0)
    billboard.AlwaysOnTop = true
    billboard.MaxDistance = 250
    billboard.Adornee = rootPart
    billboard.Parent = rootPart
    
    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(1, 0, 1, 0)
    frame.BackgroundTransparency = 1
    frame.Parent = billboard
    
    -- ƒ∞sim etiketi
    local nameLabel = Instance.new("TextLabel")
    nameLabel.Size = UDim2.new(1, 0, 0.5, 0)
    nameLabel.BackgroundTransparency = 1
    nameLabel.Text = item.Name
    nameLabel.TextColor3 = Color3.fromRGB(50, 255, 50)
    nameLabel.TextStrokeTransparency = 0.4
    nameLabel.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
    nameLabel.TextSize = 12
    nameLabel.Font = Enum.Font.GothamBold
    nameLabel.Parent = frame
    
    -- Mesafe etiketi
    local distanceLabel = Instance.new("TextLabel")
    distanceLabel.Size = UDim2.new(1, 0, 0.5, 0)
    distanceLabel.Position = UDim2.new(0, 0, 0.5, 0)
    distanceLabel.BackgroundTransparency = 1
    distanceLabel.Text = "Item"
    distanceLabel.TextColor3 = Color3.fromRGB(200, 200, 255)
    distanceLabel.TextStrokeTransparency = 0.4
    distanceLabel.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
    distanceLabel.TextSize = 10
    distanceLabel.Font = Enum.Font.Gotham
    distanceLabel.Parent = frame
    
    -- Highlight efekt
    local highlight = Instance.new("Highlight")
    highlight.Name = "ItemHighlight"
    highlight.Adornee = item
    highlight.FillColor = Color3.fromRGB(0, 255, 0)
    highlight.FillTransparency = 0.8
    highlight.OutlineColor = Color3.fromRGB(0, 200, 0)
    highlight.OutlineTransparency = 0.3
    highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
    highlight.Parent = item
    
    -- I≈üƒ±k efekti
    local light = Instance.new("PointLight")
    light.Name = "ItemLight"
    light.Brightness = 3
    light.Range = 8
    light.Color = Color3.fromRGB(0, 255, 0)
    light.Parent = rootPart
    
    -- ESP objesini kaydet
    ItemESPObjects[item] = {
        Billboard = billboard,
        Highlight = highlight,
        NameLabel = nameLabel,
        DistanceLabel = distanceLabel,
        RootPart = rootPart,
        Light = light
    }
end

local function RemoveItemESP(item)
    if not ItemESPObjects[item] then return end
    
    pcall(function()
        local data = ItemESPObjects[item]
        if data.Billboard then data.Billboard:Destroy() end
        if data.Highlight then data.Highlight:Destroy() end
        if data.Light then data.Light:Destroy() end
        ItemESPObjects[item] = nil
    end)
end

local function UpdateItemESP()
    if not Settings.ItemESPEnabled then return end
    
    pcall(function()
        Character = GetCharacter()
        local playerRoot = Character and Character:FindFirstChild("HumanoidRootPart")
        if not playerRoot then return end
        
        for item, data in pairs(ItemESPObjects) do
            if not item or not item.Parent then
                RemoveItemESP(item)
            elseif data.RootPart then
                -- Mesafeyi g√ºncelle
                local distance = math.floor((data.RootPart.Position - playerRoot.Position).Magnitude)
                data.DistanceLabel.Text = distance .. " studs"
                
                -- Mesafeye g√∂re renk deƒüi≈ütir
                if distance < 20 then
                    data.NameLabel.TextColor3 = Color3.fromRGB(0, 255, 0)
                    data.Highlight.FillColor = Color3.fromRGB(0, 255, 0)
                    data.Light.Color = Color3.fromRGB(0, 255, 0)
                elseif distance < 50 then
                    data.NameLabel.TextColor3 = Color3.fromRGB(255, 255, 0)
                    data.Highlight.FillColor = Color3.fromRGB(255, 255, 0)
                    data.Light.Color = Color3.fromRGB(255, 255, 0)
                else
                    data.NameLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
                    data.Highlight.FillColor = Color3.fromRGB(255, 100, 100)
                    data.Light.Color = Color3.fromRGB(255, 100, 100)
                end
            end
        end
    end)
end

local function EnableItemESP()
    Settings.ItemESPEnabled = true
    
    -- T√ºm e≈üyalarƒ± bul
    for _, obj in pairs(workspace:GetDescendants()) do
        if IsItem(obj) then
            CreateItemESP(obj)
        end
    end
    
    -- Yeni eklenen e≈üyalarƒ± takip et
    Connections.ItemESPAdded = workspace.DescendantAdded:Connect(function(obj)
        if not Settings.ItemESPEnabled then return end
        
        wait(0.1) -- Y√ºklenmesini bekle
        if IsItem(obj) then
            CreateItemESP(obj)
        end
    end)
    
    -- Kaldƒ±rƒ±lan e≈üyalarƒ± temizle
    Connections.ItemESPRemoved = workspace.DescendantRemoving:Connect(function(obj)
        if ItemESPObjects[obj] then
            RemoveItemESP(obj)
        end
    end)
    
    -- G√ºncelleme loop'u
    local frameCount = 0
    Connections.ItemESPUpdate = RunService.Heartbeat:Connect(function()
        if not Settings.ItemESPEnabled then return end
        frameCount = frameCount + 1
        if frameCount < 3 then return end
        frameCount = 0
        UpdateItemESP()
    end)
    
    print("‚úÖ Item ESP Aktif!")
    print("   ‚Ä¢ T√ºm e≈üyalar g√∂r√ºn√ºr")
    print("   ‚Ä¢ Mesafe g√∂sterimi")
    print("   ‚Ä¢ Renk kodlamasƒ± (yakƒ±nlƒ±ƒüa g√∂re)")
end

local function DisableItemESP()
    Settings.ItemESPEnabled = false
    
    -- T√ºm ESP'leri temizle
    for item, _ in pairs(ItemESPObjects) do
        RemoveItemESP(item)
    end
    ItemESPObjects = {}
    
    -- Baƒülantƒ±larƒ± temizle
    if Connections.ItemESPAdded then Connections.ItemESPAdded:Disconnect() end
    if Connections.ItemESPRemoved then Connections.ItemESPRemoved:Disconnect() end
    if Connections.ItemESPUpdate then Connections.ItemESPUpdate:Disconnect() end
    
    print("‚ùå Item ESP Kapalƒ±")
end

-- PLAYER ESP Sƒ∞STEMƒ∞
local function CreatePlayerESP(player)
    if not player or PlayerESPObjects[player] then return end
    if player == Player then return end -- Kendini g√∂sterme
    
    local character = player.Character
    if not character then return end
    
    local humanoid = character:FindFirstChildOfClass("Humanoid")
    local rootPart = character:FindFirstChild("HumanoidRootPart")
    if not humanoid or not rootPart then return end
    
    -- Billboard GUI
    local billboard = Instance.new("BillboardGui")
    billboard.Name = "PlayerESP_" .. player.Name
    billboard.Size = UDim2.new(0, 200, 0, 60)
    billboard.StudsOffset = Vector3.new(0, 3, 0)
    billboard.AlwaysOnTop = true
    billboard.MaxDistance = 300
    billboard.Adornee = rootPart
    billboard.Parent = rootPart
    
    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(1, 0, 1, 0)
    frame.BackgroundTransparency = 1
    frame.Parent = billboard
    
    -- Oyuncu adƒ±
    local nameLabel = Instance.new("TextLabel")
    nameLabel.Size = UDim2.new(1, 0, 0.35, 0)
    nameLabel.BackgroundTransparency = 1
    nameLabel.Text = player.Name
    nameLabel.TextColor3 = Color3.fromRGB(100, 150, 255)
    nameLabel.TextStrokeTransparency = 0.3
    nameLabel.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
    nameLabel.TextSize = 14
    nameLabel.Font = Enum.Font.GothamBold
    nameLabel.Parent = frame
    
    -- Saƒülƒ±k bilgisi
    local healthLabel = Instance.new("TextLabel")
    healthLabel.Size = UDim2.new(1, 0, 0.3, 0)
    healthLabel.Position = UDim2.new(0, 0, 0.35, 0)
    healthLabel.BackgroundTransparency = 1
    healthLabel.Text = "HP: " .. math.floor(humanoid.Health) .. "/" .. math.floor(humanoid.MaxHealth)
    healthLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
    healthLabel.TextStrokeTransparency = 0.3
    healthLabel.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
    healthLabel.TextSize = 11
    healthLabel.Font = Enum.Font.Gotham
    healthLabel.Parent = frame
    
    -- Mesafe ve ek bilgi
    local infoLabel = Instance.new("TextLabel")
    infoLabel.Size = UDim2.new(1, 0, 0.35, 0)
    infoLabel.Position = UDim2.new(0, 0, 0.65, 0)
    infoLabel.BackgroundTransparency = 1
    infoLabel.Text = "Player"
    infoLabel.TextColor3 = Color3.fromRGB(200, 200, 255)
    infoLabel.TextStrokeTransparency = 0.3
    infoLabel.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
    infoLabel.TextSize = 10
    infoLabel.Font = Enum.Font.Gotham
    infoLabel.Parent = frame
    
    -- Highlight efekti
    local highlight = Instance.new("Highlight")
    highlight.Name = "PlayerHighlight"
    highlight.Adornee = character
    highlight.FillColor = Color3.fromRGB(100, 150, 255)
    highlight.FillTransparency = 0.85
    highlight.OutlineColor = Color3.fromRGB(50, 100, 200)
    highlight.OutlineTransparency = 0.2
    highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
    highlight.Parent = character
    
    -- ESP objesini kaydet
    PlayerESPObjects[player] = {
        Billboard = billboard,
        Highlight = highlight,
        NameLabel = nameLabel,
        HealthLabel = healthLabel,
        InfoLabel = infoLabel,
        Character = character,
        Humanoid = humanoid,
        RootPart = rootPart
    }
end

local function RemovePlayerESP(player)
    if not PlayerESPObjects[player] then return end
    
    pcall(function()
        local data = PlayerESPObjects[player]
        if data.Billboard then data.Billboard:Destroy() end
        if data.Highlight then data.Highlight:Destroy() end
        PlayerESPObjects[player] = nil
    end)
end

local function UpdatePlayerESP()
    if not Settings.PlayerESPEnabled then return end
    
    pcall(function()
        Character = GetCharacter()
        local playerRoot = Character and Character:FindFirstChild("HumanoidRootPart")
        if not playerRoot then return end
        
        for player, data in pairs(PlayerESPObjects) do
            if not player or not data.Character or not data.Character.Parent then
                RemovePlayerESP(player)
            elseif data.Humanoid and data.RootPart then
                -- Saƒülƒ±k bilgisini g√ºncelle
                local health = math.floor(data.Humanoid.Health)
                local maxHealth = math.floor(data.Humanoid.MaxHealth)
                data.HealthLabel.Text = "HP: " .. health .. "/" .. maxHealth
                
                -- Saƒülƒ±ƒüa g√∂re renk
                local healthPercent = health / maxHealth
                if healthPercent > 0.6 then
                    data.HealthLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
                elseif healthPercent > 0.3 then
                    data.HealthLabel.TextColor3 = Color3.fromRGB(255, 255, 100)
                else
                    data.HealthLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
                end
                
                -- Mesafeyi g√ºncelle
                local distance = math.floor((data.RootPart.Position - playerRoot.Position).Magnitude)
                data.InfoLabel.Text = distance .. " studs away"
                
                -- Takƒ±m rengi
                local team = player.Team
                if team then
                    data.NameLabel.TextColor3 = team.TeamColor.Color
                    data.Highlight.FillColor = team.TeamColor.Color
                    data.Highlight.OutlineColor = team.TeamColor.Color
                end
            end
        end
    end)
end

local function EnablePlayerESP()
    Settings.PlayerESPEnabled = true
    
    -- T√ºm oyuncular i√ßin ESP olu≈ütur
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= Player then
            if player.Character then
                CreatePlayerESP(player)
            else
                -- Karakter y√ºklenmesini bekle
                player.CharacterAdded:Wait()
                wait(0.5)
                CreatePlayerESP(player)
            end
        end
    end
    
    -- Yeni oyuncularƒ± takip et
    Connections.PlayerESPAdded = Players.PlayerAdded:Connect(function(player)
        if not Settings.PlayerESPEnabled then return end
        player.CharacterAdded:Wait()
        wait(0.5)
        CreatePlayerESP(player)
    end)
    
    -- Ayrƒ±lan oyuncularƒ± temizle
    Connections.PlayerESPRemoved = Players.PlayerRemoving:Connect(function(player)
        RemovePlayerESP(player)
    end)
    
    -- Karakter deƒüi≈üimlerini takip et
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= Player then
            Connections["PlayerESPChar_" .. player.Name] = player.CharacterAdded:Connect(function(char)
                if not Settings.PlayerESPEnabled then return end
                wait(0.5)
                if PlayerESPObjects[player] then
                    RemovePlayerESP(player)
                end
                CreatePlayerESP(player)
            end)
        end
    end
    
    -- G√ºncelleme loop'u
    local frameCount = 0
    Connections.PlayerESPUpdate = RunService.Heartbeat:Connect(function()
        if not Settings.PlayerESPEnabled then return end
        frameCount = frameCount + 1
        if frameCount < 3 then return end
        frameCount = 0
        UpdatePlayerESP()
    end)
    
    print("‚úÖ Player ESP Aktif!")
    print("   ‚Ä¢ T√ºm oyuncular g√∂r√ºn√ºr")
    print("   ‚Ä¢ Saƒülƒ±k ve mesafe bilgisi")
    print("   ‚Ä¢ Takƒ±m renkleri")
end

local function DisablePlayerESP()
    Settings.PlayerESPEnabled = false
    
    -- T√ºm ESP'leri temizle
    for player, _ in pairs(PlayerESPObjects) do
        RemovePlayerESP(player)
    end
    PlayerESPObjects = {}
    
    -- Baƒülantƒ±larƒ± temizle
    if Connections.PlayerESPAdded then Connections.PlayerESPAdded:Disconnect() end
    if Connections.PlayerESPRemoved then Connections.PlayerESPRemoved:Disconnect() end
    if Connections.PlayerESPUpdate then Connections.PlayerESPUpdate:Disconnect() end
    
    -- Oyuncu baƒülantƒ±larƒ±nƒ± temizle
    for name, conn in pairs(Connections) do
        if name:find("PlayerESPChar_") then
            conn:Disconnect()
        end
    end
    
    print("‚ùå Player ESP Kapalƒ±")
end

-- T√úM ESP'LERƒ∞ TEK TU≈ûLA A√á/KAPA
local function ToggleAllESP()
    if Settings.ESPEnabled or Settings.ItemESPEnabled or Settings.PlayerESPEnabled then
        DisableESP()        -- NPC ESP
        DisableItemESP()    -- Item ESP
        DisablePlayerESP()  -- Player ESP
    else
        EnableESP()         -- NPC ESP
        EnableItemESP()     -- Item ESP
        EnablePlayerESP()   -- Player ESP
    end
end

-- KARAKTER DEƒûƒ∞≈ûƒ∞KLƒ∞ƒûƒ∞ ƒ∞√áƒ∞N OTOMATƒ∞K AYARLAMA
Player.CharacterAdded:Connect(function(char)
    Character = char
    HumanoidRootPart = char:WaitForChild("HumanoidRootPart", 10)
    
    -- God Mode aktifse yeniden baƒüla
    if Settings.GodModeEnabled then
        wait(0.5)
        DisableGodMode()    -- √ñnce temizle
        EnableGodMode()     -- Sonra yeniden ba≈ülat
    end
    
    -- ESP'ler aktifse yeniden ba≈ülat
    if Settings.ItemESPEnabled then
        wait(0.5)
        DisableItemESP()    -- √ñnce temizle
        EnableItemESP()     -- Sonra yeniden ba≈ülat
    end
    
    if Settings.PlayerESPEnabled then
        wait(0.5)
        DisablePlayerESP()  -- √ñnce temizle
        EnablePlayerESP()   -- Sonra yeniden ba≈ülat
    end
end)

-- OYUN BA≈ûLANGICI Bƒ∞LGƒ∞ MESAJI
spawn(function()
    wait(1)
    print("=== PART 3 Y√úKLENDƒ∞ ===")
    print("üì¶ Yeni √ñzellikler:")
    print("")
    print("   ‚úÖ GOD MODE Sƒ∞STEMƒ∞")
    print("     ‚Ä¢ ƒ∞nsan kƒ±smƒ± yer altƒ±nda gizli")
    print("     ‚Ä¢ Hasar alma engellendi")
    print("     ‚Ä¢ Sonsuz can")
    print("     ‚Ä¢ Altƒ±n efekti")
    print("")
    print("   ‚úÖ ITEM ESP Sƒ∞STEMƒ∞")
    print("     ‚Ä¢ T√ºm e≈üyalar g√∂r√ºn√ºr")
    print("     ‚Ä¢ Mesafe g√∂sterimi")
    print("     ‚Ä¢ Renk kodlamasƒ± (yakƒ±nlƒ±ƒüa g√∂re)")
    print("     ‚Ä¢ I≈üƒ±klandƒ±rma efekti")
    print("")
    print("   ‚úÖ PLAYER ESP Sƒ∞STEMƒ∞")
    print("     ‚Ä¢ T√ºm oyuncular g√∂r√ºn√ºr")
    print("     ‚Ä¢ Saƒülƒ±k ve mesafe bilgisi")
    print("     ‚Ä¢ Takƒ±m renkleri")
    print("     ‚Ä¢ Canlƒ± g√ºncelleme")
    print("")
    print("   ‚öôÔ∏è Kontroller:")
    print("     ‚Ä¢ Tek tu≈üla t√ºm ESP'ler")
    print("     ‚Ä¢ Karakter deƒüi≈üiminde otomatik yenileme")
    print("==========================")
end)-- Universal Tool v5.0 - Part 4/7
-- BLACK HOLE GELƒ∞≈ûTƒ∞RMESƒ∞ + BRING Sƒ∞STEMLERƒ∞

-- GELƒ∞≈ûTƒ∞Rƒ∞LMƒ∞≈û BLACK HOLE Sƒ∞STEMƒ∞ (TPUNCHORD MANTIƒûI)
local BlackHolePart = nil
local BlackHoleEffect = nil
local BlackHoleSound = nil
local BlackHoleBeam = nil

local function CreateAdvancedBlackHole()
    -- Black Hole part'ƒ± olu≈ütur
    local blackHole = Instance.new("Part")
    blackHole.Name = "AdvancedBlackHole"
    blackHole.Size = Vector3.new(6, 6, 6)
    blackHole.Shape = Enum.PartType.Ball
    blackHole.Material = Enum.Material.Neon
    blackHole.BrickColor = BrickColor.new("Really black")
    blackHole.Transparency = 0.3
    blackHole.CanCollide = false
    blackHole.Anchored = true
    blackHole.Locked = true
    blackHole.Parent = workspace
    
    -- ParticleEmitter (kara delik efekti)
    local particles = Instance.new("ParticleEmitter")
    particles.Name = "BlackHoleParticles"
    particles.Texture = "rbxassetid://242932562"
    particles.Lifetime = NumberRange.new(1, 2)
    particles.Rate = 100
    particles.Rotation = NumberRange.new(0, 360)
    particles.RotSpeed = NumberRange.new(-100, 100)
    particles.Speed = NumberRange.new(5, 15)
    particles.VelocitySpread = 360
    particles.Size = NumberSequence.new({
        NumberSequenceKeypoint.new(0, 0.5),
        NumberSequenceKeypoint.new(0.5, 1),
        NumberSequenceKeypoint.new(1, 0)
    })
    particles.Transparency = NumberSequence.new({
        NumberSequenceKeypoint.new(0, 0),
        NumberSequenceKeypoint.new(0.5, 0.3),
        NumberSequenceKeypoint.new(1, 1)
    })
    particles.Color = ColorSequence.new(Color3.fromRGB(0, 0, 0), Color3.fromRGB(50, 0, 100))
    particles.Acceleration = Vector3.new(0, -10, 0)
    particles.EmissionDirection = Enum.NormalId.Front
    particles.Parent = blackHole
    
    -- I≈üƒ±k efekti
    local pointLight = Instance.new("PointLight")
    pointLight.Name = "BlackHoleLight"
    pointLight.Brightness = 10
    pointLight.Range = 50
    pointLight.Color = Color3.fromRGB(100, 0, 200)
    pointLight.Shadows = true
    pointLight.Parent = blackHole
    
    -- Ses efekti
    local sound = Instance.new("Sound")
    sound.Name = "BlackHoleSound"
    sound.SoundId = "rbxassetid://9119048339" -- Kara delik sesi
    sound.Volume = 0.7
    sound.Looped = true
    sound.Parent = blackHole
    sound:Play()
    
    -- Manyetik alan efekti (Beam)
    local attachment1 = Instance.new("Attachment")
    attachment1.Name = "BeamAttachment1"
    attachment1.Parent = blackHole
    
    local beam = Instance.new("Beam")
    beam.Name = "BlackHoleBeam"
    beam.FaceCamera = true
    beam.Color = ColorSequence.new(Color3.fromRGB(100, 0, 200), Color3.fromRGB(200, 0, 100))
    beam.Width0 = 2
    beam.Width1 = 2
    beam.Texture = "rbxassetid://446111271"
    beam.TextureSpeed = 2
    beam.Attachment0 = attachment1
    beam.Parent = blackHole
    
    BlackHolePart = blackHole
    BlackHoleEffect = particles
    BlackHoleSound = sound
    BlackHoleBeam = beam
    
    return blackHole
end

local function EnableAdvancedBlackHole()
    Settings.BlackHoleEnabled = true
    
    Character = GetCharacter()
    if not Character then return end
    
    HumanoidRootPart = Character:FindFirstChild("HumanoidRootPart")
    if not HumanoidRootPart then return end
    
    -- Black Hole olu≈ütur
    if not BlackHolePart then
        CreateAdvancedBlackHole()
    end
    
    -- Black Hole'u karakterin √∂n√ºne yerle≈ütir
    local offset = HumanoidRootPart.CFrame.LookVector * 15
    BlackHolePart.CFrame = CFrame.new(HumanoidRootPart.Position + offset + Vector3.new(0, 2, 0))
    
    -- Black Hole loop'u (TPUNCHORD mantƒ±ƒüƒ±)
    Connections.BlackHoleLoop = RunService.Heartbeat:Connect(function()
        if not Settings.BlackHoleEnabled or not BlackHolePart then return end
        
        pcall(function()
            -- Black Hole'u karakteri takip et
            if HumanoidRootPart then
                local targetPos = HumanoidRootPart.Position + (HumanoidRootPart.CFrame.LookVector * 15) + Vector3.new(0, 2, 0)
                BlackHolePart.CFrame = BlackHolePart.CFrame:Lerp(CFrame.new(targetPos), 0.1)
            end
            
            local blackHolePos = BlackHolePart.Position
            local radius = Settings.PullRadius
            local force = Settings.PullForce * 2 -- Daha g√º√ßl√º √ßekim
            
            -- NPC'leri √ßek
            for _, npc in pairs(workspace:GetChildren()) do
                if npc:IsA("Model") and npc ~= Character then
                    local humanoid = npc:FindFirstChildOfClass("Humanoid")
                    local rootPart = npc:FindFirstChild("HumanoidRootPart") or 
                                    npc:FindFirstChild("Torso") or 
                                    npc:FindFirstChild("UpperTorso")
                    
                    if humanoid and rootPart then
                        local distance = (rootPart.Position - blackHolePos).Magnitude
                        
                        if distance <= radius then
                            -- √áekim g√ºc√º (mesafeye g√∂re)
                            local pullStrength = force * (1 - (distance / radius))
                            local direction = (blackHolePos - rootPart.Position).Unit
                            
                            -- Velocity ile √ßek
                            rootPart.Velocity = rootPart.Velocity + (direction * pullStrength)
                            
                            -- Rotation (kara delik etrafƒ±nda d√∂nme)
                            local angularForce = Vector3.new(
                                math.random(-50, 50),
                                math.random(100, 300),
                                math.random(-50, 50)
                            )
                            
                            rootPart.RotVelocity = rootPart.RotVelocity + angularForce * 0.1
                            
                            -- Yakƒ±nsa ragdoll
                            if distance < 10 and not RagdolledNPCs[npc] then
                                -- Humanoid motorlarƒ±nƒ± kapat
                                for _, child in pairs(npc:GetDescendants()) do
                                    if child:IsA("Motor6D") then
                                        child.Enabled = false
                                    end
                                end
                                
                                humanoid.PlatformStand = true
                                humanoid.AutoRotate = false
                                
                                -- Ragdoll etiketi
                                local ragdollTag = Instance.new("BillboardGui")
                                ragdollTag.Name = "BlackHoleRagdoll"
                                ragdollTag.Size = UDim2.new(0, 120, 0, 40)
                                ragdollTag.StudsOffset = Vector3.new(0, 3, 0)
                                ragdollTag.Adornee = rootPart
                                ragdollTag.AlwaysOnTop = true
                                ragdollTag.Parent = rootPart
                                
                                local tagLabel = Instance.new("TextLabel")
                                tagLabel.Size = UDim2.new(1, 0, 1, 0)
                                tagLabel.BackgroundTransparency = 1
                                tagLabel.Text = "üåÄ BLACK HOLE"
                                tagLabel.TextColor3 = Color3.fromRGB(200, 0, 200)
                                tagLabel.TextSize = 16
                                tagLabel.Font = Enum.Font.GothamBold
                                tagLabel.Parent = ragdollTag
                                
                                RagdolledNPCs[npc] = {
                                    Humanoid = humanoid,
                                    Tag = ragdollTag
                                }
                            end
                        end
                    end
                end
            end
            
            -- E≈ûYALARI √áEK
            for _, obj in pairs(workspace:GetDescendants()) do
                if obj:IsA("BasePart") and not obj.Anchored then
                    local distance = (obj.Position - blackHolePos).Magnitude
                    
                    if distance <= radius and distance > 3 then
                        local pullStrength = force * 0.5 * (1 - (distance / radius))
                        local direction = (blackHolePos - obj.Position).Unit
                        
                        -- Velocity ile √ßek
                        obj.Velocity = obj.Velocity + (direction * pullStrength)
                        
                        -- Rotation
                        obj.RotVelocity = obj.RotVelocity + Vector3.new(
                            math.random(-100, 100),
                            math.random(-100, 100),
                            math.random(-100, 100)
                        ) * 0.05
                        
                        -- Yakƒ±n mesafede Black Hole'a yapƒ±≈ütƒ±r
                        if distance < 5 then
                            obj.CFrame = obj.CFrame:Lerp(BlackHolePart.CFrame, 0.1)
                        end
                    end
                elseif obj:IsA("Tool") then
                    local handle = obj:FindFirstChild("Handle")
                    if handle then
                        local distance = (handle.Position - blackHolePos).Magnitude
                        
                        if distance <= radius then
                            local pullStrength = force * 0.7 * (1 - (distance / radius))
                            local direction = (blackHolePos - handle.Position).Unit
                            
                            handle.Velocity = handle.Velocity + (direction * pullStrength)
                        end
                    end
                end
            end
            
            -- OYUNCULARI √áEK (isteƒüe baƒülƒ±)
            for _, player in pairs(Players:GetPlayers()) do
                if player ~= Player and player.Character then
                    local char = player.Character
                    local rootPart = char:FindFirstChild("HumanoidRootPart")
                    
                    if rootPart then
                        local distance = (rootPart.Position - blackHolePos).Magnitude
                        
                        if distance <= radius / 2 then -- Oyuncular i√ßin daha k√º√ß√ºk radius
                            local pullStrength = force * 0.3 * (1 - (distance / (radius / 2)))
                            local direction = (blackHolePos - rootPart.Position).Unit
                            
                            rootPart.Velocity = rootPart.Velocity + (direction * pullStrength)
                        end
                    end
                end
            end
        end)
    end)
    
    -- Black Hole etkile≈üimi
    Connections.BlackHoleTouched = BlackHolePart.Touched:Connect(function(hit)
        if hit:IsA("BasePart") then
            local model = hit.Parent
            if model and model:IsA("Model") then
                local humanoid = model:FindFirstChildOfClass("Humanoid")
                if humanoid then
                    -- Kara delik i√ßinde yok etme efekti
                    spawn(function()
                        for i = 1, 10 do
                            if hit and hit.Parent then
                                hit.Transparency = i / 10
                                wait(0.05)
                            end
                        end
                        
                        if model and model.Parent then
                            model:Destroy()
                        end
                    end)
                end
            end
        end
    end)
    
    print("üåÄ Geli≈ümi≈ü Black Hole Aktif!")
    print("   ‚Ä¢ TPUNCHORD mantƒ±ƒüƒ± ile √ßalƒ±≈üƒ±yor")
    print("   ‚Ä¢ NPC'leri ve e≈üyalarƒ± √ßekiyor")
    print("   ‚Ä¢ Ragdoll efekti")
    print("   ‚Ä¢ Ses ve partik√ºl efektleri")
end

local function DisableAdvancedBlackHole()
    Settings.BlackHoleEnabled = false
    
    -- Black Hole'u temizle
    if BlackHolePart then
        BlackHolePart:Destroy()
        BlackHolePart = nil
    end
    
    BlackHoleEffect = nil
    BlackHoleSound = nil
    BlackHoleBeam = nil
    
    -- Baƒülantƒ±larƒ± temizle
    if Connections.BlackHoleLoop then Connections.BlackHoleLoop:Disconnect() end
    if Connections.BlackHoleTouched then Connections.BlackHoleTouched:Disconnect() end
    
    -- Ragdoll'larƒ± temizle
    for model, data in pairs(RagdolledNPCs) do
        if data.Humanoid and data.Humanoid.Parent then
            data.Humanoid.PlatformStand = false
            data.Humanoid.AutoRotate = true
            
            -- Motorlarƒ± geri a√ß
            for _, child in pairs(model:GetDescendants()) do
                if child:IsA("Motor6D") then
                    child.Enabled = true
                end
            end
            
            if data.Tag and data.Tag.Parent then
                data.Tag:Destroy()
            end
        end
    end
    
    -- Sadece Black Hole'dan gelen ragdoll'larƒ± temizle
    local newRagdolledNPCs = {}
    for model, data in pairs(RagdolledNPCs) do
        if not data.Tag or not data.Tag.Name == "BlackHoleRagdoll" then
            newRagdolledNPCs[model] = data
        end
    end
    RagdolledNPCs = newRagdolledNPCs
    
    print("‚ùå Black Hole Kapalƒ±")
end

-- BRING Sƒ∞STEMLERƒ∞
local function BringAllNPCs()
    Character = GetCharacter()
    if not Character then return end
    
    HumanoidRootPart = Character:FindFirstChild("HumanoidRootPart")
    if not HumanoidRootPart then return end
    
    local charPos = HumanoidRootPart.Position
    local frontDir = HumanoidRootPart.CFrame.LookVector
    
    print("üìç T√ºm NPC'ler getiriliyor...")
    
    local count = 0
    for _, npc in pairs(workspace:GetChildren()) do
        if npc:IsA("Model") and npc ~= Character then
            local humanoid = npc:FindFirstChildOfClass("Humanoid")
            local rootPart = npc:FindFirstChild("HumanoidRootPart")
            
            if humanoid and rootPart then
                local row = math.floor(count / 3)
                local col = count % 3
                
                -- NPC'leri yarƒ±m daire ≈üeklinde getir
                local angle = col * 30 - 30 -- -30, 0, 30 derece
                local radians = math.rad(angle)
                local distance = 8 + (row * 4)
                
                local offset = Vector3.new(
                    math.sin(radians) * distance,
                    2, -- Y√ºkseklik
                    math.cos(radians) * distance
                )
                
                local targetPos = charPos + (frontDir * offset.Z) + 
                                 (HumanoidRootPart.CFrame.RightVector * offset.X) + 
                                 Vector3.new(0, offset.Y, 0)
                
                -- Anƒ±nda teleport
                rootPart.CFrame = CFrame.new(targetPos)
                rootPart.Velocity = Vector3.new(0, 0, 0)
                
                count = count + 1
                
                -- Performans i√ßin bekle
                if count % 5 == 0 then
                    wait()
                end
            end
        end
    end
    
    print("‚úÖ " .. count .. " NPC getirildi!")
end

local function BringAllItems()
    Character = GetCharacter()
    if not Character then return end
    
    HumanoidRootPart = Character:FindFirstChild("HumanoidRootPart")
    if not HumanoidRootPart then return end
    
    local charPos = HumanoidRootPart.Position
    
    print("üõ†Ô∏è T√ºm e≈üyalar getiriliyor...")
    
    local count = 0
    for _, obj in pairs(workspace:GetDescendants()) do
        if IsItem(obj) then
            if obj:IsA("Tool") then
                local handle = obj:FindFirstChild("Handle")
                if handle then
                    local targetPos = charPos + Vector3.new(
                        math.random(-5, 5),
                        math.random(3, 8),
                        math.random(-5, 5)
                    )
                    
                    handle.CFrame = CFrame.new(targetPos)
                    count = count + 1
                end
            elseif obj:IsA("BasePart") and not obj.Anchored then
                local targetPos = charPos + Vector3.new(
                    math.random(-5, 5),
                    math.random(3, 8),
                    math.random(-5, 5)
                )
                
                obj.CFrame = CFrame.new(targetPos)
                count = count + 1
            end
            
            -- Performans i√ßin
            if count % 10 == 0 then
                wait()
            end
        end
    end
    
    print("‚úÖ " .. count .. " e≈üya getirildi!")
end

local function BringAllPlayers()
    Character = GetCharacter()
    if not Character then return end
    
    HumanoidRootPart = Character:FindFirstChild("HumanoidRootPart")
    if not HumanoidRootPart then return end
    
    local charPos = HumanoidRootPart.Position
    local frontDir = HumanoidRootPart.CFrame.LookVector
    
    print("üë• T√ºm oyuncular getiriliyor...")
    
    local count = 0
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= Player and player.Character then
            local char = player.Character
            local rootPart = char:FindFirstChild("HumanoidRootPart")
            
            if rootPart then
                local row = math.floor(count / 2)
                local col = count % 2
                
                local offset = Vector3.new(
                    (col - 0.5) * 6, -- Sol/Saƒü
                    0,
                    5 + (row * 4)    -- √ñn
                )
                
                local targetPos = charPos + (frontDir * offset.Z) + 
                                 (HumanoidRootPart.CFrame.RightVector * offset.X)
                
                rootPart.CFrame = CFrame.new(targetPos)
                rootPart.Velocity = Vector3.new(0, 0, 0)
                
                count = count + 1
                
                -- Bilgilendirme
                local billboard = Instance.new("BillboardGui")
                billboard.Name = "BringPlayerInfo"
                billboard.Size = UDim2.new(0, 200, 0, 40)
                billboard.StudsOffset = Vector3.new(0, 3, 0)
                billboard.AlwaysOnTop = true
                billboard.Adornee = rootPart
                billboard.Parent = rootPart
                
                local label = Instance.new("TextLabel")
                label.Size = UDim2.new(1, 0, 1, 0)
                label.BackgroundTransparency = 1
                label.Text = "üìç Brought by " .. Player.Name
                label.TextColor3 = Color3.fromRGB(100, 200, 255)
                label.TextSize = 12
                label.Font = Enum.Font.Gotham
                label.Parent = billboard
                
                -- 5 saniye sonra kaldƒ±r
                delay(5, function()
                    if billboard and billboard.Parent then
                        billboard:Destroy()
                    end
                end)
                
                wait(0.1) -- Performans i√ßin
            end
        end
    end
    
    print("‚úÖ " .. count .. " oyuncu getirildi!")
end

local function BringAllCars()
    Character = GetCharacter()
    if not Character then return end
    
    HumanoidRootPart = Character:FindFirstChild("HumanoidRootPart")
    if not HumanoidRootPart then return end
    
    local charPos = HumanoidRootPart.Position
    local frontDir = HumanoidRootPart.CFrame.LookVector
    
    print("üöó T√ºm arabalar getiriliyor...")
    
    local count = 0
    for _, obj in pairs(workspace:GetChildren()) do
        if obj:IsA("Model") then
            -- Araba kontrol√º
            local isCar = false
            local carName = obj.Name:lower()
            local carKeywords = {"car", "vehicle", "truck", "jeep", "bus", "van", "motor", "bike", "cycle", "atv", "buggy"}
            
            for _, keyword in pairs(carKeywords) do
                if carName:find(keyword) then
                    isCar = true
                    break
                end
            end
            
            -- Wheel kontrol√º
            if not isCar then
                local wheelCount = 0
                for _, part in pairs(obj:GetDescendants()) do
                    if part.Name:lower():find("wheel") or part.Name:lower():find("tire") then
                        wheelCount = wheelCount + 1
                    end
                end
                if wheelCount >= 2 then
                    isCar = true
                end
            end
            
            if isCar then
                local primaryPart = obj.PrimaryPart or obj:FindFirstChildWhichIsA("BasePart")
                
                if primaryPart then
                    local row = math.floor(count / 2)
                    local col = count % 2
                    
                    local offset = Vector3.new(
                        (col - 0.5) * 10, -- Daha geni≈ü aralƒ±k
                        0,
                        8 + (row * 8)     -- Daha fazla mesafe
                    )
                    
                    local targetPos = charPos + (frontDir * offset.Z) + 
                                     (HumanoidRootPart.CFrame.RightVector * offset.X)
                    
                    -- Arabanƒ±n t√ºm par√ßalarƒ±nƒ± ta≈üƒ±
                    for _, part in pairs(obj:GetDescendants()) do
                        if part:IsA("BasePart") then
                            local relativePos = part.Position - primaryPart.Position
                            part.CFrame = CFrame.new(targetPos + relativePos)
                            part.Velocity = Vector3.new(0, 0, 0)
                        end
                    end
                    
                    count = count + 1
                    
                    -- Araba etiketi
                    local billboard = Instance.new("BillboardGui")
                    billboard.Name = "CarLabel"
                    billboard.Size = UDim2.new(0, 150, 0, 40)
                    billboard.StudsOffset = Vector3.new(0, 5, 0)
                    billboard.AlwaysOnTop = true
                    billboard.Adornee = primaryPart
                    billboard.Parent = primaryPart
                    
                    local label = Instance.new("TextLabel")
                    label.Size = UDim2.new(1, 0, 1, 0)
                    label.BackgroundTransparency = 1
                    label.Text = "üöó " .. obj.Name
                    label.TextColor3 = Color3.fromRGB(255, 200, 50)
                    label.TextSize = 14
                    label.Font = Enum.Font.GothamBold
                    label.Parent = billboard
                    
                    -- 10 saniye sonra kaldƒ±r
                    delay(10, function()
                        if billboard and billboard.Parent then
                            billboard:Destroy()
                        end
                    end)
                    
                    wait(0.2) -- Performans i√ßin
                end
            end
        end
    end
    
    print("‚úÖ " .. count .. " araba getirildi!")
end

local function BringAllTools()
    Character = GetCharacter()
    if not Character then return end
    
    HumanoidRootPart = Character:FindFirstChild("HumanoidRootPart")
    if not HumanoidRootPart then return end
    
    local charPos = HumanoidRootPart.Position
    
    print("üîß T√ºm ara√ßlar getiriliyor...")
    
    local count = 0
    local tools = {}
    
    -- √ñnce t√ºm tool'larƒ± topla
    for _, obj in pairs(workspace:GetDescendants()) do
        if obj:IsA("Tool") then
            table.insert(tools, obj)
        end
    end
    
    -- Tool'larƒ± getir
    for i, tool in ipairs(tools) do
        local handle = tool:FindFirstChild("Handle")
        if handle then
            local angle = (i / #tools) * math.pi * 2
            local radius = 8
            local height = 3
            
            local offset = Vector3.new(
                math.sin(angle) * radius,
                height + (i % 3) * 2, -- Katmanlƒ± yerle≈üim
                math.cos(angle) * radius
            )
            
            local targetPos = charPos + offset
            handle.CFrame = CFrame.new(targetPos)
            
            -- Tool etiketi
            local billboard = Instance.new("BillboardGui")
            billboard.Name = "ToolLabel"
            billboard.Size = UDim2.new(0, 120, 0, 30)
            billboard.StudsOffset = Vector3.new(0, 2, 0)
            billboard.AlwaysOnTop = true
            billboard.Adornee = handle
            billboard.Parent = handle
            
            local label = Instance.new("TextLabel")
            label.Size = UDim2.new(1, 0, 1, 0)
            label.BackgroundTransparency = 1
            label.Text = "üõ†Ô∏è " .. tool.Name
            label.TextColor3 = Color3.fromRGB(100, 255, 100)
            label.TextSize = 11
            label.Font = Enum.Font.Gotham
            label.Parent = billboard
            
            count = count + 1
            
            -- Her 5 tool'da bir bekle
            if count % 5 == 0 then
                wait()
            end
        end
    end
    
    print("‚úÖ " .. count .. " ara√ß getirildi!")
end

-- BRING SELECTION MENU
local function CreateBringMenu()
    local bringMenu = Instance.new("ScreenGui")
    bringMenu.Name = "BringSelectionMenu"
    bringMenu.ResetOnSpawn = false
    bringMenu.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    bringMenu.Parent = game:GetService("CoreGui")
    
    local mainFrame = Instance.new("Frame")
    mainFrame.Name = "MainFrame"
    mainFrame.Size = UDim2.new(0, 300, 0, 400)
    mainFrame.Position = UDim2.new(0.5, -150, 0.5, -200)
    mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 45)
    mainFrame.BorderSizePixel = 0
    mainFrame.Active = true
    mainFrame.Draggable = true
    mainFrame.Parent = bringMenu
    
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 12)
    corner.Parent = mainFrame
    
    local stroke = Instance.new("UIStroke")
    stroke.Color = Color3.fromRGB(100, 50, 150)
    stroke.Thickness = 2
    stroke.Parent = mainFrame
    
    -- Ba≈ülƒ±k
    local title = Instance.new("TextLabel")
    title.Size = UDim2.new(1, 0, 0, 50)
    title.BackgroundColor3 = Color3.fromRGB(50, 30, 70)
    title.BorderSizePixel = 0
    title.Text = "üîß BRING MENU"
    title.TextColor3 = Color3.fromRGB(255, 255, 255)
    title.TextSize = 20
    title.Font = Enum.Font.GothamBold
    title.Parent = mainFrame
    
    local titleCorner = Instance.new("UICorner")
    titleCorner.CornerRadius = UDim.new(0, 12)
    titleCorner.Parent = title
    
    -- Kapatma butonu
    local closeBtn = Instance.new("TextButton")
    closeBtn.Size = UDim2.new(0, 40, 0, 40)
    closeBtn.Position = UDim2.new(1, -45, 0, 5)
    closeBtn.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
    closeBtn.Text = "X"
    closeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    closeBtn.TextSize = 18
    closeBtn.Font = Enum.Font.GothamBold
    closeBtn.Parent = title
    
    local btnCorner = Instance.new("UICorner")
    btnCorner.CornerRadius = UDim.new(0, 8)
    btnCorner.Parent = closeBtn
    
    closeBtn.MouseButton1Click:Connect(function()
        bringMenu:Destroy()
    end)
    
    -- Buton listesi
    local buttonList = Instance.new("ScrollingFrame")
    buttonList.Name = "ButtonList"
    buttonList.Size = UDim2.new(1, -20, 1, -70)
    buttonList.Position = UDim2.new(0, 10, 0, 60)
    buttonList.BackgroundTransparency = 1
    buttonList.ScrollBarThickness = 4
    buttonList.ScrollBarImageColor3 = Color3.fromRGB(100, 80, 150)
    buttonList.CanvasSize = UDim2.new(0, 0, 0, 500)
    buttonList.Parent = mainFrame
    
    local buttonLayout = Instance.new("UIListLayout")
    buttonLayout.Padding = UDim.new(0, 10)
    buttonLayout.SortOrder = Enum.SortOrder.LayoutOrder
    buttonLayout.Parent = buttonList
    
    -- Bring butonlarƒ±
    local bringButtons = {
        {Name = "üë• Bring All Players", Color = Color3.fromRGB(50, 150, 255), Func = BringAllPlayers},
        {Name = "üíÄ Bring All NPCs", Color = Color3.fromRGB(255, 100, 100), Func = BringAllNPCs},
        {Name = "üöó Bring All Cars", Color = Color3.fromRGB(255, 200, 50), Func = BringAllCars},
        {Name = "üõ†Ô∏è Bring All Tools", Color = Color3.fromRGB(100, 255, 100), Func = BringAllTools},
        {Name = "üì¶ Bring All Items", Color = Color3.fromRGB(200, 100, 255), Func = BringAllItems},
        {Name = "üåÄ Bring to Black Hole", Color = Color3.fromRGB(150, 50, 200), Func = function()
            if not Settings.BlackHoleEnabled then
                EnableAdvancedBlackHole()
            end
        end}
    }
    
    for i, btnData in ipairs(bringButtons) do
        local button = Instance.new("TextButton")
        button.Size = UDim2.new(1, 0, 0, 50)
        button.BackgroundColor3 = btnData.Color
        button.Text = btnData.Name
        button.TextColor3 = Color3.fromRGB(255, 255, 255)
        button.TextSize = 16
        button.Font = Enum.Font.GothamSemibold
        button.LayoutOrder = i
        button.Parent = buttonList
        
        local btnCorner = Instance.new("UICorner")
        btnCorner.CornerRadius = UDim.new(0, 8)
        btnCorner.Parent = button
        
        button.MouseButton1Click:Connect(function()
            btnData.Func()
            wait(0.5)
            bringMenu:Destroy() -- Men√ºy√º kapat
        end)
    end
    
    -- Canvas boyutunu g√ºncelle
    buttonLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
        buttonList.CanvasSize = UDim2.new(0, 0, 0, buttonLayout.AbsoluteContentSize.Y)
    end)
    
    return bringMenu
end

-- BRING MENU A√áMA FONKSƒ∞YONU
local function OpenBringMenu()
    -- Eski men√ºy√º temizle
    local oldMenu = game:GetService("CoreGui"):FindFirstChild("BringSelectionMenu")
    if oldMenu then oldMenu:Destroy() end
    
    -- Yeni men√º olu≈ütur
    CreateBringMenu()
end

-- KARAKTER DEƒûƒ∞≈ûƒ∞KLƒ∞ƒûƒ∞ ƒ∞√áƒ∞N OTOMATƒ∞K AYARLAMA
Player.CharacterAdded:Connect(function(char)
    Character = char
    HumanoidRootPart = char:WaitForChild("HumanoidRootPart", 10)
    
    -- Black Hole aktifse yeniden baƒüla
    if Settings.BlackHoleEnabled then
        wait(0.5)
        DisableAdvancedBlackHole() -- √ñnce temizle
        EnableAdvancedBlackHole()  -- Sonra yeniden ba≈ülat
    end
end)

-- OYUN BA≈ûLANGICI Bƒ∞LGƒ∞ MESAJI
spawn(function()
    wait(1)
    print("=== PART 4 Y√úKLENDƒ∞ ===")
    print("üì¶ Yeni √ñzellikler:")
    print("")
    print("   ‚úÖ GELƒ∞≈ûMƒ∞≈û BLACK HOLE")
    print("     ‚Ä¢ TPUNCHORD mantƒ±ƒüƒ± ile %100 √ßalƒ±≈üƒ±yor")
    print("     ‚Ä¢ NPC'leri, e≈üyalarƒ± ve oyuncularƒ± √ßekiyor")
    print("     ‚Ä¢ Ragdoll efekti")
    print("     ‚Ä¢ Partik√ºl ve ses efektleri")
    print("     ‚Ä¢ Manyetik alan (Beam) efekti")
    print("")
    print("   ‚úÖ BRING Sƒ∞STEMLERƒ∞")
    print("     ‚Ä¢ üë• Bring All Players - T√ºm oyuncularƒ± getir")
    print("     ‚Ä¢ üíÄ Bring All NPCs - T√ºm NPC'leri getir")
    print("     ‚Ä¢ üöó Bring All Cars - T√ºm arabalarƒ± getir")
    print("     ‚Ä¢ üõ†Ô∏è Bring All Tools - T√ºm ara√ßlarƒ± getir")
    print("     ‚Ä¢ üì¶ Bring All Items - T√ºm e≈üyalarƒ± getir")
    print("     ‚Ä¢ üåÄ Bring to Black Hole - Kara deliƒüe getir")
    print("")
    print("   ‚úÖ BRING SELECTION MENU")
    print("     ‚Ä¢ Grafiksel aray√ºz")
    print("     ‚Ä¢ S√ºr√ºklenebilir pencere")
    print("     ‚Ä¢ T√ºm bring se√ßenekleri")
    print("")
    print("   ‚öôÔ∏è Kontroller:")
    print("     ‚Ä¢ Karakter deƒüi≈üiminde otomatik yenileme")
    print("==========================")
end)-- Universal Tool v5.0 - Part 5/7
-- FULLBRIGHT + NO CLIP GELƒ∞≈ûTƒ∞RMESƒ∞ + GUI D√úZELTMELERƒ∞

-- FULLBRIGHT Sƒ∞STEMƒ∞
local OriginalLightingSettings = {}
local FullBrightEnabled = false

local function EnableFullBright()
    if FullBrightEnabled then return end
    
    FullBrightEnabled = true
    
    -- Orijinal ayarlarƒ± kaydet
    local lighting = game:GetService("Lighting")
    OriginalLightingSettings = {
        Ambient = lighting.Ambient,
        Brightness = lighting.Brightness,
        GlobalShadows = lighting.GlobalShadows,
        OutdoorAmbient = lighting.OutdoorAmbient,
        ClockTime = lighting.ClockTime,
        FogColor = lighting.FogColor,
        FogEnd = lighting.FogEnd,
        FogStart = lighting.FogStart,
        GeographicLatitude = lighting.GeographicLatitude,
        TimeOfDay = lighting.TimeOfDay
    }
    
    -- Fullbright ayarlarƒ±nƒ± uygula
    lighting.Ambient = Color3.fromRGB(255, 255, 255)
    lighting.Brightness = 2
    lighting.GlobalShadows = false
    lighting.OutdoorAmbient = Color3.fromRGB(255, 255, 255)
    lighting.ClockTime = 14 -- √ñƒülen vakti
    lighting.FogColor = Color3.fromRGB(255, 255, 255)
    lighting.FogEnd = 1000000
    lighting.FogStart = 0
    lighting.GeographicLatitude = 0
    lighting.TimeOfDay = "14:00:00"
    
    -- Sky'ƒ± kaldƒ±r
    local sky = lighting:FindFirstChildOfClass("Sky")
    if sky then
        sky:Destroy()
    end
    
    -- Atmosphere'√º kaldƒ±r
    local atmosphere = lighting:FindFirstChildOfClass("Atmosphere")
    if atmosphere then
        atmosphere:Destroy()
    end
    
    -- T√ºm ƒ±≈üƒ±klarƒ± maksimum yap
    for _, light in pairs(lighting:GetChildren()) do
        if light:IsA("PointLight") or light:IsA("SpotLight") or light:IsA("SurfaceLight") then
            light.Brightness = 10
            light.Range = 1000
            light.Enabled = true
        end
    end
    
    -- Yeni eklenen ƒ±≈üƒ±klarƒ± da ayarla
    Connections.FullBrightAdded = lighting.ChildAdded:Connect(function(child)
        wait(0.1)
        if child:IsA("PointLight") or child:IsA("SpotLight") or child:IsA("SurfaceLight") then
            child.Brightness = 10
            child.Range = 1000
            child.Enabled = true
        elseif child:IsA("Sky") or child:IsA("Atmosphere") then
            child:Destroy()
        end
    end)
    
    -- Ekran parlaklƒ±ƒüƒ± efekti
    local bloom = Instance.new("BloomEffect")
    bloom.Name = "FullBrightBloom"
    bloom.Intensity = 0.5
    bloom.Size = 24
    bloom.Threshold = 0.9
    bloom.Parent = lighting
    
    local colorCorrection = Instance.new("ColorCorrectionEffect")
    colorCorrection.Name = "FullBrightColorCorrection"
    colorCorrection.Brightness = 0.2
    colorCorrection.Contrast = 0.2
    colorCorrection.Saturation = 0.1
    colorCorrection.Parent = lighting
    
    -- Fullbright g√∂stergesi
    local indicator = Instance.new("BillboardGui")
    indicator.Name = "FullBrightIndicator"
    indicator.Size = UDim2.new(0, 120, 0, 40)
    indicator.StudsOffset = Vector3.new(0, 3.5, 0)
    indicator.AlwaysOnTop = true
    
    Character = GetCharacter()
    if Character then
        local rootPart = Character:FindFirstChild("HumanoidRootPart")
        if rootPart then
            indicator.Adornee = rootPart
            indicator.Parent = rootPart
        end
    end
    
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, 0, 1, 0)
    label.BackgroundTransparency = 1
    label.Text = "‚òÄÔ∏è FULLBRIGHT"
    label.TextColor3 = Color3.fromRGB(255, 255, 100)
    label.TextSize = 16
    label.Font = Enum.Font.GothamBold
    label.Parent = indicator
    
    print("‚òÄÔ∏è Fullbright Aktif! - T√ºm harita aydƒ±nlandƒ±")
end

local function DisableFullBright()
    if not FullBrightEnabled then return end
    
    FullBrightEnabled = false
    
    -- Orijinal ayarlarƒ± geri y√ºkle
    local lighting = game:GetService("Lighting")
    
    for setting, value in pairs(OriginalLightingSettings) do
        pcall(function()
            lighting[setting] = value
        end)
    end
    
    -- Efektleri temizle
    local bloom = lighting:FindFirstChild("FullBrightBloom")
    if bloom then bloom:Destroy() end
    
    local colorCorrection = lighting:FindFirstChild("FullBrightColorCorrection")
    if colorCorrection then colorCorrection:Destroy() end
    
    -- Baƒülantƒ±yƒ± temizle
    if Connections.FullBrightAdded then
        Connections.FullBrightAdded:Disconnect()
    end
    
    -- G√∂stergeleri temizle
    pcall(function()
        Character = GetCharacter()
        if Character then
            local rootPart = Character:FindFirstChild("HumanoidRootPart")
            if rootPart then
                local indicator = rootPart:FindFirstChild("FullBrightIndicator")
                if indicator then indicator:Destroy() end
            end
        end
    end)
    
    print("‚ùå Fullbright Kapalƒ±")
end

-- GELƒ∞≈ûTƒ∞Rƒ∞LMƒ∞≈û NO CLIP Sƒ∞STEMƒ∞
local function EnableEnhancedNoClip()
    Settings.NoClipEnabled = true
    
    Character = GetCharacter()
    if not Character then return end
    
    local humanoid = Character:FindFirstChildOfClass("Humanoid")
    if humanoid then
        humanoid:ChangeState(Enum.HumanoidStateType.Physics)
    end
    
    -- T√ºm par√ßalarƒ± bul ve collision'larƒ± kapat
    NoClipParts = {}
    
    local function DisableCollision(part)
        if part:IsA("BasePart") and part.CanCollide then
            table.insert(NoClipParts, {
                Part = part,
                OriginalCanCollide = part.CanCollide,
                OriginalTransparency = part.Transparency
            })
            part.CanCollide = false
            
            -- G√∂rsel efekt (yarƒ± saydam)
            part.Transparency = 0.3
            
            -- NoClip ƒ±≈üƒ±ƒüƒ±
            if not part:FindFirstChild("EnhancedNoClipLight") then
                local light = Instance.new("PointLight")
                light.Name = "EnhancedNoClipLight"
                light.Brightness = 0.5
                light.Range = 6
                light.Color = Color3.fromRGB(100, 200, 255)
                light.Parent = part
            end
        end
    end
    
    -- Mevcut par√ßalar
    for _, part in pairs(Character:GetDescendants()) do
        DisableCollision(part)
    end
    
    -- Yeni eklenen par√ßalar
    Connections.EnhancedNoClipAdded = Character.DescendantAdded:Connect(function(part)
        wait(0.1)
        DisableCollision(part)
    end)
    
    -- NoClip hareket kontrol√º
    local noClipSpeed = 50
    local noClipKeys = {
        Forward = false,
        Backward = false,
        Left = false,
        Right = false,
        Up = false,
        Down = false
    }
    
    -- Klavye kontrolleri
    Connections.NoClipKeyDown = UserInputService.InputBegan:Connect(function(input, gameProcessed)
        if gameProcessed then return end
        
        if input.KeyCode == Enum.KeyCode.W then noClipKeys.Forward = true end
        if input.KeyCode == Enum.KeyCode.S then noClipKeys.Backward = true end
        if input.KeyCode == Enum.KeyCode.A then noClipKeys.Left = true end
        if input.KeyCode == Enum.KeyCode.D then noClipKeys.Right = true end
        if input.KeyCode == Enum.KeyCode.Space then noClipKeys.Up = true end
        if input.KeyCode == Enum.KeyCode.LeftShift then noClipKeys.Down = true end
        
        -- Hƒ±z kontrol√º
        if input.KeyCode == Enum.KeyCode.E then
            noClipSpeed = math.min(noClipSpeed + 20, 200)
        end
        if input.KeyCode == Enum.KeyCode.Q then
            noClipSpeed = math.max(noClipSpeed - 20, 10)
        end
    end)
    
    Connections.NoClipKeyUp = UserInputService.InputEnded:Connect(function(input)
        if input.KeyCode == Enum.KeyCode.W then noClipKeys.Forward = false end
        if input.KeyCode == Enum.KeyCode.S then noClipKeys.Backward = false end
        if input.KeyCode == Enum.KeyCode.A then noClipKeys.Left = false end
        if input.KeyCode == Enum.KeyCode.D then noClipKeys.Right = false end
        if input.KeyCode == Enum.KeyCode.Space then noClipKeys.Up = false end
        if input.KeyCode == Enum.KeyCode.LeftShift then noClipKeys.Down = false end
    end)
    
    -- NoClip hareket loop'u
    Connections.NoClipLoop = RunService.Heartbeat:Connect(function()
        if not Settings.NoClipEnabled then return end
        
        Character = GetCharacter()
        if not Character then return end
        
        local rootPart = Character:FindFirstChild("HumanoidRootPart")
        if not rootPart then return end
        
        -- Hareket vekt√∂r√º
        local moveVector = Vector3.new(0, 0, 0)
        
        -- Klavye kontrolleri
        if noClipKeys.Forward then moveVector = moveVector + Camera.CFrame.LookVector end
        if noClipKeys.Backward then moveVector = moveVector - Camera.CFrame.LookVector end
        if noClipKeys.Left then moveVector = moveVector - Camera.CFrame.RightVector end
        if noClipKeys.Right then moveVector = moveVector + Camera.CFrame.RightVector end
        if noClipKeys.Up then moveVector = moveVector + Vector3.new(0, 1, 0) end
        if noClipKeys.Down then moveVector = moveVector - Vector3.new(0, 1, 0) end
        
        -- Hareketi uygula
        if moveVector.Magnitude > 0 then
            rootPart.CFrame = rootPart.CFrame + (moveVector.Unit * noClipSpeed * 0.05)
        end
        
        -- Collision kontrol√º (g√ºvenlik)
        for _, data in pairs(NoClipParts) do
            if data.Part and data.Part.Parent then
                if data.Part.CanCollide then
                    data.Part.CanCollide = false
                end
            end
        end
    end)
    
    -- NoClip g√∂stergesi
    local indicator = Instance.new("BillboardGui")
    indicator.Name = "EnhancedNoClipIndicator"
    indicator.Size = UDim2.new(0, 150, 0, 60)
    indicator.StudsOffset = Vector3.new(0, 4, 0)
    indicator.AlwaysOnTop = true
    indicator.Adornee = rootPart
    indicator.Parent = rootPart
    
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, 0, 0.6, 0)
    label.BackgroundTransparency = 1
    label.Text = "üöÄ ENHANCED NO CLIP"
    label.TextColor3 = Color3.fromRGB(100, 200, 255)
    label.TextSize = 16
    label.Font = Enum.Font.GothamBold
    label.Parent = indicator
    
    local speedLabel = Instance.new("TextLabel")
    speedLabel.Size = UDim2.new(1, 0, 0.4, 0)
    speedLabel.Position = UDim2.new(0, 0, 0.6, 0)
    speedLabel.BackgroundTransparency = 1
    speedLabel.Text = "Speed: " .. noClipSpeed
    speedLabel.TextColor3 = Color3.fromRGB(200, 200, 255)
    speedLabel.TextSize = 12
    speedLabel.Font = Enum.Font.Gotham
    speedLabel.Parent = indicator
    
    -- Hƒ±z g√ºncelleme
    spawn(function()
        while Settings.NoClipEnabled do
            speedLabel.Text = "Speed: " .. noClipSpeed
            wait(0.5)
        end
    end)
    
    print("üöÄ Geli≈ümi≈ü No Clip Aktif!")
    print("   ‚Ä¢ WASD + Space/Shift ile hareket")
    print("   ‚Ä¢ E/Q ile hƒ±z kontrol√º")
    print("   ‚Ä¢ G√∂rsel efektler")
    print("   ‚Ä¢ Otomatik collision devre dƒ±≈üƒ± bƒ±rakma")
end

local function DisableEnhancedNoClip()
    Settings.NoClipEnabled = false
    
    -- Collision'larƒ± geri y√ºkle
    for _, data in pairs(NoClipParts) do
        if data.Part and data.Parent then
            pcall(function()
                data.Part.CanCollide = data.OriginalCanCollide
                data.Part.Transparency = data.OriginalTransparency
                
                local light = data.Part:FindFirstChild("EnhancedNoClipLight")
                if light then light:Destroy() end
            end)
        end
    end
    
    NoClipParts = {}
    
    -- Baƒülantƒ±larƒ± temizle
    if Connections.EnhancedNoClipAdded then Connections.EnhancedNoClipAdded:Disconnect() end
    if Connections.NoClipKeyDown then Connections.NoClipKeyDown:Disconnect() end
    if Connections.NoClipKeyUp then Connections.NoClipKeyUp:Disconnect() end
    if Connections.NoClipLoop then Connections.NoClipLoop:Disconnect() end
    
    -- G√∂stergeleri temizle
    pcall(function()
        Character = GetCharacter()
        if Character then
            local rootPart = Character:FindFirstChild("HumanoidRootPart")
            if rootPart then
                local indicator = rootPart:FindFirstChild("EnhancedNoClipIndicator")
                if indicator then indicator:Destroy() end
            end
        end
    end)
    
    -- Humanoid state'i geri y√ºkle
    local humanoid = Character and Character:FindFirstChildOfClass("Humanoid")
    if humanoid then
        humanoid:ChangeState(Enum.HumanoidStateType.Running)
    end
    
    print("‚ùå Geli≈ümi≈ü No Clip Kapalƒ±")
end

-- GUI D√úZELTMELERƒ∞ VE MOBƒ∞LE UYUMLU TU≈ûLAR
local function CreateMobileFriendlyGUI()
    -- Ana GUI'yi temizle
    pcall(function()
        for _, gui in pairs(game:GetService("CoreGui"):GetChildren()) do
            if gui.Name == "UniversalToolGUI_V5" then
                gui:Destroy()
            end
        end
    end)
    
    wait(0.1)
    
    -- YENƒ∞ GELƒ∞≈ûMƒ∞≈û GUI
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "UniversalToolGUI_V5"
    ScreenGui.ResetOnSpawn = false
    ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    
    if pcall(function() ScreenGui.Parent = game:GetService("CoreGui") end) then
        -- Ba≈üarƒ±lƒ±
    elseif pcall(function() ScreenGui.Parent = Player:WaitForChild("PlayerGui") end) then
        -- Ba≈üarƒ±lƒ±
    else
        warn("GUI parent bulunamadƒ±!")
        return nil
    end
    
    -- ANA FRAME (Daha b√ºy√ºk ve mobile uyumlu)
    local MainFrame = Instance.new("Frame")
    MainFrame.Name = "MainFrame"
    MainFrame.Size = UDim2.new(0, 320, 0, 500) -- Daha geni≈ü
    MainFrame.Position = UDim2.new(0, 20, 0.5, -250)
    MainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 35)
    MainFrame.BorderSizePixel = 0
    MainFrame.Active = true
    MainFrame.Draggable = true
    MainFrame.Parent = ScreenGui
    
    local MainCorner = Instance.new("UICorner")
    MainCorner.CornerRadius = UDim.new(0, 15)
    MainCorner.Parent = MainFrame
    
    local MainStroke = Instance.new("UIStroke")
    MainStroke.Color = Color3.fromRGB(100, 60, 150)
    MainStroke.Thickness = 3
    MainStroke.Parent = MainFrame
    
    -- BA≈ûLIK BAR (Daha b√ºy√ºk tu≈ülar)
    local TitleBar = Instance.new("Frame")
    TitleBar.Size = UDim2.new(1, 0, 0, 50)
    TitleBar.BackgroundColor3 = Color3.fromRGB(40, 30, 70)
    TitleBar.BorderSizePixel = 0
    TitleBar.Parent = MainFrame
    
    local TitleCorner = Instance.new("UICorner")
    TitleCorner.CornerRadius = UDim.new(0, 15)
    TitleCorner.Parent = TitleBar
    
    local TitleText = Instance.new("TextLabel")
    TitleText.Size = UDim2.new(1, -100, 1, 0)
    TitleText.Position = UDim2.new(0, 15, 0, 0)
    TitleText.BackgroundTransparency = 1
    TitleText.Text = "üåÄ UNIVERSAL v5.0"
    TitleText.TextColor3 = Color3.fromRGB(255, 255, 255)
    TitleText.TextSize = 18
    TitleText.Font = Enum.Font.GothamBold
    TitleText.TextXAlignment = Enum.TextXAlignment.Left
    TitleText.Parent = TitleBar
    
    -- K√ú√á√úLTME B√úY√úTME BUTONU (Daha b√ºy√ºk)
    local MinMaxBtn = Instance.new("TextButton")
    MinMaxBtn.Name = "MinMaxBtn"
    MinMaxBtn.Size = UDim2.new(0, 40, 0, 40)
    MinMaxBtn.Position = UDim2.new(1, -50, 0.5, -20)
    MinMaxBtn.BackgroundColor3 = Color3.fromRGB(70, 50, 100)
    MinMaxBtn.BorderSizePixel = 0
    MinMaxBtn.Text = "‚àí"
    MinMaxBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    MinMaxBtn.TextSize = 24
    MinMaxBtn.Font = Enum.Font.GothamBold
    MinMaxBtn.Parent = TitleBar
    
    local BtnCorner = Instance.new("UICorner")
    BtnCorner.CornerRadius = UDim.new(0, 8)
    BtnCorner.Parent = MinMaxBtn
    
    -- SCROLL FRAME (Mobile i√ßin optimize)
    local ScrollFrame = Instance.new("ScrollingFrame")
    ScrollFrame.Name = "ScrollFrame"
    ScrollFrame.Size = UDim2.new(1, -10, 1, -60)
    ScrollFrame.Position = UDim2.new(0, 5, 0, 55)
    ScrollFrame.BackgroundTransparency = 1
    ScrollFrame.BorderSizePixel = 0
    ScrollFrame.ScrollBarThickness = 6 -- Daha kalƒ±n
    ScrollFrame.ScrollBarImageColor3 = Color3.fromRGB(120, 90, 180)
    ScrollFrame.ScrollingDirection = Enum.ScrollingDirection.Y
    ScrollFrame.VerticalScrollBarInset = Enum.ScrollBarInset.Always
    ScrollFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
    ScrollFrame.Parent = MainFrame
    
    -- CONTENT FRAME
    local Content = Instance.new("Frame")
    Content.Name = "Content"
    Content.Size = UDim2.new(1, 0, 0, 0)
    Content.BackgroundTransparency = 1
    Content.Parent = ScrollFrame
    
    local ContentLayout = Instance.new("UIListLayout")
    ContentLayout.Padding = UDim.new(0, 8)
    ContentLayout.SortOrder = Enum.SortOrder.LayoutOrder
    ContentLayout.Parent = Content
    
    -- Canvas boyutu g√ºncelleme
    ContentLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
        ScrollFrame.CanvasSize = UDim2.new(0, 0, 0, ContentLayout.AbsoluteContentSize.Y + 20)
    end)
    
    -- MOBILE UYUMLU TOGGLE OLU≈ûTURUCU
    local function CreateMobileToggle(name, text, icon, defaultState, onEnable, onDisable)
        local ToggleFrame = Instance.new("Frame")
        ToggleFrame.Name = name .. "Frame"
        ToggleFrame.Size = UDim2.new(1, 0, 0, 55) -- Daha y√ºksek
        ToggleFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 55)
        ToggleFrame.BorderSizePixel = 0
        ToggleFrame.LayoutOrder = #Content:GetChildren()
        ToggleFrame.Parent = Content
        
        local FrameCorner = Instance.new("UICorner")
        FrameCorner.CornerRadius = UDim.new(0, 10)
        FrameCorner.Parent = ToggleFrame
        
        local IconLabel = Instance.new("TextLabel")
        IconLabel.Size = UDim2.new(0, 40, 1, 0)
        IconLabel.Position = UDim2.new(0, 10, 0, 0)
        IconLabel.BackgroundTransparency = 1
        IconLabel.Text = icon
        IconLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
        IconLabel.TextSize = 24
        IconLabel.Font = Enum.Font.GothamBold
        IconLabel.TextXAlignment = Enum.TextXAlignment.Left
        IconLabel.Parent = ToggleFrame
        
        local TextLabel = Instance.new("TextLabel")
        TextLabel.Size = UDim2.new(0.6, -50, 1, 0)
        TextLabel.Position = UDim2.new(0, 60, 0, 0)
        TextLabel.BackgroundTransparency = 1
        TextLabel.Text = text
        TextLabel.TextColor3 = Color3.fromRGB(220, 220, 255)
        TextLabel.TextSize = 16
        TextLabel.Font = Enum.Font.GothamSemibold
        TextLabel.TextXAlignment = Enum.TextXAlignment.Left
        TextLabel.Parent = ToggleFrame
        
        local SwitchBG = Instance.new("Frame")
        SwitchBG.Name = "SwitchBG"
        SwitchBG.Size = UDim2.new(0, 70, 0, 35) -- Daha b√ºy√ºk
        SwitchBG.Position = UDim2.new(1, -80, 0.5, -17.5)
        SwitchBG.BackgroundColor3 = Color3.fromRGB(70, 70, 90)
        SwitchBG.BorderSizePixel = 0
        SwitchBG.Parent = ToggleFrame
        
        local SwitchBGCorner = Instance.new("UICorner")
        SwitchBGCorner.CornerRadius = UDim.new(1, 0)
        SwitchBGCorner.Parent = SwitchBG
        
        local Knob = Instance.new("Frame")
        Knob.Name = "Knob"
        Knob.Size = UDim2.new(0, 31, 0, 31) -- Daha b√ºy√ºk
        Knob.Position = UDim2.new(0, 2, 0.5, -15.5)
        Knob.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        Knob.BorderSizePixel = 0
        Knob.Parent = SwitchBG
        
        local KnobCorner = Instance.new("UICorner")
        KnobCorner.CornerRadius = UDim.new(1, 0)
        KnobCorner.Parent = Knob
        
        local ToggleButton = Instance.new("TextButton")
        ToggleButton.Name = "ToggleButton"
        ToggleButton.Size = UDim2.new(1, 0, 1, 0)
        ToggleButton.BackgroundTransparency = 1
        ToggleButton.Text = ""
        ToggleButton.Parent = ToggleFrame
        
        local isEnabled = defaultState
        
        local function UpdateVisual(state, animate)
            if animate then
                if state then
                    TweenService:Create(SwitchBG, TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), 
                        {BackgroundColor3 = Color3.fromRGB(80, 220, 120)}):Play()
                    TweenService:Create(Knob, TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), 
                        {Position = UDim2.new(1, -33, 0.5, -15.5)}):Play()
                    TweenService:Create(ToggleFrame, TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), 
                        {BackgroundColor3 = Color3.fromRGB(45, 65, 50)}):Play()
                else
                    TweenService:Create(SwitchBG, TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), 
                        {BackgroundColor3 = Color3.fromRGB(70, 70, 90)}):Play()
                    TweenService:Create(Knob, TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), 
                        {Position = UDim2.new(0, 2, 0.5, -15.5)}):Play()
                    TweenService:Create(ToggleFrame, TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), 
                        {BackgroundColor3 = Color3.fromRGB(35, 35, 55)}):Play()
                end
            else
                SwitchBG.BackgroundColor3 = state and Color3.fromRGB(80, 220, 120) or Color3.fromRGB(70, 70, 90)
                Knob.Position = state and UDim2.new(1, -33, 0.5, -15.5) or UDim2.new(0, 2, 0.5, -15.5)
                ToggleFrame.BackgroundColor3 = state and Color3.fromRGB(45, 65, 50) or Color3.fromRGB(35, 35, 55)
            end
        end
        
        -- MOBILE TOUCH DESTEƒûƒ∞
        local touchStartTime = 0
        
        ToggleButton.MouseButton1Click:Connect(function()
            isEnabled = not isEnabled
            UpdateVisual(isEnabled, true)
            
            if isEnabled then
                if onEnable then onEnable() end
            else
                if onDisable then onDisable() end
            end
        end)
        
        ToggleButton.TouchTap:Connect(function(touchPos, gameProcessed)
            if gameProcessed then return end
            isEnabled = not isEnabled
            UpdateVisual(isEnabled, true)
            
            if isEnabled then
                if onEnable then onEnable() end
            else
                if onDisable then onDisable() end
            end
        end)
        
        -- Uzun basma i√ßin
        ToggleButton.TouchLongPress:Connect(function(touchPos, gameProcessed)
            if gameProcessed then return end
            -- Uzun basƒ±nca hƒ±zlƒ± a√ß/kapa
            isEnabled = not isEnabled
            UpdateVisual(isEnabled, true)
            
            if isEnabled then
                if onEnable then onEnable() end
            else
                if onDisable then onDisable() end
            end
        end)
        
        UpdateVisual(defaultState, false)
        
        return {
            SetState = function(state)
                isEnabled = state
                UpdateVisual(state, true)
                if state then
                    if onEnable then onEnable() end
                else
                    if onDisable then onDisable() end
                end
            end,
            GetState = function() return isEnabled end
        }
    end
    
    -- MOBILE UYUMLU BUTON OLU≈ûTURUCU
    local function CreateMobileButton(text, icon, color, onClick)
        local Button = Instance.new("TextButton")
        Button.Size = UDim2.new(1, 0, 0, 60) -- Daha y√ºksek
        Button.BackgroundColor3 = color
        Button.Text = icon .. " " .. text
        Button.TextColor3 = Color3.fromRGB(255, 255, 255)
        Button.TextSize = 18
        Button.Font = Enum.Font.GothamSemibold
        Button.LayoutOrder = #Content:GetChildren()
        Button.Parent = Content
        
        local ButtonCorner = Instance.new("UICorner")
        ButtonCorner.CornerRadius = UDim.new(0, 10)
        ButtonCorner.Parent = Button
        
        -- Touch feedback
        local originalColor = color
        
        Button.MouseButton1Down:Connect(function()
            TweenService:Create(Button, TweenInfo.new(0.1), {BackgroundColor3 = Color3.fromRGB(
                math.min(originalColor.R * 255 + 30, 255),
                math.min(originalColor.G * 255 + 30, 255),
                math.min(originalColor.B * 255 + 30, 255)
            )}):Play()
        end)
        
        Button.MouseButton1Up:Connect(function()
            TweenService:Create(Button, TweenInfo.new(0.1), {BackgroundColor3 = originalColor}):Play()
        end)
        
        Button.TouchTap:Connect(function(touchPos, gameProcessed)
            if gameProcessed then return end
            onClick()
        end)
        
        Button.MouseButton1Click:Connect(onClick)
        
        return Button
    end
    
    -- K√ú√á√úLTME/B√úY√úLTME FONKSƒ∞YONU
    local isMinimized = false
    
    MinMaxBtn.MouseButton1Click:Connect(function()
        isMinimized = not isMinimized
        
        if isMinimized then
            TweenService:Create(MainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), 
                {Size = UDim2.new(0, 320, 0, 50)}):Play()
            ScrollFrame.Visible = false
            MinMaxBtn.Text = "+"
        else
            TweenService:Create(MainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), 
                {Size = UDim2.new(0, 320, 0, 500)}):Play()
            wait(0.2)
            ScrollFrame.Visible = true
            MinMaxBtn.Text = "‚àí"
        end
    end)
    
    -- MOBILE DRAG SUPPORT
    local dragging = false
    local dragStart = nil
    local startPos = nil
    
    TitleBar.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = MainFrame.Position
        end
    end)
    
    TitleBar.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = false
        end
    end)
    
    UserInputService.InputChanged:Connect(function(input)
        if dragging and (input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseMovement) then
            local delta = input.Position - dragStart
            MainFrame.Position = UDim2.new(
                startPos.X.Scale, startPos.X.Offset + delta.X,
                startPos.Y.Scale, startPos.Y.Offset + delta.Y
            )
        end
    end)
    
    return {
        GUI = ScreenGui,
        CreateToggle = CreateMobileToggle,
        CreateButton = CreateMobileButton,
        ScrollFrame = ScrollFrame,
        Content = Content
    }
end

-- GUI REFERANSLARI
local MobileGUI = nil
local GUIFunctions = nil

-- GUI'Yƒ∞ BA≈ûLAT
local function InitializeGUI()
    if MobileGUI then
        MobileGUI.GUI:Destroy()
    end
    
    MobileGUI = CreateMobileFriendlyGUI()
    if not MobileGUI then return end
    
    GUIFunctions = {
        toggles = {},
        buttons = {}
    }
    
    -- TOGGLES EKLE
    -- Fly Toggle
    GUIFunctions.toggles.Fly = MobileGUI.CreateToggle("Fly", "Toggle Fly", "üöÄ", Settings.FlyEnabled, 
        function() 
            if Settings.FlyEnabled then
                DisableMobileFly()
            else
                EnableMobileFly()
            end
        end,
        function() 
            if Settings.FlyEnabled then
                DisableMobileFly()
            end
        end
    )
    
    -- NoClip Toggle
    GUIFunctions.toggles.NoClip = MobileGUI.CreateToggle("NoClip", "Enhanced No Clip", "üöÄ", Settings.NoClipEnabled,
        EnableEnhancedNoClip,
        DisableEnhancedNoClip
    )
    
    -- God Mode Toggle
    GUIFunctions.toggles.GodMode = MobileGUI.CreateToggle("GodMode", "God Mode", "üëë", Settings.GodModeEnabled,
        EnableGodMode,
        DisableGodMode
    )
    
    -- FullBright Toggle
    GUIFunctions.toggles.FullBright = MobileGUI.CreateToggle("FullBright", "FullBright", "‚òÄÔ∏è", FullBrightEnabled,
        EnableFullBright,
        DisableFullBright
    )
    
    -- ESP Toggle
    GUIFunctions.toggles.ESP = MobileGUI.CreateToggle("ESP", "All ESP", "üëÅÔ∏è", Settings.ESPEnabled,
        function()
            EnableESP()
            EnableItemESP()
            EnablePlayerESP()
        end,
        function()
            DisableESP()
            DisableItemESP()
            DisablePlayerESP()
        end
    )
    
    -- Black Hole Toggle
    GUIFunctions.toggles.BlackHole = MobileGUI.CreateToggle("BlackHole", "Black Hole", "üåÄ", Settings.BlackHoleEnabled,
        EnableAdvancedBlackHole,
        DisableAdvancedBlackHole
    )
    
    -- Walk Fling Toggle
    GUIFunctions.toggles.Fling = MobileGUI.CreateToggle("Fling", "Walk Fling", "üí•", Settings.FlingEnabled,
        EnableWalkFling,
        DisableWalkFling
    )
    
    -- Auto Ragdoll Toggle
    GUIFunctions.toggles.AutoRagdoll = MobileGUI.CreateToggle("AutoRagdoll", "Auto Ragdoll", "üõ°Ô∏è", Settings.AutoRagdollEnabled,
        EnableAutoRagdoll,
        DisableAutoRagdoll
    )
    
    -- BUTTONS EKLE
    -- Bring Menu Button
    GUIFunctions.buttons.BringMenu = MobileGUI.CreateButton("Bring Menu", "üîß", Color3.fromRGB(100, 80, 180), 
        function()
            OpenBringMenu()
        end
    )
    
    -- Teleport All Button
    GUIFunctions.buttons.TeleportAll = MobileGUI.CreateButton("Teleport All", "üìç", Color3.fromRGB(80, 180, 100),
        function()
            BringAllNPCs()
            BringAllItems()
            BringAllPlayers()
        end
    )
    
    -- Reset All Button
    GUIFunctions.buttons.ResetAll = MobileGUI.CreateButton("Reset All", "üîÑ", Color3.fromRGB(180, 80, 80),
        function()
            -- T√ºm toggles'ƒ± kapat
            for name, toggle in pairs(GUIFunctions.toggles) do
                toggle.SetState(false)
            end
            
            -- Fullbright'i kapat
            if FullBrightEnabled then
                DisableFullBright()
            end
            
            print("‚úÖ T√ºm √∂zellikler sƒ±fƒ±rlandƒ±!")
        end
    )
    
    -- KONTROL KILAVUZU BUTTONU
    GUIFunctions.controls.Help = MobileGUI.CreateButton("Controls Help", "‚ùì", Color3.fromRGB(60, 150, 200),
        function()
            print("=== üì± MOBILE KONTROLLER ===")
            print("‚Ä¢ üëÜ Dokunma: Butonlara bas")
            print("‚Ä¢ üëÜ Uzun Basma: Hƒ±zlƒ± a√ß/kapa")
            print("‚Ä¢ ‚ÜïÔ∏è Kaydƒ±rma: Listeyi gez")
            print("‚Ä¢ üëÜ S√ºr√ºkleme: GUI'yi ta≈üƒ±")
            print("‚Ä¢ ‚àí/+: K√º√ß√ºlt/B√ºy√ºt")
            print("==========================")
        end
    )
    
    print("‚úÖ Mobile Uyumlu GUI Y√ºklendi!")
    print("   ‚Ä¢ B√ºy√ºk ve dokunabilir butonlar")
    print("   ‚Ä¢ Smooth animasyonlar")
    print("   ‚Ä¢ Kaydƒ±rƒ±labilir liste")
    print("   ‚Ä¢ S√ºr√ºklenebilir pencere")
end

-- GUI'Yƒ∞ BA≈ûLAT
spawn(function()
    wait(2) -- Diƒüer sistemlerin y√ºklenmesini bekle
    InitializeGUI()
end)

-- KARAKTER DEƒûƒ∞≈ûƒ∞KLƒ∞ƒûƒ∞ ƒ∞√áƒ∞N OTOMATƒ∞K AYARLAMA
Player.CharacterAdded:Connect(function(char)
    Character = char
    HumanoidRootPart = char:WaitForChild("HumanoidRootPart", 10)
    
    -- NoClip aktifse yeniden baƒüla
    if Settings.NoClipEnabled then
        wait(0.5)
        DisableEnhancedNoClip()
        EnableEnhancedNoClip()
    end
    
    -- Fullbright g√∂stergesini yeniden baƒüla
    if FullBrightEnabled then
        wait(0.5)
        -- G√∂stergeleri g√ºncelle
        local indicator = game:GetService("CoreGui"):FindFirstChild("FullBrightIndicator")
        if indicator then indicator:Destroy() end
        
        local newIndicator = Instance.new("BillboardGui")
        newIndicator.Name = "FullBrightIndicator"
        newIndicator.Size = UDim2.new(0, 120, 0, 40)
        newIndicator.StudsOffset = Vector3.new(0, 3.5, 0)
        newIndicator.AlwaysOnTop = true
        newIndicator.Adornee = HumanoidRootPart
        newIndicator.Parent = HumanoidRootPart
        
        local label = Instance.new("TextLabel")
        label.Size = UDim2.new(1, 0, 1, 0)
        label.BackgroundTransparency = 1
        label.Text = "‚òÄÔ∏è FULLBRIGHT"
        label.TextColor3 = Color3.fromRGB(255, 255, 100)
        label.TextSize = 16
        label.Font = Enum.Font.GothamBold
        label.Parent = newIndicator
    end
end)

-- OYUN BA≈ûLANGICI Bƒ∞LGƒ∞ MESAJI
spawn(function()
    wait(1)
    print("=== PART 5 Y√úKLENDƒ∞ ===")
    print("üì¶ Yeni √ñzellikler:")
    print("")
    print("   ‚úÖ FULLBRIGHT Sƒ∞STEMƒ∞")
    print("     ‚Ä¢ T√ºm haritayƒ± aydƒ±nlatƒ±r")
    print("     ‚Ä¢ G√∂lgeleri kaldƒ±rƒ±r")
    print("     ‚Ä¢ Sky ve atmosphere'√º devre dƒ±≈üƒ± bƒ±rakƒ±r")
    print("     ‚Ä¢ Bloom efekti ekler")
    print("")
    print("   ‚úÖ GELƒ∞≈ûMƒ∞≈û NO CLIP")
    print("     ‚Ä¢ WASD + Space/Shift ile hareket")
    print("     ‚Ä¢ E/Q ile hƒ±z kontrol√º")
    print("     ‚Ä¢ G√∂rsel efektler (saydamlƒ±k + ƒ±≈üƒ±k)")
    print("     ‚Ä¢ Otomatik collision devre dƒ±≈üƒ± bƒ±rakma")
    print("")
    print("   ‚úÖ MOBILE UYUMLU GUI")
    print("     ‚Ä¢ B√ºy√ºk dokunabilir butonlar")
    print("     ‚Ä¢ Smooth animasyonlar")
    print("     ‚Ä¢ Kaydƒ±rƒ±labilir liste")
    print("     ‚Ä¢ S√ºr√ºklenebilir pencere")
    print("     ‚Ä¢ K√º√ß√ºltme/B√ºy√ºltme √∂zelliƒüi")
    print("")
    print("   ‚öôÔ∏è Kontroller:")
    print("     ‚Ä¢ Touch: Butonlara bas")
    print("     ‚Ä¢ Long Press: Hƒ±zlƒ± a√ß/kapa")
    print("     ‚Ä¢ Swipe: Listeyi kaydƒ±r")
    print("     ‚Ä¢ Drag: GUI'yi ta≈üƒ±")
    print("==========================")
end)-- Universal Tool v5.0 - Part 6/7
-- AUTO RAGDROLL GELƒ∞≈ûTƒ∞RMESƒ∞ + NPC TESPƒ∞T Sƒ∞STEMƒ∞

-- GELƒ∞≈ûMƒ∞≈û NPC TESPƒ∞T Sƒ∞STEMƒ∞ (WALK FLING ƒ∞LE UYUMLU)
local DangerousNPCs = {}
local NPCScanCooldown = 0
local LastScanTime = 0

-- TEHLƒ∞KELƒ∞ NPC TESPƒ∞T FONKSƒ∞YONU (GELƒ∞≈ûMƒ∞≈û)
local function IsNPCTrulyDangerous(model, playerPosition)
    if not model or not model:IsA("Model") then return false, "Not a model" end
    
    -- Oyuncu kontrol√º
    for _, player in pairs(Players:GetPlayers()) do
        if player.Character == model then
            return false, "Player character"
        end
    end
    
    local humanoid = model:FindFirstChildOfClass("Humanoid")
    if not humanoid then return false, "No humanoid" end
    
    -- Root part kontrol√º
    local rootPart = model:FindFirstChild("HumanoidRootPart") or 
                    model:FindFirstChild("Torso") or 
                    model:FindFirstChild("UpperTorso")
    if not rootPart then return false, "No root part" end
    
    -- ƒ∞sim analizi (geni≈ületilmi≈ü)
    local modelName = model.Name:lower()
    local modelDisplayName = (model:GetAttribute("DisplayName") or ""):lower()
    
    -- G√úVENLƒ∞ NPC Lƒ∞STESƒ∞ (daha kapsamlƒ±)
    local safePatterns = {
        "shop", "vendor", "merchant", "trader", "seller", "buyer",
        "quest", "npc", "friendly", "ally", "helper", "assistant",
        "guide", "civilian", "villager", "citizen", "townsfolk",
        "guard", "soldier", "knight", "paladin", -- dost askerler
        "pet", "animal", "creature", "bird", "fish", "rabbit",
        "deer", "horse", "cow", "pig", "chicken", "sheep",
        "trainer", "teacher", "master", "sensei", "mentor",
        "priest", "monk", "cleric", "healer", "doctor", "nurse",
        "blacksmith", "farmer", "fisherman", "miner", "lumberjack",
        "bartender", "chef", "cook", "waiter", "waitress",
        "child", "baby", "kid", "elder", "old", "grandpa", "grandma"
    }
    
    -- TEHLƒ∞KELƒ∞ NPC Lƒ∞STESƒ∞ (daha kapsamlƒ±)
    local dangerPatterns = {
        -- Genel tehlikeli
        "enemy", "hostile", "aggressive", "attack", "attacker",
        "monster", "creep", "mob", "fiend", "beast", "brute",
        "demon", "devil", "ghost", "spirit", "phantom", "specter",
        "zombie", "skeleton", "undead", "vampire", "werewolf",
        "goblin", "orc", "troll", "ogre", "giant", "cyclops",
        "dragon", "wyvern", "griffin", "basilisk", "hydra",
        "spider", "scorpion", "snake", "serpent", "worm",
        "slime", "ooze", "blob", "gelatinous",
        "bandit", "pirate", "raider", "thief", "rogue", "assassin",
        "killer", "murderer", "hunter", "predator", "stalker",
        "boss", "miniboss", "elite", "champion", "legendary",
        "mutant", "infected", "corrupted", "cursed", "possessed",
        "scp", "entity", "nextbot", "backroom", "horror",
        "alien", "extraterrestrial", "xeno",
        "robot", "droid", "android", "cyborg", "mech",
        "elemental", "golem", "construct", "automaton"
    }
    
    -- √ñnce g√ºvenli kontrol√º
    for _, pattern in ipairs(safePatterns) do
        if modelName:find(pattern) or modelDisplayName:find(pattern) then
            -- G√ºvenli NPC'ler i√ßin ek kontrol
            local distance = playerPosition and (rootPart.Position - playerPosition).Magnitude or 1000
            
            -- G√ºvenli NPC yakƒ±nsa ve aggresif davranƒ±yorsa tehlikeli olabilir
            if distance < 30 then
                -- Hƒ±z kontrol√º
                if rootPart.Velocity.Magnitude > 20 then
                    return true, "Safe NPC but moving fast"
                end
                
                -- Oyuncuya bakƒ±yor mu?
                local lookVector = rootPart.CFrame.LookVector
                local toPlayer = (playerPosition - rootPart.Position).Unit
                local dot = lookVector:Dot(toPlayer)
                
                if dot > 0.8 and rootPart.Velocity.Magnitude > 5 then
                    return true, "Safe NPC chasing player"
                end
            end
            
            return false, "Safe NPC pattern: " .. pattern
        end
    end
    
    -- Tehlike kontrol√º
    for _, pattern in ipairs(dangerPatterns) do
        if modelName:find(pattern) or modelDisplayName:find(pattern) then
            return true, "Danger pattern: " .. pattern
        end
    end
    
    -- SCRIPT ANALƒ∞Zƒ∞
    local dangerScore = 0
    local safeScore = 0
    
    for _, child in pairs(model:GetDescendants()) do
        -- Script analizi
        if child:IsA("Script") or child:IsA("LocalScript") or child:IsA("ModuleScript") then
            local scriptName = child.Name:lower()
            
            -- Tehlikeli scriptler
            local dangerScripts = {
                "attack", "damage", "hurt", "kill", "death", "die",
                "combat", "fight", "battle", "war", "duel",
                "chase", "follow", "pursue", "hunt", "track",
                "aggro", "aggressive", "hostile", "enemyai",
                "patrol", "guard", "defend", "protect",
                "spawn", "summon", "respawn", "regen",
                "boss", "miniboss", "elite", "champion",
                "projectile", "bullet", "arrow", "missile",
                "explosion", "blast", "boom", "fire", "burn",
                "poison", "toxic", "venom", "disease",
                "stun", "freeze", "paralyze", "slow", "debuff"
            }
            
            for _, danger in ipairs(dangerScripts) do
                if scriptName:find(danger) then
                    dangerScore = dangerScore + 2
                end
            end
            
            -- G√ºvenli scriptler
            local safeScripts = {
                "shop", "vendor", "merchant", "trade",
                "quest", "mission", "task", "objective",
                "dialog", "dialogue", "talk", "speak", "conversation",
                "idle", "wait", "stand", "sit", "rest",
                "walk", "move", "wander", "roam",
                "animation", "anim", "pose", "gesture"
            }
            
            for _, safe in ipairs(safeScripts) do
                if scriptName:find(safe) then
                    safeScore = safeScore + 1
                end
            end
        end
        
        -- Tool/Weapon kontrol√º
        if child:IsA("Tool") then
            local toolName = child.Name:lower()
            local weaponKeywords = {
                "sword", "axe", "hammer", "mace", "dagger", "knife",
                "spear", "lance", "pike", "halberd", "trident",
                "bow", "crossbow", "arrow", "quiver",
                "gun", "pistol", "rifle", "shotgun", "sniper",
                "machinegun", "minigun", "gatling", "cannon",
                "rocket", "launcher", "missile", "grenade",
                "bomb", "explosive", "dynamite", "tnt",
                "staff", "wand", "rod", "scepter", "orb",
                "shield", "armor", "helmet", "gauntlet"
            }
            
            for _, weapon in ipairs(weaponKeywords) do
                if toolName:find(weapon) then
                    dangerScore = dangerScore + 3
                    break
                end
            end
        end
        
        -- Hitbox/Damage part kontrol√º
        if child:IsA("BasePart") then
            local partName = child.Name:lower()
            if partName:find("hitbox") or partName:find("damage") or 
               partName:find("attack") or partName:find("hurt") then
                dangerScore = dangerScore + 2
            end
        end
    end
    
    -- HUMANOID √ñZELLƒ∞KLERƒ∞
    if humanoid then
        -- Y√ºksek hƒ±z = saldƒ±rgan olabilir
        if humanoid.WalkSpeed > 25 then
            dangerScore = dangerScore + 1
        end
        if humanoid.WalkSpeed > 40 then
            dangerScore = dangerScore + 2
        end
        
        -- Y√ºksek atlama = agresif
        if humanoid.JumpPower > 50 then
            dangerScore = dangerScore + 1
        end
        
        -- Y√ºksek saƒülƒ±k = boss/miniboss
        if humanoid.MaxHealth > 200 then
            dangerScore = dangerScore + 1
        end
        if humanoid.MaxHealth > 1000 then
            dangerScore = dangerScore + 3
        end
        
        -- D√º≈ü√ºk saƒülƒ±k = zayƒ±f
        if humanoid.Health < humanoid.MaxHealth * 0.3 then
            safeScore = safeScore + 1
        end
    end
    
    -- MESAFE VE DAVRANI≈û ANALƒ∞Zƒ∞
    if playerPosition then
        local distance = (rootPart.Position - playerPosition).Magnitude
        
        if distance < 50 then
            -- Oyuncuya doƒüru bakƒ±yor mu?
            local lookVector = rootPart.CFrame.LookVector
            local toPlayer = (playerPosition - rootPart.Position).Unit
            local dot = lookVector:Dot(toPlayer)
            
            -- Oyuncuya bakƒ±yor ve hareket ediyor
            if dot > 0.5 and rootPart.Velocity.Magnitude > 8 then
                dangerScore = dangerScore + 2
            end
            
            -- √áok yakƒ±n ve hƒ±zlƒ± hareket
            if distance < 20 and rootPart.Velocity.Magnitude > 10 then
                dangerScore = dangerScore + 1
            end
            
            -- Sava≈ü durumu (health deƒüi≈üiyor)
            if humanoid and humanoid:GetState() == Enum.HumanoidStateType.GettingUp then
                dangerScore = dangerScore + 1
            end
        else
            -- Uzaktaysa daha az tehlikeli
            safeScore = safeScore + 1
        end
    end
    
    -- SONU√á HESAPLAMA
    local totalScore = dangerScore - safeScore
    
    if totalScore >= 3 then
        return true, "Danger score: " .. totalScore .. " (D:" .. dangerScore .. " S:" .. safeScore .. ")"
    elseif totalScore <= -2 then
        return false, "Safe score: " .. totalScore .. " (D:" .. dangerScore .. " S:" .. safeScore .. ")"
    else
        -- Belirsiz durum: mesafe ve davranƒ±≈üa g√∂re karar ver
        if playerPosition then
            local distance = (rootPart.Position - playerPosition).Magnitude
            if distance < 30 and rootPart.Velocity.Magnitude > 5 then
                return true, "Ambiguous but close and moving"
            end
        end
        return false, "Ambiguous, score: " .. totalScore
    end
end

-- NPC TARAMA Sƒ∞STEMƒ∞
local function ScanForDangerousNPCs()
    local currentTime = tick()
    if currentTime - LastScanTime < NPCScanCooldown then
        return
    end
    
    LastScanTime = currentTime
    NPCScanCooldown = 0.5 -- Yarƒ± saniyede bir tarama
    
    Character = GetCharacter()
    if not Character then return end
    
    local playerRoot = Character:FindFirstChild("HumanoidRootPart")
    if not playerRoot then return end
    
    local playerPos = playerRoot.Position
    local detectedNPCs = {}
    
    -- T√ºm modelleri tarayalƒ±m
    for _, model in pairs(workspace:GetChildren()) do
        if model:IsA("Model") then
            local isDangerous, reason = IsNPCTrulyDangerous(model, playerPos)
            
            if isDangerous then
                local rootPart = model:FindFirstChild("HumanoidRootPart")
                if rootPart then
                    local distance = (rootPart.Position - playerPos).Magnitude
                    
                    table.insert(detectedNPCs, {
                        Model = model,
                        Distance = distance,
                        Reason = reason,
                        RootPart = rootPart
                    })
                end
            end
        end
    end
    
    -- Mesafeye g√∂re sƒ±rala (yakƒ±n -> uzak)
    table.sort(detectedNPCs, function(a, b)
        return a.Distance < b.Distance
    end)
    
    -- Tehlikeli NPC'leri g√ºncelle
    DangerousNPCs = detectedNPCs
    
    -- DEBUG: Tehlikeli NPC'leri g√∂ster
    if #detectedNPCs > 0 and Settings.AutoRagdollEnabled then
        -- print("üîç Found " .. #detectedNPCs .. " dangerous NPCs")
    end
end

-- GELƒ∞≈ûMƒ∞≈û AUTO RAGDOLL Sƒ∞STEMƒ∞ (WALK FLING ƒ∞LE UYUMLU)
local function ApplySmartRagdoll(npc, forceMultiplier)
    if not npc or RagdolledNPCs[npc] then return end
    
    local humanoid = npc:FindFirstChildOfClass("Humanoid")
    local rootPart = npc:FindFirstChild("HumanoidRootPart") or 
                    npc:FindFirstChild("Torso") or 
                    npc:FindFirstChild("UpperTorso")
    
    if not humanoid or not rootPart then return end
    
    -- Orjinal durumu kaydet
    local originalData = {
        WalkSpeed = humanoid.WalkSpeed,
        JumpPower = humanoid.JumpPower,
        PlatformStand = humanoid.PlatformStand,
        AutoRotate = humanoid.AutoRotate,
        Health = humanoid.Health
    }
    
    -- Motorlarƒ± kapat
    local disabledMotors = {}
    for _, motor in pairs(npc:GetDescendants()) do
        if motor:IsA("Motor6D") then
            table.insert(disabledMotors, {
                Motor = motor,
                Enabled = motor.Enabled
            })
            motor.Enabled = false
        end
    end
    
    -- Ragdoll ayarlarƒ±
    humanoid.WalkSpeed = 0
    humanoid.JumpPower = 0
    if humanoid.JumpHeight then humanoid.JumpHeight = 0 end
    humanoid.PlatformStand = true
    humanoid.AutoRotate = false
    
    -- WALK FLING ƒ∞LE UYUMLU RAGDOLL ETKƒ∞Sƒ∞
    local ragdollForce = forceMultiplier or 1
    
    -- Fƒ±rlatma efekti (walk fling ile uyumlu)
    local flingEffect = Instance.new("BodyAngularVelocity")
    flingEffect.Name = "AutoRagdollFling"
    flingEffect.MaxTorque = Vector3.new(math.huge, math.huge, math.huge)
    flingEffect.AngularVelocity = Vector3.new(
        math.random(-20, 20) * ragdollForce,
        math.random(30, 50) * ragdollForce,
        math.random(-20, 20) * ragdollForce
    )
    flingEffect.P = 10000
    flingEffect.Parent = rootPart
    
    -- Velocity efekti
    local velocity = rootPart.Velocity
    rootPart.Velocity = Vector3.new(
        velocity.X + math.random(-50, 50) * ragdollForce,
        math.random(30, 80) * ragdollForce, -- Yukarƒ± fƒ±rlat
        velocity.Z + math.random(-50, 50) * ragdollForce
    )
    
    -- RAGDOLL G√ñRSELLERƒ∞
    -- Billboard g√∂stergesi
    local indicator = Instance.new("BillboardGui")
    indicator.Name = "AutoRagdollIndicator"
    indicator.Size = UDim2.new(0, 120, 0, 40)
    indicator.StudsOffset = Vector3.new(0, 3, 0)
    indicator.AlwaysOnTop = true
    indicator.Adornee = rootPart
    indicator.Parent = rootPart
    
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, 0, 1, 0)
    label.BackgroundTransparency = 1
    label.Text = "üíÄ AUTO RAGDOLL"
    label.TextColor3 = Color3.fromRGB(255, 100, 100)
    label.TextSize = 14
    label.Font = Enum.Font.GothamBold
    label.Parent = indicator
    
    -- Highlight efekti
    local highlight = Instance.new("Highlight")
    highlight.Name = "AutoRagdollHighlight"
    highlight.Adornee = npc
    highlight.FillColor = Color3.fromRGB(255, 50, 50)
    highlight.FillTransparency = 0.8
    highlight.OutlineColor = Color3.fromRGB(255, 100, 100)
    highlight.OutlineTransparency = 0.3
    highlight.Parent = npc
    
    -- I≈üƒ±k efekti
    local light = Instance.new("PointLight")
    light.Name = "AutoRagdollLight"
    light.Brightness = 2
    light.Range = 10
    light.Color = Color3.fromRGB(255, 100, 100)
    light.Parent = rootPart
    
    -- T√ºm par√ßalara etki
    for _, part in pairs(npc:GetDescendants()) do
        if part:IsA("BasePart") then
            part.CanCollide = true
            part.Velocity = part.Velocity + Vector3.new(
                math.random(-30, 30) * ragdollForce,
                math.random(10, 40) * ragdollForce,
                math.random(-30, 30) * ragdollForce
            )
        end
    end
    
    -- Kaydet
    RagdolledNPCs[npc] = {
        OriginalData = originalData,
        DisabledMotors = disabledMotors,
        FlingEffect = flingEffect,
        Indicator = indicator,
        Highlight = highlight,
        Light = light,
        Humanoid = humanoid,
        RootPart = rootPart,
        RagdollTime = tick()
    }
    
    -- OTOMATƒ∞K KURTULMA S√úRESƒ∞
    spawn(function()
        local ragdollDuration = 10 -- 10 saniye
        
        for i = ragdollDuration, 0, -1 do
            if not RagdolledNPCs[npc] then break end
            
            -- Son 3 saniye i√ßin uyarƒ±
            if i <= 3 then
                label.Text = "üíÄ GETTING UP " .. i
                label.TextColor3 = Color3.fromRGB(255, 255, 100)
            end
            
            wait(1)
        end
        
        -- S√ºre doldu, ragdoll'u kaldƒ±r
        if RagdolledNPCs[npc] then
            RemoveSmartRagdoll(npc)
        end
    end)
end

local function RemoveSmartRagdoll(npc)
    if not npc or not RagdolledNPCs[npc] then return end
    
    local data = RagdolledNPCs[npc]
    
    pcall(function()
        -- Humanoid ayarlarƒ±nƒ± geri y√ºkle
        if data.Humanoid and data.Humanoid.Parent then
            data.Humanoid.WalkSpeed = data.OriginalData.WalkSpeed
            data.Humanoid.JumpPower = data.OriginalData.JumpPower
            if data.Humanoid.JumpHeight then
                data.Humanoid.JumpHeight = data.OriginalData.JumpHeight
            end
            data.Humanoid.PlatformStand = data.OriginalData.PlatformStand
            data.Humanoid.AutoRotate = data.OriginalData.AutoRotate
            
            -- Health'i geri y√ºkle (yarƒ± can)
            data.Humanoid.Health = math.min(data.Humanoid.MaxHealth, data.OriginalData.Health * 0.5)
        end
        
        -- Motorlarƒ± geri a√ß
        for _, motorData in pairs(data.DisabledMotors) do
            if motorData.Motor and motorData.Motor.Parent then
                motorData.Motor.Enabled = motorData.Enabled
            end
        end
        
        -- Efektleri temizle
        if data.FlingEffect then data.FlingEffect:Destroy() end
        if data.Indicator then data.Indicator:Destroy() end
        if data.Highlight then data.Highlight:Destroy() end
        if data.Light then data.Light:Destroy() end
        
        -- Velocity'yi sƒ±fƒ±rla
        if data.RootPart then
            data.RootPart.Velocity = Vector3.new(0, 0, 0)
            data.RootPart.RotVelocity = Vector3.new(0, 0, 0)
        end
    end)
    
    RagdolledNPCs[npc] = nil
end

-- OTOMATƒ∞K RAGDOLL KONTROL Sƒ∞STEMƒ∞
local function EnableSmartAutoRagdoll()
    Settings.AutoRagdollEnabled = true
    
    print("üõ°Ô∏è Akƒ±llƒ± Auto Ragdoll Aktif!")
    print("   ‚Ä¢ Tehlikeli NPC'leri otomatik tespit")
    print("   ‚Ä¢ Walk fling ile uyumlu")
    print("   ‚Ä¢ Mesafe ve davranƒ±≈ü analizi")
    print("   ‚Ä¢ 10 saniye sonra otomatik kurtulma")
    
    -- TARAMA LOOP'U
    Connections.AutoRagdollScan = RunService.Heartbeat:Connect(function()
        if not Settings.AutoRagdollEnabled then return end
        
        -- NPC taramasƒ± yap
        ScanForDangerousNPCs()
        
        Character = GetCharacter()
        if not Character then return end
        
        local playerRoot = Character:FindFirstChild("HumanoidRootPart")
        if not playerRoot then return end
        
        local playerPos = playerRoot.Position
        
        -- TEHLƒ∞KELƒ∞ NPC'LERƒ∞ ƒ∞≈ûLE
        for _, npcData in ipairs(DangerousNPCs) do
            local npc = npcData.Model
            local distance = npcData.Distance
            
            -- Mesafe kontrol√º (otomatik ragdoll i√ßin)
            if distance < Settings.RagdollDetectionRange then
                -- Hen√ºz ragdoll deƒüilse uygula
                if not RagdolledNPCs[npc] then
                    -- Mesafeye g√∂re g√º√ß ayarƒ±
                    local forceMultiplier = 1
                    if distance < 20 then forceMultiplier = 1.5 end
                    if distance < 10 then forceMultiplier = 2 end
                    
                    -- Akƒ±llƒ± ragdoll uygula
                    ApplySmartRagdoll(npc, forceMultiplier)
                    
                    -- DEBUG: Ragdoll uygulandƒ± mesajƒ±
                    -- print("üõ°Ô∏è Auto Ragdoll: " .. npc.Name .. " (" .. math.floor(distance) .. " studs)")
                end
            end
        end
    end)
    
    -- WALK FLING ƒ∞LE ETKƒ∞LE≈ûƒ∞M
    Connections.AutoRagdollFling = RunService.Heartbeat:Connect(function()
        if not Settings.AutoRagdollEnabled then return end
        if not Settings.FlingEnabled then return end
        
        -- Walk fling aktifse, yakƒ±ndaki tehlikeli NPC'leri ragdoll et
        Character = GetCharacter()
        if not Character then return end
        
        local playerRoot = Character:FindFirstChild("HumanoidRootPart")
        if not playerRoot then return end
        
        for _, npcData in ipairs(DangerousNPCs) do
            local npc = npcData.Model
            local distance = npcData.Distance
            
            -- Walk fling range i√ßinde ve ragdoll deƒüilse
            if distance < 25 and not RagdolledNPCs[npc] then
                ApplySmartRagdoll(npc, 1.2) -- Fling bonusu
            end
        end
    end)
    
    -- BLACK HOLE ƒ∞LE ETKƒ∞LE≈ûƒ∞M
    Connections.AutoRagdollBlackHole = RunService.Heartbeat:Connect(function()
        if not Settings.AutoRagdollEnabled then return end
        if not Settings.BlackHoleEnabled then return end
        if not BlackHolePart then return end
        
        local blackHolePos = BlackHolePart.Position
        
        for _, npcData in ipairs(DangerousNPCs) do
            local npc = npcData.Model
            local rootPart = npcData.RootPart
            
            if rootPart then
                local distance = (rootPart.Position - blackHolePos).Magnitude
                
                -- Black hole range i√ßinde ve ragdoll deƒüilse
                if distance < 30 and not RagdolledNPCs[npc] then
                    ApplySmartRagdoll(npc, 1.5) -- Black hole bonusu
                end
            end
        end
    end)
    
    -- NPC √ñL√úM TAKƒ∞Bƒ∞
    Connections.AutoRagdollDeath = workspace.DescendantAdded:Connect(function(descendant)
        if not Settings.AutoRagdollEnabled then return end
        
        if descendant:IsA("Model") then
            local humanoid = descendant:FindFirstChildOfClass("Humanoid")
            if humanoid then
                -- Humanoid √∂ld√ºƒü√ºnde ragdoll'u temizle
                humanoid.Died:Connect(function()
                    wait(0.5)
                    if RagdolledNPCs[descendant] then
                        RemoveSmartRagdoll(descendant)
                    end
                end)
            end
        end
    end)
end

local function DisableSmartAutoRagdoll()
    Settings.AutoRagdollEnabled = false
    
    -- Baƒülantƒ±larƒ± temizle
    if Connections.AutoRagdollScan then Connections.AutoRagdollScan:Disconnect() end
    if Connections.AutoRagdollFling then Connections.AutoRagdollFling:Disconnect() end
    if Connections.AutoRagdollBlackHole then Connections.AutoRagdollBlackHole:Disconnect() end
    if Connections.AutoRagdollDeath then Connections.AutoRagdollDeath:Disconnect() end
    
    -- T√ºm ragdoll'larƒ± temizle
    for npc, _ in pairs(RagdolledNPCs) do
        RemoveSmartRagdoll(npc)
    end
    
    -- Listeleri temizle
    DangerousNPCs = {}
    
    print("‚ùå Akƒ±llƒ± Auto Ragdoll Kapalƒ±")
end

-- RAGDOLL Y√ñNETƒ∞M MEN√úS√ú
local function CreateRagdollManagementMenu()
    local ragdollMenu = Instance.new("ScreenGui")
    ragdollMenu.Name = "RagdollManagementMenu"
    ragdollMenu.ResetOnSpawn = false
    ragdollMenu.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    
    if pcall(function() ragdollMenu.Parent = game:GetService("CoreGui") end) then
        -- Ba≈üarƒ±lƒ±
    else
        return
    end
    
    local mainFrame = Instance.new("Frame")
    mainFrame.Name = "MainFrame"
    mainFrame.Size = UDim2.new(0, 350, 0, 450)
    mainFrame.Position = UDim2.new(0.5, -175, 0.5, -225)
    mainFrame.BackgroundColor3 = Color3.fromRGB(40, 30, 60)
    mainFrame.BorderSizePixel = 0
    mainFrame.Active = true
    mainFrame.Draggable = true
    mainFrame.Parent = ragdollMenu
    
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 12)
    corner.Parent = mainFrame
    
    local stroke = Instance.new("UIStroke")
    stroke.Color = Color3.fromRGB(150, 50, 50)
    stroke.Thickness = 2
    stroke.Parent = mainFrame
    
    -- BA≈ûLIK
    local title = Instance.new("TextLabel")
    title.Size = UDim2.new(1, 0, 0, 60)
    title.BackgroundColor3 = Color3.fromRGB(60, 40, 80)
    title.BorderSizePixel = 0
    title.Text = "üíÄ RAGDOLL MANAGER"
    title.TextColor3 = Color3.fromRGB(255, 255, 255)
    title.TextSize = 22
    title.Font = Enum.Font.GothamBold
    title.Parent = mainFrame
    
    local titleCorner = Instance.new("UICorner")
    titleCorner.CornerRadius = UDim.new(0, 12)
    titleCorner.Parent = title
    
    -- KAPATMA BUTONU
    local closeBtn = Instance.new("TextButton")
    closeBtn.Size = UDim2.new(0, 40, 0, 40)
    closeBtn.Position = UDim2.new(1, -50, 0, 10)
    closeBtn.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
    closeBtn.Text = "X"
    closeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    closeBtn.TextSize = 20
    closeBtn.Font = Enum.Font.GothamBold
    closeBtn.Parent = title
    
    local btnCorner = Instance.new("UICorner")
    btnCorner.CornerRadius = UDim.new(0, 8)
    btnCorner.Parent = closeBtn
    
    closeBtn.MouseButton1Click:Connect(function()
        ragdollMenu:Destroy()
    end)
    
    -- ƒ∞√áERƒ∞K
    local scrollFrame = Instance.new("ScrollingFrame")
    scrollFrame.Name = "ScrollFrame"
    scrollFrame.Size = UDim2.new(1, -20, 1, -80)
    scrollFrame.Position = UDim2.new(0, 10, 0, 70)
    scrollFrame.BackgroundTransparency = 1
    scrollFrame.ScrollBarThickness = 6
    scrollFrame.ScrollBarImageColor3 = Color3.fromRGB(150, 50, 50)
    scrollFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
    scrollFrame.Parent = mainFrame
    
    local content = Instance.new("Frame")
    content.Name = "Content"
    content.Size = UDim2.new(1, 0, 0, 0)
    content.BackgroundTransparency = 1
    content.Parent = scrollFrame
    
    local layout = Instance.new("UIListLayout")
    layout.Padding = UDim.new(0, 10)
    layout.SortOrder = Enum.SortOrder.LayoutOrder
    layout.Parent = content
    
    -- Canvas boyutu g√ºncelleme
    layout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
        scrollFrame.CanvasSize = UDim2.new(0, 0, 0, layout.AbsoluteContentSize.Y + 20)
    end)
    
    -- RAGDOLL SAYACI
    local counterFrame = Instance.new("Frame")
    counterFrame.Name = "CounterFrame"
    counterFrame.Size = UDim2.new(1, 0, 0, 60)
    counterFrame.BackgroundColor3 = Color3.fromRGB(50, 30, 40)
    counterFrame.BorderSizePixel = 0
    counterFrame.LayoutOrder = 1
    counterFrame.Parent = content
    
    local counterCorner = Instance.new("UICorner")
    counterCorner.CornerRadius = UDim.new(0, 8)
    counterCorner.Parent = counterFrame
    
    local counterLabel = Instance.new("TextLabel")
    counterLabel.Size = UDim2.new(1, 0, 0.5, 0)
    counterLabel.BackgroundTransparency = 1
    counterLabel.Text = "Active Ragdolls: " .. #RagdolledNPCs
    counterLabel.TextColor3 = Color3.fromRGB(255, 150, 150)
    counterLabel.TextSize = 18
    counterLabel.Font = Enum.Font.GothamBold
    counterLabel.Parent = counterFrame
    
    local infoLabel = Instance.new("TextLabel")
    infoLabel.Size = UDim2.new(1, 0, 0.5, 0)
    infoLabel.Position = UDim2.new(0, 0, 0.5, 0)
    infoLabel.BackgroundTransparency = 1
    infoLabel.Text = "üíÄ NPCs currently ragdolled"
    infoLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
    infoLabel.TextSize = 14
    infoLabel.Font = Enum.Font.Gotham
    infoLabel.Parent = counterFrame
    
    -- BUTONLAR
    local buttonData = {
        {Name = "üîÑ Refresh List", Color = Color3.fromRGB(100, 150, 255), Action = function()
            -- Listeyi yenile
            counterLabel.Text = "Active Ragdolls: " .. #RagdolledNPCs
        end},
        {Name = "üóëÔ∏è Clear All Ragdolls", Color = Color3.fromRGB(255, 100, 100), Action = function()
            for npc, _ in pairs(RagdolledNPCs) do
                RemoveSmartRagdoll(npc)
            end
            counterLabel.Text = "Active Ragdolls: 0"
        end},
        {Name = "üéØ Ragdoll All Dangerous", Color = Color3.fromRGB(255, 150, 50), Action = function()
            for _, npcData in ipairs(DangerousNPCs) do
                if not RagdolledNPCs[npcData.Model] then
                    ApplySmartRagdoll(npcData.Model, 1)
                end
            end
            wait(0.5)
            counterLabel.Text = "Active Ragdolls: " .. #RagdolledNPCs
        end},
        {Name = "üõ°Ô∏è Toggle Auto Ragdoll", Color = Color3.fromRGB(100, 255, 100), Action = function()
            if Settings.AutoRagdollEnabled then
                DisableSmartAutoRagdoll()
            else
                EnableSmartAutoRagdoll()
            end
        end},
        {Name = "üìä NPC Detection Settings", Color = Color3.fromRGB(180, 100, 255), Action = function()
            -- Detection ayarlarƒ± men√ºs√º
            print("NPC Detection Settings:")
            print("‚Ä¢ Range: " .. Settings.RagdollDetectionRange .. " studs")
            print("‚Ä¢ Cooldown: " .. NPCScanCooldown .. " seconds")
            print("‚Ä¢ Dangerous NPCs found: " .. #DangerousNPCs)
        end}
    }
    
    for i, btnInfo in ipairs(buttonData) do
        local button = Instance.new("TextButton")
        button.Size = UDim2.new(1, 0, 0, 50)
        button.BackgroundColor3 = btnInfo.Color
        button.Text = btnInfo.Name
        button.TextColor3 = Color3.fromRGB(255, 255, 255)
        button.TextSize = 16
        button.Font = Enum.Font.GothamSemibold
        button.LayoutOrder = i + 1
        button.Parent = content
        
        local btnCorner = Instance.new("UICorner")
        btnCorner.CornerRadius = UDim.new(0, 8)
        btnCorner.Parent = button
        
        button.MouseButton1Click:Connect(function()
            btnInfo.Action()
        end)
    end
    
    -- NPC Lƒ∞STESƒ∞
    local listHeader = Instance.new("TextLabel")
    listHeader.Size = UDim2.new(1, 0, 0, 40)
    listHeader.BackgroundColor3 = Color3.fromRGB(60, 40, 50)
    listHeader.BorderSizePixel = 0
    listHeader.Text = "üéØ Detected Dangerous NPCs"
    listHeader.TextColor3 = Color3.fromRGB(255, 200, 200)
    listHeader.TextSize = 16
    listHeader.Font = Enum.Font.GothamBold
    listHeader.LayoutOrder = #buttonData + 2
    listHeader.Parent = content
    
    local headerCorner = Instance.new("UICorner")
    headerCorner.CornerRadius = UDim.new(0, 8)
    headerCorner.Parent = listHeader
    
    -- NPC listesini g√ºncelleme loop'u
    spawn(function()
        while ragdollMenu and ragdollMenu.Parent do
            -- Counter'ƒ± g√ºncelle
            counterLabel.Text = "Active Ragdolls: " .. table.size(RagdolledNPCs)
            
            -- NPC listesini g√ºncelle
            for _, child in pairs(content:GetChildren()) do
                if child.Name == "NPCItem" then
                    child:Destroy()
                end
            end
            
            local startOrder = #buttonData + 3
            
            for i, npcData in ipairs(DangerousNPCs) do
                if i <= 10 then -- Sadece ilk 10'u g√∂ster
                    local npcItem = Instance.new("Frame")
                    npcItem.Name = "NPCItem"
                    npcItem.Size = UDim2.new(1, 0, 0, 40)
                    npcItem.BackgroundColor3 = Color3.fromRGB(40, 40, 60)
                    npcItem.BorderSizePixel = 0
                    npcItem.LayoutOrder = startOrder + i
                    npcItem.Parent = content
                    
                    local itemCorner = Instance.new("UICorner")
                    itemCorner.CornerRadius = UDim.new(0, 6)
                    itemCorner.Parent = npcItem
                    
                    local nameLabel = Instance.new("TextLabel")
                    nameLabel.Size = UDim2.new(0.6, -10, 1, 0)
                    nameLabel.Position = UDim2.new(0, 10, 0, 0)
                    nameLabel.BackgroundTransparency = 1
                    nameLabel.Text = npcData.Model.Name
                    nameLabel.TextColor3 = Color3.fromRGB(255, 150, 150)
                    nameLabel.TextSize = 14
                    nameLabel.Font = Enum.Font.Gotham
                    nameLabel.TextXAlignment = Enum.TextXAlignment.Left
                    nameLabel.Parent = npcItem
                    
                    local distanceLabel = Instance.new("TextLabel")
                    distanceLabel.Size = UDim2.new(0.4, -10, 1, 0)
                    distanceLabel.Position = UDim2.new(0.6, 0, 0, 0)
                    distanceLabel.BackgroundTransparency = 1
                    distanceLabel.Text = math.floor(npcData.Distance) .. " studs"
                    distanceLabel.TextColor3 = Color3.fromRGB(200, 200, 255)
                    distanceLabel.TextSize = 13
                    distanceLabel.Font = Enum.Font.Gotham
                    distanceLabel.TextXAlignment = Enum.TextXAlignment.Right
                    distanceLabel.Parent = npcItem
                end
            end
            
            wait(1)
        end
    end)
    
    return ragdollMenu
end

-- RAGDOLL MEN√úS√úN√ú A√á
local function OpenRagdollMenu()
    -- Eski men√ºy√º temizle
    local oldMenu = game:GetService("CoreGui"):FindFirstChild("RagdollManagementMenu")
    if oldMenu then oldMenu:Destroy() end
    
    -- Yeni men√º olu≈ütur
    CreateRagdollManagementMenu()
end

-- KARAKTER DEƒûƒ∞≈ûƒ∞KLƒ∞ƒûƒ∞ ƒ∞√áƒ∞N OTOMATƒ∞K AYARLAMA
Player.CharacterAdded:Connect(function(char)
    Character = char
    HumanoidRootPart = char:WaitForChild("HumanoidRootPart", 10)
    
    -- Auto Ragdoll aktifse yeniden ba≈ülat
    if Settings.AutoRagdollEnabled then
        wait(1)
        DisableSmartAutoRagdoll()
        EnableSmartAutoRagdoll()
    end
end)

-- OYUN BA≈ûLANGICI Bƒ∞LGƒ∞ MESAJI
spawn(function()
    wait(1)
    print("=== PART 6 Y√úKLENDƒ∞ ===")
    print("üì¶ Yeni √ñzellikler:")
    print("")
    print("   ‚úÖ GELƒ∞≈ûMƒ∞≈û NPC TESPƒ∞T Sƒ∞STEMƒ∞")
    print("     ‚Ä¢ 100+ tehlikeli pattern")
    print("     ‚Ä¢ 50+ g√ºvenli pattern")
    print("     ‚Ä¢ Script analizi")
    print("     ‚Ä¢ Davranƒ±≈ü analizi (mesafe, hƒ±z, bakƒ±≈ü)")
    print("     ‚Ä¢ Puanlama sistemi (danger/safe score)")
    print("")
    print("   ‚úÖ AKILLI AUTO RAGDOLL")
    print("     ‚Ä¢ Walk fling ile tam uyum")
    print("     ‚Ä¢ Black hole ile etkile≈üim")
    print("     ‚Ä¢ Mesafeye g√∂re g√º√ß ayarƒ±")
    print("     ‚Ä¢ Otomatik kurtulma (10 saniye)")
    print("     ‚Ä¢ G√∂rsel efektler (ƒ±≈üƒ±k, highlight)")
    print("")
    print("   ‚úÖ RAGDOLL Y√ñNETƒ∞M MEN√úS√ú")
    print("     ‚Ä¢ Aktif ragdoll sayacƒ±")
    print("     ‚Ä¢ Tespit edilen NPC listesi")
    print("     ‚Ä¢ Toplu i≈ülem butonlarƒ±")
    print("     ‚Ä¢ Detection ayarlarƒ±")
    print("")
    print("   ‚öôÔ∏è Sistem √ñzellikleri:")
    print("     ‚Ä¢ Ger√ßek zamanlƒ± NPC tarama")
    print("     ‚Ä¢ Performans dostu (0.5s cooldown)")
    print("     ‚Ä¢ Otomatik temizleme")
    print("     ‚Ä¢ Karakter deƒüi≈üiminde yeniden baƒülanma")
    print("==========================")
end)-- Universal Tool v5.0 - Part 7/7
-- Sƒ∞STEM Bƒ∞RLE≈ûTƒ∞RME + HATA KONTROLLERƒ∞ + OPTƒ∞Mƒ∞ZASYON

-- T√úM Sƒ∞STEMLERƒ∞ Bƒ∞RLE≈ûTƒ∞REN ANA KONTROL Sƒ∞STEMƒ∞
local UniversalSystems = {
    Active = {},
    Settings = Settings,
    Connections = Connections,
    Performance = {
        LastCleanup = 0,
        CleanupInterval = 30, -- 30 saniyede bir temizlik
        MemoryUsage = 0,
        FPS = 60,
        UpdateRate = 1 -- Saniyede bir g√ºncelleme
    }
}

-- GLOBAL HATA YAKALAMA Sƒ∞STEMƒ∞
local function SafeCall(func, name, ...)
    local success, result = pcall(func, ...)
    if not success then
        warn("‚ö†Ô∏è [" .. name .. "] Hata: " .. tostring(result))
        return nil
    end
    return result
end

-- PERFORMANS MONƒ∞T√ñR√ú
local function InitializePerformanceMonitor()
    local monitor = {
        FrameCount = 0,
        LastCheck = tick(),
        MinFPS = 60,
        MaxFPS = 0,
        AverageFPS = 60
    }
    
    Connections.PerformanceMonitor = RunService.RenderStepped:Connect(function()
        monitor.FrameCount = monitor.FrameCount + 1
        
        local currentTime = tick()
        if currentTime - monitor.LastCheck >= 1 then
            local fps = monitor.FrameCount
            monitor.FrameCount = 0
            monitor.LastCheck = currentTime
            
            UniversalSystems.Performance.FPS = fps
            
            -- FPS kayƒ±tlarƒ±
            monitor.MinFPS = math.min(monitor.MinFPS, fps)
            monitor.MaxFPS = math.max(monitor.MaxFPS, fps)
            monitor.AverageFPS = (monitor.AverageFPS * 0.9) + (fps * 0.1)
            
            -- D√º≈ü√ºk FPS uyarƒ±sƒ±
            if fps < 30 then
                -- Otomatik optimizasyon
                UniversalSystems.Performance.UpdateRate = 2 -- G√ºncelleme hƒ±zƒ±nƒ± yarƒ±ya indir
            elseif fps > 50 then
                UniversalSystems.Performance.UpdateRate = 1 -- Normal hƒ±z
            end
        end
    end)
    
    return monitor
end

-- OTOMATƒ∞K TEMƒ∞ZLƒ∞K Sƒ∞STEMƒ∞
local function PerformCleanup()
    local currentTime = tick()
    if currentTime - UniversalSystems.Performance.LastCleanup < UniversalSystems.Performance.CleanupInterval then
        return
    end
    
    UniversalSystems.Performance.LastCleanup = currentTime
    
    print("üßπ Sistem temizliƒüi ba≈ülatƒ±lƒ±yor...")
    
    -- GARBAGE COLLECTION
    local memBefore = collectgarbage("count")
    collectgarbage("collect")
    local memAfter = collectgarbage("count")
    UniversalSystems.Performance.MemoryUsage = memAfter
    
    print(string.format("   ‚Ä¢ Bellek: %.2f MB -> %.2f MB (%.2f MB tasarruf)", 
        memBefore/1024, memAfter/1024, (memBefore-memAfter)/1024))
    
    -- √ñL√ú NPC'LERƒ∞ TEMƒ∞ZLE
    local deadNPCs = 0
    for npc, data in pairs(RagdolledNPCs) do
        if not npc or not npc.Parent then
            RemoveSmartRagdoll(npc)
            deadNPCs = deadNPCs + 1
        elseif data.Humanoid and data.Humanoid.Health <= 0 then
            RemoveSmartRagdoll(npc)
            deadNPCs = deadNPCs + 1
        end
    end
    
    if deadNPCs > 0 then
        print("   ‚Ä¢ " .. deadNPCs .. " √∂l√º NPC ragdoll temizlendi")
    end
    
    -- √ñL√ú ESP'LERƒ∞ TEMƒ∞ZLE
    local deadESP = 0
    for npc, data in pairs(ESPObjects) do
        if not npc or not npc.Parent then
            RemoveESPForNPC(npc)
            deadESP = deadESP + 1
        end
    end
    
    for item, data in pairs(ItemESPObjects) do
        if not item or not item.Parent then
            RemoveItemESP(item)
            deadESP = deadESP + 1
        end
    end
    
    for player, data in pairs(PlayerESPObjects) do
        if not player or not player.Parent or not data.Character or not data.Character.Parent then
            RemovePlayerESP(player)
            deadESP = deadESP + 1
        end
    end
    
    if deadESP > 0 then
        print("   ‚Ä¢ " .. deadESP .. " √∂l√º ESP temizlendi")
    end
    
    -- BAƒûLANTILARI KONTROL ET
    local deadConnections = 0
    for name, connection in pairs(Connections) do
        if not connection or not connection.Connected then
            Connections[name] = nil
            deadConnections = deadConnections + 1
        end
    end
    
    if deadConnections > 0 then
        print("   ‚Ä¢ " .. deadConnections .. " √∂l√º baƒülantƒ± temizlendi")
    end
    
    -- NO CLIP PAR√áALARINI KONTROL ET
    local deadNoClip = 0
    for i = #NoClipParts, 1, -1 do
        local data = NoClipParts[i]
        if not data.Part or not data.Part.Parent then
            table.remove(NoClipParts, i)
            deadNoClip = deadNoClip + 1
        end
    end
    
    if deadNoClip > 0 then
        print("   ‚Ä¢ " .. deadNoClip .. " √∂l√º NoClip par√ßasƒ± temizlendi")
    end
    
    -- MOBƒ∞LE GUI KONTROL√ú
    if MobileGUI and not MobileGUI.GUI.Parent then
        print("   ‚Ä¢ Mobile GUI yeniden olu≈üturuluyor...")
        InitializeGUI()
    end
    
    print("‚úÖ Sistem temizliƒüi tamamlandƒ±!")
end

-- Sƒ∞STEM DURUM Y√ñNETƒ∞Cƒ∞Sƒ∞
local SystemManager = {
    Systems = {
        Fly = {Enabled = false, EnableFunc = EnableMobileFly, DisableFunc = DisableMobileFly},
        NoClip = {Enabled = false, EnableFunc = EnableEnhancedNoClip, DisableFunc = DisableEnhancedNoClip},
        GodMode = {Enabled = false, EnableFunc = EnableGodMode, DisableFunc = DisableGodMode},
        FullBright = {Enabled = false, EnableFunc = EnableFullBright, DisableFunc = DisableFullBright},
        ESP = {Enabled = false, EnableFunc = function() 
            EnableESP()
            EnableItemESP()
            EnablePlayerESP()
        end, DisableFunc = function()
            DisableESP()
            DisableItemESP()
            DisablePlayerESP()
        end},
        BlackHole = {Enabled = false, EnableFunc = EnableAdvancedBlackHole, DisableFunc = DisableAdvancedBlackHole},
        WalkFling = {Enabled = false, EnableFunc = EnableWalkFling, DisableFunc = DisableWalkFling},
        AutoRagdoll = {Enabled = false, EnableFunc = EnableSmartAutoRagdoll, DisableFunc = DisableSmartAutoRagdoll}
    },
    
    ToggleSystem = function(self, systemName)
        local system = self.Systems[systemName]
        if not system then
            warn("‚ö†Ô∏è Sistem bulunamadƒ±: " .. systemName)
            return
        end
        
        system.Enabled = not system.Enabled
        
        SafeCall(function()
            if system.Enabled then
                system.EnableFunc()
                print("‚úÖ " .. systemName .. " sistemi AKTƒ∞F")
            else
                system.DisableFunc()
                print("‚ùå " .. systemName .. " sistemi KAPALI")
            end
        end, "ToggleSystem_" .. systemName)
        
        -- GUI g√ºncellemesi
        if GUIFunctions and GUIFunctions.toggles[systemName] then
            GUIFunctions.toggles[systemName].SetState(system.Enabled)
        end
        
        return system.Enabled
    end,
    
    EnableAll = function(self)
        print("‚ö° T√úM Sƒ∞STEMLER AKTƒ∞F EDƒ∞Lƒ∞YOR...")
        for name, system in pairs(self.Systems) do
            if not system.Enabled then
                self:ToggleSystem(name)
                wait(0.1) -- Sistemler arasƒ± gecikme
            end
        end
        print("‚úÖ T√ºm sistemler aktif!")
    end,
    
    DisableAll = function(self)
        print("üõë T√úM Sƒ∞STEMLER KAPATILIYOR...")
        for name, system in pairs(self.Systems) do
            if system.Enabled then
                self:ToggleSystem(name)
                wait(0.1) -- Sistemler arasƒ± gecikme
            end
        end
        print("‚úÖ T√ºm sistemler kapalƒ±!")
    end,
    
    GetStatus = function(self)
        local status = {}
        for name, system in pairs(self.Systems) do
            status[name] = system.Enabled
        end
        return status
    end,
    
    GetPerformance = function(self)
        return UniversalSystems.Performance
    end
}

-- KOMUT Sƒ∞STEMƒ∞ (CHAT KONTROLLERƒ∞)
local function InitializeCommandSystem()
    local commands = {
        ["/help"] = function()
            print("=== üéÆ UNIVERSAL TOOL v5.0 KOMUTLARI ===")
            print("/help - Bu mesajƒ± g√∂ster")
            print("/status - Sistem durumunu g√∂ster")
            print("/toggle [sistem] - Sistem a√ß/kapa")
            print("/enableall - T√ºm sistemleri a√ß")
            print("/disableall - T√ºm sistemleri kapat")
            print("/cleanup - Temizlik yap")
            print("/ragdollmenu - Ragdoll men√ºs√ºn√º a√ß")
            print("/bringmenu - Bring men√ºs√ºn√º a√ß")
            print("/performance - Performans bilgisi")
            print("======================================")
        end,
        
        ["/status"] = function()
            local status = SystemManager:GetStatus()
            print("=== üìä Sƒ∞STEM DURUMU ===")
            for name, enabled in pairs(status) do
                print(string.format("   %s: %s", name, enabled and "‚úÖ AKTƒ∞F" or "‚ùå KAPALI"))
            end
            print("======================")
        end,
        
        ["/toggle"] = function(args)
            if not args or args == "" then
                print("Kullanƒ±m: /toggle [sistem]")
                print("Sistemler: fly, noclip, godmode, fullbright, esp, blackhole, fling, autoragdoll")
                return
            end
            
            local systemName = args:lower()
            local systemMap = {
                ["fly"] = "Fly",
                ["noclip"] = "NoClip",
                ["godmode"] = "GodMode",
                ["fullbright"] = "FullBright",
                ["esp"] = "ESP",
                ["blackhole"] = "BlackHole",
                ["fling"] = "WalkFling",
                ["autoragdoll"] = "AutoRagdoll"
            }
            
            local mappedName = systemMap[systemName]
            if mappedName then
                SystemManager:ToggleSystem(mappedName)
            else
                print("‚ö†Ô∏è Ge√ßersiz sistem: " .. systemName)
            end
        end,
        
        ["/enableall"] = function()
            SystemManager:EnableAll()
        end,
        
        ["/disableall"] = function()
            SystemManager:DisableAll()
        end,
        
        ["/cleanup"] = function()
            PerformCleanup()
        end,
        
        ["/ragdollmenu"] = function()
            OpenRagdollMenu()
        end,
        
        ["/bringmenu"] = function()
            OpenBringMenu()
        end,
        
        ["/performance"] = function()
            local perf = SystemManager:GetPerformance()
            print("=== üìà PERFORMANS Bƒ∞LGƒ∞Sƒ∞ ===")
            print(string.format("   ‚Ä¢ FPS: %d", perf.FPS))
            print(string.format("   ‚Ä¢ Bellek: %.2f MB", perf.MemoryUsage/1024))
            print(string.format("   ‚Ä¢ G√ºncelleme Hƒ±zƒ±: %dx", perf.UpdateRate))
            print(string.format("   ‚Ä¢ Son Temizlik: %.0f saniye √∂nce", tick() - perf.LastCleanup))
            print("=============================")
        end
    }
    
    -- CHAT MESSAGE LISTENER
    local function ProcessMessage(message)
        if message:sub(1, 1) == "/" then
            local parts = {}
            for part in message:gmatch("%S+") do
                table.insert(parts, part)
            end
            
            local command = parts[1]:lower()
            local args = message:sub(#command + 2)
            
            if commands[command] then
                SafeCall(function()
                    commands[command](args)
                end, "Command_" .. command)
                return true
            else
                print("‚ö†Ô∏è Bilinmeyen komut: " .. command)
                print("   /help yazarak t√ºm komutlarƒ± g√∂rebilirsin")
                return true
            end
        end
        return false
    end
    
    -- ROBLOX CHAT Sƒ∞STEMƒ∞
    if game:GetService("TextChatService") then
        local textChatService = game:GetService("TextChatService")
        Connections.ChatMessage = textChatService.MessageReceived:Connect(function(message)
            if message.TextSource then
                local player = message.TextSource.UserId and Players:GetPlayerByUserId(message.TextSource.UserId)
                if player == Player then
                    ProcessMessage(message.Text)
                end
            end
        end)
    else
        -- Eski chat sistemi
        local playerGui = Player:WaitForChild("PlayerGui")
        local chatFrame = playerGui:FindFirstChild("Chat") or playerGui:FindFirstChild("ChatFrame")
        
        if chatFrame then
            local chatBar = chatFrame:FindFirstChild("ChatBar")
            if chatBar then
                Connections.ChatBar = chatBar.FocusLost:Connect(function(enterPressed)
                    if enterPressed then
                        local message = chatBar.Text
                        if ProcessMessage(message) then
                            chatBar.Text = ""
                        end
                    end
                end)
            end
        end
    end
    
    -- KONSOL KOMUTLARI
    print("‚úÖ Komut sistemi y√ºklendi!")
    print("   ‚Ä¢ /help - Komut listesi")
    print("   ‚Ä¢ Chat veya konsoldan kullanabilirsin")
end

-- OTOMATƒ∞K KURTARMA Sƒ∞STEMƒ∞
local function InitializeRecoverySystem()
    local recovery = {
        LastCheck = tick(),
        CheckInterval = 10, -- 10 saniyede bir kontrol
        MaxRecoveryAttempts = 3,
        RecoveryAttempts = {}
    }
    
    Connections.RecoveryCheck = RunService.Heartbeat:Connect(function()
        local currentTime = tick()
        if currentTime - recovery.LastCheck < recovery.CheckInterval then
            return
        end
        
        recovery.LastCheck = currentTime
        
        -- KARAKTER KONTROL√ú
        if not Character or not Character.Parent then
            Character = GetCharacter()
            if Character then
                HumanoidRootPart = Character:WaitForChild("HumanoidRootPart", 5)
                print("üîÑ Karakter yeniden y√ºklendi")
            end
        end
        
        -- Sƒ∞STEM KONTROLLERƒ∞
        for systemName, system in pairs(SystemManager.Systems) do
            if system.Enabled then
                -- Sistemin hala √ßalƒ±≈ütƒ±ƒüƒ±nƒ± kontrol et
                local isWorking = true
                
                if systemName == "Fly" then
                    isWorking = FlyBodyGyro and FlyBodyGyro.Parent
                elseif systemName == "NoClip" then
                    isWorking = Settings.NoClipEnabled
                elseif systemName == "GodMode" then
                    isWorking = GodModeClone and GodModeClone.Parent
                elseif systemName == "ESP" then
                    isWorking = Settings.ESPEnabled
                elseif systemName == "BlackHole" then
                    isWorking = BlackHolePart and BlackHolePart.Parent
                elseif systemName == "WalkFling" then
                    isWorking = FlingPart and FlingPart.Parent
                elseif systemName == "AutoRagdoll" then
                    isWorking = Settings.AutoRagdollEnabled
                end
                
                if not isWorking then
                    -- Kurtarma denemesi
                    recovery.RecoveryAttempts[systemName] = (recovery.RecoveryAttempts[systemName] or 0) + 1
                    
                    if recovery.RecoveryAttempts[systemName] <= recovery.MaxRecoveryAttempts then
                        print("‚ö†Ô∏è " .. systemName .. " sistemi √ß√∂kt√º, kurtarƒ±lƒ±yor... (" .. 
                              recovery.RecoveryAttempts[systemName] .. "/" .. recovery.MaxRecoveryAttempts .. ")")
                        
                        SafeCall(function()
                            system.DisableFunc()
                            wait(0.1)
                            system.EnableFunc()
                        end, "Recovery_" .. systemName)
                    else
                        print("‚ùå " .. systemName .. " sistemi kurtarƒ±lamadƒ±, kapatƒ±lƒ±yor...")
                        SystemManager:ToggleSystem(systemName)
                        recovery.RecoveryAttempts[systemName] = nil
                    end
                else
                    -- √áalƒ±≈üƒ±yor, kurtarma sayacƒ±nƒ± sƒ±fƒ±rla
                    recovery.RecoveryAttempts[systemName] = nil
                end
            end
        end
    end)
end

-- G√úVENLƒ∞K KONTROLLERƒ∞
local function InitializeSecurityChecks()
    local security = {
        LastAntiAfk = tick(),
        AntiAfkInterval = 30, -- 30 saniyede bir
        AntiKickEnabled = true
    }
    
    -- ANTI-AFK
    Connections.AntiAfk = RunService.Heartbeat:Connect(function()
        local currentTime = tick()
        if currentTime - security.LastAntiAfk >= security.AntiAfkInterval then
            security.LastAntiAfk = currentTime
            
            -- VirtualInputManager ile tu≈ü sim√ºlasyonu
            pcall(function()
                VirtualInputManager:SendKeyEvent(true, Enum.KeyCode.Space, false, game)
                wait(0.1)
                VirtualInputManager:SendKeyEvent(false, Enum.KeyCode.Space, false, game)
            end)
        end
    end)
    
    -- ANTI-KICK PROTECTION
    if game:GetService("NetworkClient") then
        local networkClient = game:GetService("NetworkClient")
        
        Connections.NetworkError = networkClient.ChildAdded:Connect(function(child)
            if child:IsA("NetworkReplicator") then
                child:GetPropertyChangedSignal("ConnectionState"):Connect(function()
                    if child.ConnectionState == Enum.ConnectionState.Disconnected then
                        print("‚ö†Ô∏è Baƒülantƒ± kesildi, sistemler korunuyor...")
                        -- Baƒülantƒ± kesilirse sistemleri koru
                    end
                end)
            end
        end)
    end
end

-- HOTKEY Sƒ∞STEMƒ∞
local function InitializeHotkeySystem()
    local hotkeys = {
        [Enum.KeyCode.F1] = function() SystemManager:ToggleSystem("Fly") end,
        [Enum.KeyCode.F2] = function() SystemManager:ToggleSystem("NoClip") end,
        [Enum.KeyCode.F3] = function() SystemManager:ToggleSystem("GodMode") end,
        [Enum.KeyCode.F4] = function() SystemManager:ToggleSystem("FullBright") end,
        [Enum.KeyCode.F5] = function() SystemManager:ToggleSystem("ESP") end,
        [Enum.KeyCode.F6] = function() SystemManager:ToggleSystem("BlackHole") end,
        [Enum.KeyCode.F7] = function() SystemManager:ToggleSystem("WalkFling") end,
        [Enum.KeyCode.F8] = function() SystemManager:ToggleSystem("AutoRagdoll") end,
        [Enum.KeyCode.F9] = function() 
            if Settings.FlyEnabled and Settings.NoClipEnabled then
                SystemManager:ToggleSystem("Fly")
                SystemManager:ToggleSystem("NoClip")
            else
                SystemManager:ToggleSystem("Fly")
                SystemManager:ToggleSystem("NoClip")
            end
        end,
        [Enum.KeyCode.F10] = function() SystemManager:DisableAll() end,
        [Enum.KeyCode.F11] = function() PerformCleanup() end,
        [Enum.KeyCode.F12] = function() 
            if MobileGUI and MobileGUI.GUI then
                MobileGUI.GUI.Enabled = not MobileGUI.GUI.Enabled
                print(MobileGUI.GUI.Enabled and "‚úÖ GUI G√ñSTERƒ∞LDƒ∞" or "‚ùå GUI Gƒ∞ZLENDƒ∞")
            end
        end,
        [Enum.KeyCode.Insert] = function() OpenBringMenu() end,
        [Enum.KeyCode.Delete] = function() OpenRagdollMenu() end,
        [Enum.KeyCode.Home] = function() 
            print("=== üîß HIZLI AYARLAR ===")
            print("F1: Fly | F2: NoClip | F3: GodMode")
            print("F4: FullBright | F5: ESP | F6: BlackHole")
            print("F7: WalkFling | F8: AutoRagdoll")
            print("F9: Fly+NoClip | F10: T√ºm√ºn√º Kapat")
            print("F11: Temizlik | F12: GUI G√∂ster/Gizle")
            print("Insert: Bring Menu | Delete: Ragdoll Menu")
            print("========================")
        end
    }
    
    Connections.HotkeyInput = UserInputService.InputBegan:Connect(function(input, gameProcessed)
        if gameProcessed then return end
        
        if input.KeyCode and hotkeys[input.KeyCode] then
            SafeCall(hotkeys[input.KeyCode], "Hotkey_" .. tostring(input.KeyCode))
        end
    end)
    
    print("‚úÖ Hotkey sistemi y√ºklendi!")
    print("   ‚Ä¢ F1-F12: Hƒ±zlƒ± sistem kontrol√º")
    print("   ‚Ä¢ Insert: Bring Menu")
    print("   ‚Ä¢ Delete: Ragdoll Menu")
    print("   ‚Ä¢ Home: Hotkey listesi")
end

-- MOBƒ∞LE GESTURE Sƒ∞STEMƒ∞
local function InitializeMobileGestures()
    if not UserInputService.TouchEnabled then return end
    
    local gestures = {
        DoubleTap = {
            LastTap = 0,
            TapInterval = 0.3,
            Handler = function(position)
                -- √áift tƒ±klama: Fly a√ß/kapa
                SystemManager:ToggleSystem("Fly")
            end
        },
        
        SwipeUp = {
            Handler = function()
                -- Yukarƒ± kaydƒ±rma: God Mode a√ß/kapa
                SystemManager:ToggleSystem("GodMode")
            end
        },
        
        SwipeDown = {
            Handler = function()
                -- A≈üaƒüƒ± kaydƒ±rma: Fullbright a√ß/kapa
                SystemManager:ToggleSystem("FullBright")
            end
        },
        
        SwipeLeft = {
            Handler = function()
                -- Sola kaydƒ±rma: Bring Menu a√ß
                OpenBringMenu()
            end
        },
        
        SwipeRight = {
            Handler = function()
                -- Saƒüa kaydƒ±rma: Ragdoll Menu a√ß
                OpenRagdollMenu()
            end
        },
        
        LongPress = {
            Handler = function(position)
                -- Uzun basma: T√ºm ESP'ler a√ß/kapa
                SystemManager:ToggleSystem("ESP")
            end
        }
    }
    
    -- GESTURE DETECTION
    local touchStartPos = nil
    local touchStartTime = 0
    local touchMoved = false
    
    Connections.TouchBegan = UserInputService.TouchStarted:Connect(function(touch, gameProcessed)
        if gameProcessed then return end
        
        touchStartPos = touch.Position
        touchStartTime = tick()
        touchMoved = false
        
        -- √áift tƒ±klama kontrol√º
        local currentTime = tick()
        if currentTime - gestures.DoubleTap.LastTap < gestures.DoubleTap.TapInterval then
            gestures.DoubleTap.Handler(touch.Position)
            gestures.DoubleTap.LastTap = 0
        else
            gestures.DoubleTap.LastTap = currentTime
        end
    end)
    
    Connections.TouchMoved = UserInputService.TouchMoved:Connect(function(touch, gameProcessed)
        if gameProcessed then return end
        touchMoved = true
    end)
    
    Connections.TouchEnded = UserInputService.TouchEnded:Connect(function(touch, gameProcessed)
        if gameProcessed then return end
        if not touchStartPos then return end
        
        local touchEndPos = touch.Position
        local touchDuration = tick() - touchStartTime
        
        -- UZUN BASMA
        if touchDuration > 0.5 and not touchMoved then
            gestures.LongPress.Handler(touchEndPos)
            return
        end
        
        -- KAYDIRMA TESPƒ∞Tƒ∞
        if touchMoved and touchDuration < 0.5 then
            local delta = touchEndPos - touchStartPos
            local distance = delta.Magnitude
            
            if distance > 50 then -- Minimum kaydƒ±rma mesafesi
                local angle = math.atan2(delta.Y, delta.X) * (180 / math.pi)
                
                if math.abs(angle) < 45 then -- Saƒü
                    gestures.SwipeRight.Handler()
                elseif math.abs(angle) > 135 then -- Sol
                    gestures.SwipeLeft.Handler()
                elseif angle > 45 and angle < 135 then -- A≈üaƒüƒ±
                    gestures.SwipeDown.Handler()
                else -- Yukarƒ±
                    gestures.SwipeUp.Handler()
                end
            end
        end
        
        touchStartPos = nil
    end)
    
    print("‚úÖ Mobile gesture sistemi y√ºklendi!")
    print("   ‚Ä¢ üëÜ √áift tƒ±k: Fly a√ß/kapa")
    print("   ‚Ä¢ ‚¨ÜÔ∏è Yukarƒ± kaydƒ±r: God Mode")
    print("   ‚Ä¢ ‚¨áÔ∏è A≈üaƒüƒ± kaydƒ±r: Fullbright")
    print("   ‚Ä¢ ‚¨ÖÔ∏è Sola kaydƒ±r: Bring Menu")
    print("   ‚Ä¢ ‚û°Ô∏è Saƒüa kaydƒ±r: Ragdoll Menu")
    print("   ‚Ä¢ üëÜ Uzun bas: ESP a√ß/kapa")
end

-- OTOMATƒ∞K BA≈ûLANGI√á AYARLARI
local function ApplyDefaultSettings()
    -- Varsayƒ±lan ayarlar
    local defaultSettings = {
        FlySpeed = 50,
        PullForce = 50,
        PullRadius = 150,
        RagdollDetectionRange = 100,
        ESPUpdateRate = 5,
        FlingMultiplier = 100
    }
    
    for key, value in pairs(defaultSettings) do
        Settings[key] = value
    end
    
    -- GUI varsayƒ±lan pozisyonu
    if MobileGUI and MobileGUI.GUI then
        local mainFrame = MobileGUI.GUI:FindFirstChild("MainFrame")
        if mainFrame then
            mainFrame.Position = UDim2.new(0, 20, 0.5, -250)
        end
    end
end

-- ANA BA≈ûLATMA FONKSƒ∞YONU
local function InitializeUniversalTool()
    print("\n" .. string.rep("=", 50))
    print("      üåÄ UNIVERSAL TOOL v5.0 - DELTA EXECUTOR")
    print(string.rep("=", 50))
    
    -- PERFORMANS MONƒ∞T√ñR√ú BA≈ûLAT
    SafeCall(InitializePerformanceMonitor, "PerformanceMonitor")
    
    -- G√úVENLƒ∞K Sƒ∞STEMLERƒ∞
    SafeCall(InitializeSecurityChecks, "SecurityChecks")
    
    -- KURTARMA Sƒ∞STEMƒ∞
    SafeCall(InitializeRecoverySystem, "RecoverySystem")
    
    -- KOMUT Sƒ∞STEMƒ∞
    SafeCall(InitializeCommandSystem, "CommandSystem")
    
    -- HOTKEY Sƒ∞STEMƒ∞
    SafeCall(InitializeHotkeySystem, "HotkeySystem")
    
    -- MOBƒ∞LE GESTURE Sƒ∞STEMƒ∞
    SafeCall(InitializeMobileGestures, "MobileGestures")
    
    -- Varsayƒ±lan ayarlarƒ± uygula
    SafeCall(ApplyDefaultSettings, "DefaultSettings")
    
    -- OTOMATƒ∞K TEMƒ∞ZLƒ∞K LOOP'U
    Connections.AutoCleanup = RunService.Heartbeat:Connect(function()
        PerformCleanup()
    end)
    
    -- Sƒ∞STEM DURUM RAPORU
    spawn(function()
        wait(3) -- Sistemlerin y√ºklenmesini bekle
        
        print("\n" .. string.rep("=", 50))
        print("           üìä Sƒ∞STEM DURUM RAPORU")
        print(string.rep("=", 50))
        
        local status = SystemManager:GetStatus()
        local activeCount = 0
        local totalCount = 0
        
        for name, enabled in pairs(status) do
            totalCount = totalCount + 1
            if enabled then activeCount = activeCount + 1 end
        end
        
        print(string.format("   ‚Ä¢ Toplam Sistem: %d", totalCount))
        print(string.format("   ‚Ä¢ Aktif Sistem: %d", activeCount))
        print(string.format("   ‚Ä¢ Bellek Kullanƒ±mƒ±: %.2f MB", collectgarbage("count")/1024))
        print(string.format("   ‚Ä¢ FPS: %d", UniversalSystems.Performance.FPS))
        
        print("\n   ‚úÖ √ñZELLƒ∞KLER:")
        print("     ‚Ä¢ üöÄ Mobile Fly (Joystick + Touch)")
        print("     ‚Ä¢ üöÄ Enhanced NoClip (Hareket kontroll√º)")
        print("     ‚Ä¢ üëë God Mode (Yer altƒ±nda gizli)")
        print("     ‚Ä¢ ‚òÄÔ∏è FullBright (T√ºm harita aydƒ±nlƒ±k)")
        print("     ‚Ä¢ üëÅÔ∏è All ESP (NPC + Item + Player)")
        print("     ‚Ä¢ üåÄ Black Hole (TPUNCHORD mantƒ±ƒüƒ±)")
        print("     ‚Ä¢ üí• Walk Fling (Infinit Yield tarzƒ±)")
        print("     ‚Ä¢ üõ°Ô∏è Auto Ragdoll (Akƒ±llƒ± tespit)")
        print("     ‚Ä¢ üîß Bring System (6 farklƒ± bring)")
        print("     ‚Ä¢ üì± Mobile GUI (Dokunabilir)")
        
        print("\n   üéÆ KONTROLLER:")
        print("     ‚Ä¢ F1-F12: Hotkey'ler")
        print("     ‚Ä¢ /help: Komut listesi")
        print("     ‚Ä¢ Mobile: Gesture kontroller")
        print("     ‚Ä¢ GUI: S√ºr√ºkle, kaydƒ±r, k√º√ß√ºlt")
        
        print(string.rep("=", 50))
        print("   üí° ƒ∞PUCU: /help yazarak t√ºm komutlarƒ± g√∂rebilirsin")
        print(string.rep("=", 50) .. "\n")
    end)
end

-- OYUNCU KATILDIƒûINDA BA≈ûLAT
local function OnPlayerJoined()
    -- Karakter bekle
    Character = Player.Character or Player.CharacterAdded:Wait()
    HumanoidRootPart = Character:WaitForChild("HumanoidRootPart", 10)
    
    -- Ana sistemi ba≈ülat
    wait(1) -- Diƒüer scriptlerin y√ºklenmesini bekle
    InitializeUniversalTool()
end

-- BA≈ûLANGI√á
if Player then
    OnPlayerJoined()
else
    Players.PlayerAdded:Connect(function(joinedPlayer)
        if joinedPlayer == Player then
            OnPlayerJoined()
        end
    end)
end

-- OYUNCU AYRILDIƒûINDA TEMƒ∞ZLƒ∞K
Players.PlayerRemoving:Connect(function(leavingPlayer)
    if leavingPlayer == Player then
        print("üëã Oyuncu ayrƒ±lƒ±yor, sistemler temizleniyor...")
        
        -- T√ºm sistemleri kapat
        SystemManager:DisableAll()
        
        -- T√ºm baƒülantƒ±larƒ± temizle
        for name, connection in pairs(Connections) do
            SafeCall(function() connection:Disconnect() end, "Disconnect_" .. name)
        end
        
        -- GUI'yi temizle
        if MobileGUI and MobileGUI.GUI then
            MobileGUI.GUI:Destroy()
        end
        
        -- Bellek temizliƒüi
        collectgarbage("collect")
        
        print("‚úÖ Universal Tool ba≈üarƒ±yla kapatƒ±ldƒ±!")
    end
end)

-- HATA YAKALAMA
local function GlobalErrorHandler(message, trace)
    warn("üî• KRƒ∞Tƒ∞K HATA: " .. message)
    warn("   üìç Konum: " .. trace)
    
    -- Kritik hata durumunda sistemleri g√ºvenli ≈üekilde kapat
    spawn(function()
        wait(0.5)
        print("üîÑ Kritik hatadan kurtarƒ±lƒ±yor...")
        SystemManager:DisableAll()
        wait(1)
        print("‚úÖ Sistemler g√ºvenli ≈üekilde kapatƒ±ldƒ±")
    end)
end

-- GLOBAL HATA YAKALAYICI
xpcall(function()
    -- Ana kod burada √ßalƒ±≈üacak
end, GlobalErrorHandler)

print("\n" .. string.rep("‚≠ê", 50))
print("      UNIVERSAL TOOL v5.0 TAMAMEN Y√úKLENDƒ∞!")
print("          Delta Executor - Enhanced Edition")
print(string.rep("‚≠ê", 50))
print("   üì± Mobile Optimize | üéÆ Full Controller")
print("   üõ°Ô∏è Anti-Crash | üîß Easy to Use")
print("   üöÄ 7 Part Complete System")
print(string.rep("‚≠ê", 50) .. "\n")
